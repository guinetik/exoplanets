import{j as i}from"./index-KgdxG6_W.js";const Q={"Gas Giant":"#d4a854","Neptune-like":"#3b8fd9","Sub-Neptune":"#4eb8e0","Super-Earth":"#b5885a","Earth-sized":"#5a9668","Sub-Earth":"#c4623a",Terrestrial:"#d9a050"},Z=.3,tt=13,ot=.01,st=1e4,nt=180,ct=250,et=400,rt=800,it=.15,lt=.08,at=.9,_t=.2,Et=.4,pt=1,ft=.15,I=1,ut=200,xt=100,k=.2,W=1.3,ht=.8,St=.15,dt=.85,Tt=.1,yt=.9,At=.1,U=.6,Mt=1,Rt=.2,It=.3,Nt=.05,Gt=.15,V=.8,Lt=.5,Ot=3500,B=5778,Ct=8e3;function X(t){let o=0;for(let n=0;n<t.length;n++)o=(o<<5)-o+t.charCodeAt(n),o=o&o;return Math.abs(o%1e3)/1e3}function F(t,o,n,s=.5){return t==null||isNaN(t)?s:Math.max(0,Math.min(1,(t-o)/(n-o)))}function j(t,o,n){const s=Math.max(0,Math.min(1,(n-t)/(o-t)));return s*s*(3-2*s)}function _(t,o,n){return t*(1-n)+o*n}function Y(t,o,n){return[_(t[0],o[0],n),_(t[1],o[1],n),_(t[2],o[2],n)]}function u(t,o,n){return Math.max(o,Math.min(n,t))}function b(t){return t-Math.floor(t)}function bt(t,o,n){const c=n<o?[o,n,-1,.6666666666666666]:[n,o,0,-.3333333333333333],E=c[0]<t?[t,c[1],c[3],c[0]]:[c[0],c[1],c[2],t],e=E[0]-Math.min(E[3],E[1]),p=Math.abs(E[2]+(E[3]-E[1])/(6*e+1e-10)),f=e/(E[0]+1e-10),l=E[0];return[p,f,l]}function gt(t,o,n){const s=[1,.6666666666666666,.3333333333333333,3],c=Math.abs(b(t+s[0])*6-s[3]),E=Math.abs(b(t+s[1])*6-s[3]),e=Math.abs(b(t+s[2])*6-s[3]),p=n*_(s[0],u(c-s[0],0,1),o),f=n*_(s[0],u(E-s[0],0,1),o),l=n*_(s[0],u(e-s[0],0,1),o);return[p,f,l]}function Bt(t){const o=t.replace("#",""),n=parseInt(o.substring(0,2),16)/255,s=parseInt(o.substring(2,4),16)/255,c=parseInt(o.substring(4,6),16)/255;return[n,s,c]}function jt(t){const o=[1,.7,.5],n=[1,.98,.95],s=[.85,.9,1];if(t<B){const c=j(Ot,B,t);return Y(o,n,c)}else{const c=j(B,Ct,t);return Y(n,s,c)}}function Ht(t,o,n){const s=[1,.7,.2],c=[1,.5,.15],E=[.95,.25,.1],e=[.35,.18,.1],p=[.5,.25,.12],f=u((o-800)/2200,0,1),l=.7+f*.3+n*.15,r=t*.5+.5;let a=_(e[0],p[0],r),d=_(e[1],p[1],r),S=_(e[2],p[2],r);const A=l*.6,T=f>.6?s:f>.3?c:E;return a=_(a,T[0],A),d=_(d,T[1],A),S=_(S,T[2],A),a+=T[0]*l*.25,d+=T[1]*l*.15,S+=T[2]*l*.08,[u(a,0,1.2),u(d,0,1),u(S,0,1)]}function mt(t,o){const n=[.95,.97,1],s=[.75,.88,1],c=[.65,.92,1],E=u((250-o)/150,0,1),e=t*.5+.5;let p=_(s[0],n[0],e),f=_(s[1],n[1],e),l=_(s[2],n[2],e);const r=t*.35;p=_(p,c[0],r),f=_(f,c[1],r),l=_(l,c[2],r);const a=1+E*.15;return p*=a,f*=a,l*=a,[u(p,0,1.1),u(f,0,1.1),u(l,0,1.1)]}function $t(t){const o=t.planet_type||"Terrestrial",n=t.planet_subtype,s=Q[o]||"#888888",c=X(t.pl_name),E=F(t.pl_dens,Z,tt,.5),e=F(t.pl_insol,ot,st,.5),p=t.pl_eqt??300,f=t.st_teff??B;let l,r,a;if(n==="Lava World")[l,r,a]=Ht(c,p,e);else if(n==="Ice World")[l,r,a]=mt(c,p);else{const[m,x,h]=Bt(s),$=["Sub-Earth","Earth-sized","Super-Earth","Terrestrial"].includes(o);let[M,N,q]=bt(m,x,h);const z=c*it;M=b(M+z);const K=(E-.5)*lt;M=b(M-K+1);const J=E*ft;if(N=u(N*(at+c*_t)+J,Et,pt),[l,r,a]=gt(M,N,q),$){let R=p;R+=(e-.5)*ut,e<.5&&(R-=(.5-e)*xt);const G=j(ct,nt,R),L=j(et,rt,R);let y=l*I,O=r*I,C=a*I;if(G>0){const D=(ht+c*St)*U,P=(dt+c*Tt)*U,w=(yt+c*At)*U;y=_(y,D,G),O=_(O,P,G),C=_(C,w,G)}if(L>0){const D=Mt*V,P=(Rt+c*It)*V,w=(Nt+c*Gt)*V,v=L*Lt;y=_(y,D,v),O=_(O,P,v),C=_(C,w,v)}l=y,r=O,a=C}else{l*=I,r*=I,a*=I;const R=500,L=u((p-R)/(2e3-R),0,1);if(L>0){const y=L*.3;l=l*(1+y*.5),r=r*(1-y*.2),a=a*(1-y*.4)}}}const[d,S,A]=jt(f);l=_(l,l*d,k),r=_(r,r*S,k),a=_(a,a*A,k),l*=W,r*=W,a*=W;const T=Math.round(u(l*255,0,255)),g=Math.round(u(r*255,0,255)),H=Math.round(u(a*255,0,255));return`rgb(${T}, ${g}, ${H})`}function Dt(t){return t==null?.5:Math.max(.1,Math.min(1,t/11.2))}function wt({planet:t,size:o=64}){const n=t.planet_type||"Terrestrial",s=$t(t),c=X(t.pl_name),E=Dt(t.pl_rade),e=o/2*(.65+E*.3),p=n==="Gas Giant"||n==="Neptune-like",f=["Sub-Earth","Earth-sized","Super-Earth","Terrestrial"].includes(n),l=n==="Gas Giant",r=Math.floor(c*10),a=Math.floor(c*20),d=Math.floor(c*30),S=s.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/),A=S?parseInt(S[1]):200,T=S?parseInt(S[2]):200,g=S?parseInt(S[3]):200,H=`rgba(${A}, ${T}, ${g}, 0.4)`,m=`rgba(${A}, ${T}, ${g}, 0.2)`,x=o/2,h=o/2,$=r*360,M=r*360+5,N=r*360-3;return i.jsxs("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,className:"planet-visualization",style:{overflow:"visible"},children:[i.jsxs("defs",{children:[i.jsxs("filter",{id:`glow-${c}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[i.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),i.jsxs("feMerge",{children:[i.jsx("feMergeNode",{in:"coloredBlur"}),i.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),f&&i.jsxs("pattern",{id:`surface-${r}`,x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:[i.jsx("circle",{cx:r,cy:a,r:"0.5",fill:s,opacity:"0.3"}),i.jsx("circle",{cx:a+10,cy:d,r:"0.3",fill:s,opacity:"0.2"}),i.jsx("circle",{cx:d+5,cy:r+10,r:"0.4",fill:s,opacity:"0.25"})]}),l&&i.jsxs("pattern",{id:`clouds-${r}`,x:"0",y:"0",width:"30",height:"30",patternUnits:"userSpaceOnUse",children:[i.jsx("ellipse",{cx:r*10,cy:a*10,rx:"3",ry:"1.5",fill:"white",opacity:"0.1"}),i.jsx("ellipse",{cx:a*10+15,cy:d*10,rx:"2",ry:"1",fill:"white",opacity:"0.08"}),i.jsx("ellipse",{cx:d*10+5,cy:r*10+15,rx:"2.5",ry:"1.2",fill:"white",opacity:"0.12"})]}),n==="Neptune-like"&&i.jsxs("linearGradient",{id:`bands-${r}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:s,stopOpacity:"1"}),i.jsx("stop",{offset:"30%",stopColor:s,stopOpacity:"0.8"}),i.jsx("stop",{offset:"50%",stopColor:s,stopOpacity:"0.9"}),i.jsx("stop",{offset:"70%",stopColor:s,stopOpacity:"0.8"}),i.jsx("stop",{offset:"100%",stopColor:s,stopOpacity:"1"})]})]}),i.jsx("circle",{cx:x,cy:h,r:e+4,fill:H,opacity:"0.3"}),i.jsx("circle",{cx:x,cy:h,r:e+2,fill:m,opacity:"0.5"}),i.jsx("circle",{cx:x,cy:h,r:e,fill:n==="Neptune-like"?`url(#bands-${r})`:s,filter:`url(#glow-${c})`,style:{fill:f?`url(#surface-${r})`:l?`url(#clouds-${r})`:s}}),f&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:x-e*.3,cy:h-e*.2,r:e*.08,fill:"black",opacity:"0.2"}),i.jsx("circle",{cx:x+e*.4,cy:h+e*.3,r:e*.06,fill:"black",opacity:"0.15"}),i.jsx("ellipse",{cx:x+e*.2,cy:h-e*.4,rx:e*.1,ry:e*.05,fill:"black",opacity:"0.18"})]}),p&&i.jsxs(i.Fragment,{children:[i.jsx("ellipse",{cx:x,cy:h,rx:e*1.4,ry:e*.15,fill:"transparent",stroke:s,strokeWidth:1,opacity:.4,transform:`rotate(${$} ${x} ${h})`}),i.jsx("ellipse",{cx:x,cy:h,rx:e*1.25,ry:e*.12,fill:"transparent",stroke:s,strokeWidth:.8,opacity:.5,transform:`rotate(${M} ${x} ${h})`}),i.jsx("ellipse",{cx:x,cy:h,rx:e*1.1,ry:e*.1,fill:"transparent",stroke:s,strokeWidth:.6,opacity:.6,transform:`rotate(${N} ${x} ${h})`})]})]})}export{wt as P};
