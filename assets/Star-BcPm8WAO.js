import{r as n,Q as De,g as K,h as $e,C as z,V as J,j as e,D as Fe,A as ae,s as O,i as qe,k as We,l as Ze,m as Ke,o as Xe,p as Qe,q as Je,t as Be,v as et,F as Re,w as tt,b as Ue,x as st,y as at,z as rt,E as ke,M as it,u as $,G as nt,e as lt,d as ot,n as ct,S as ut,L as Te}from"./index-agfWtMau.js";import{b as mt,S as dt}from"./seo-CvLMoO3_.js";import{a as q,C as pt,u as ht}from"./react-three-fiber.esm-5J2Felbe.js";import{c as ft,T as vt,E as P,u as le}from"./ExplainableProperty-1kP7emX1.js";import{_ as xt,O as gt,t as yt,c as St,i as Nt,a as re,l as _t,s as oe,b as jt,d as ze,m as Et,e as Se,f as Ge,g as xe,h as ge}from"./transform-DUNKWzO3.js";import{g as Rt,a as Tt}from"./habitabilityAnalytics-CzP9HgSM.js";const Me=n.forwardRef(function({children:a,follow:s=!0,lockX:i=!1,lockY:r=!1,lockZ:o=!1,...m},v){const p=n.useRef(null),h=n.useRef(null),c=new De;return q(({camera:x})=>{if(!s||!h.current)return;const l=p.current.rotation.clone();h.current.updateMatrix(),h.current.updateWorldMatrix(!1,!1),h.current.getWorldQuaternion(c),x.getWorldQuaternion(p.current.quaternion).premultiply(c.invert()),i&&(p.current.rotation.x=l.x),r&&(p.current.rotation.y=l.y),o&&(p.current.rotation.z=l.z)}),n.useImperativeHandle(v,()=>h.current,[]),n.createElement("group",xt({ref:h},m),n.createElement("group",{ref:p},a))}),Q=4,ce=60,ue=1.0314879;function Mt({starRadius:t,starColor:a,starSeed:s,activityLevel:i}){const r=n.useRef([]),o=n.useRef([]),m=n.useRef(new Array(Q).fill(-1e3)),v=n.useRef(i);v.current=i;const p=n.useMemo(()=>{const d=[];for(let u=0;u<Q;u++){const N=s+u*.1;d.push({angle:K(`${N}-angle`)*Math.PI*2,elevation:(K(`${N}-elev`)-.5)*Math.PI*.8,phase:K(`${N}-phase`)*Math.PI*2,speed:.7+K(`${N}-speed`)*.6,size:.8+K(`${N}-size`)*.4})}return d},[s]),h=n.useMemo(()=>$e(),[]),c=n.useMemo(()=>p.map(d=>({uStarColor:{value:new z(a)},uTime:{value:0},uFlarePhase:{value:0},uFlareLength:{value:Math.max(t*.3*d.size,ue)},uFlareSeed:{value:d.phase}})),[a,t,p]),x=n.useCallback(d=>{const u=performance.now()/1e3;if(d!==void 0&&d>=0&&d<Q)m.current[d]=u,console.log(`ðŸ”¥ Triggered flare ${d}`);else{const N=Math.floor(Math.random()*Q);m.current[N]=u,console.log(`ðŸ”¥ Triggered random flare ${N}`)}},[]),l=n.useCallback(()=>{const d=performance.now()/1e3;for(let u=0;u<Q;u++)m.current[u]=d+u*.2;console.log("ðŸ”¥ðŸ”¥ðŸ”¥ Triggered ALL flares!")},[]);n.useEffect(()=>(console.log("ðŸŒŸ SolarFlares component mounting..."),console.log(`   Star radius: ${t}, Activity: ${i}`),window.solarFlares={trigger:x,triggerAll:l,setActivity:d=>{console.log(`Activity level set to ${d} (only affects new cycles)`)},status:()=>{console.log("Solar Flares Status:"),console.log(`  - Number of flares: ${Q}`),console.log(`  - Activity level: ${v.current}`),console.log(`  - Cycle duration: ${ce}s`),console.log(`  - Star radius: ${t}`),console.log("Commands:"),console.log("  solarFlares.trigger()      - Trigger random flare"),console.log("  solarFlares.trigger(0-3)   - Trigger specific flare"),console.log("  solarFlares.triggerAll()   - Trigger all flares")}},console.log("âœ… Solar flares ready! Type solarFlares.status() for commands"),()=>{console.log("ðŸŒŸ SolarFlares component unmounting..."),delete window.solarFlares}),[x,l,t,i]),q(d=>{const u=d.clock.elapsedTime,N=performance.now()/1e3;p.forEach((E,f)=>{const _=o.current[f],j=r.current[f];if(!_||!j)return;const y=m.current[f],S=N-y,I=5;let M=0;if(S>=0&&S<I)M=S/I;else{const F=(u*E.speed+E.phase)%ce/ce,U=1-v.current*.15;M=F>U?(F-U)/(1-U):0}const D=g[f].position.clone().normalize();let H=1;if(M<.6)H=1+M*.33;else{const T=(M-.6)/.4;H=1.2+T*T*10}const W=t*H;j.position.copy(D.multiplyScalar(W)),_.uniforms.uTime.value=u,_.uniforms.uFlarePhase.value=M})});const g=n.useMemo(()=>p.map(d=>{const u=Math.cos(d.elevation)*Math.cos(d.angle),N=Math.sin(d.elevation),E=Math.cos(d.elevation)*Math.sin(d.angle),f=new J(u,N,E).multiplyScalar(t*1.05),_=f.clone().normalize(),j=new De;return j.setFromUnitVectors(new J(0,1,0),_),{position:f,quaternion:j}}),[p,t]);return e.jsx("group",{children:p.map((d,u)=>e.jsxs("mesh",{ref:N=>r.current[u]=N,position:g[u].position,quaternion:g[u].quaternion,children:[e.jsx("planeGeometry",{args:[Math.max(t*.25*d.size,ue),Math.max(t*.35*d.size,ue*1.4)]}),e.jsx("shaderMaterial",{ref:N=>o.current[u]=N,vertexShader:O.get(h.vert),fragmentShader:O.get(h.frag),uniforms:c[u],transparent:!0,depthWrite:!1,blending:ae,side:Fe})]},u))})}const Ie=.15,be={CLOSE_THRESHOLD_MULTIPLIER:4,FAR_THRESHOLD_MULTIPLIER:20},C={RAY_STAR_RADIUS:.08,GLOW_SIZE_MULTIPLIER:3,RAYS_SIZE_MULTIPLIER:6,CORONA_SCALE_MULTIPLIER:1.8,PRIMARY_LIGHT_INTENSITY:2,COMPANION_LIGHT_INTENSITY:1.5,PRIMARY_LIGHT_DISTANCE:50,COMPANION_LIGHT_DISTANCE:40},te={INNER_RADIUS_MULTIPLIER:.6,OUTER_RADIUS_MULTIPLIER:1.3,BASE_ROTATION_X:Math.PI/2},ye={MAX_ECCENTRICITY:.99};function It(t,a,s,i){const r=a*.3-.15;return{base:ft(t,a),density:s,insolation:i,variation:r}}function bt(t){return t?Math.min(t/300,1):.5}function wt(t){return t?Math.min(t/2,1):.5}function At(t,a){const s=a*be.CLOSE_THRESHOLD_MULTIPLIER,i=a*be.FAR_THRESHOLD_MULTIPLIER;return 1-Math.min(1,Math.max(0,(t-s)/(i-s)))}function Ot({body:t,isHovered:a,onHover:s,onClick:i,onPositionUpdate:r}){const o=n.useRef(null),m=n.useRef(null),v=n.useRef(null),p=n.useRef(null),h=n.useRef(null),c=n.useRef(Math.random()*Math.PI*2),x=n.useContext(Ne),l=n.useMemo(()=>K(t.id??t.name),[t.id,t.name]),g=n.useMemo(()=>qe(t.spectralType),[t.spectralType]),d=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??5778},uSeed:{value:l},uActivityLevel:{value:g}}),[t.color,t.temperature,l,g]),u=n.useRef(null),N=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uIntensity:{value:t.emissiveIntensity??1},uSeed:{value:l},uActivityLevel:{value:g}}),[t.color,t.emissiveIntensity,l,g]),E=n.useRef(null),f=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??5778},uSeed:{value:l},uActivityLevel:{value:g},uStarRadius:{value:C.RAY_STAR_RADIUS}}),[t.color,t.temperature,l,g]),_=n.useRef(null),j=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uSeed:{value:l},uActivityLevel:{value:g}}),[t.color,l,g]),y=n.useMemo(()=>t.planetData?{...We({planet:t.planetData,detailLevel:"detailed",starTemp:t.planetData.st_teff??void 0,showTerminator:!1}),uZoomLevel:{value:0},uBodyDiameter:{value:t.diameter}}:{uBaseColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??300},uHasAtmosphere:{value:t.hasAtmosphere??.5},uSeed:{value:Math.random()},uDensity:{value:.5},uInsolation:{value:.5},uStarTemp:{value:5778},uDetailLevel:{value:1},uEnableTerminator:{value:0},uColorTempFactor:{value:.5},uColorCompositionFactor:{value:.5},uColorIrradiationFactor:{value:.5},uColorMetallicityFactor:{value:.5},uZoomLevel:{value:0},uBodyDiameter:{value:t.diameter}},[t.planetData,t.color,t.temperature,t.hasAtmosphere,t.diameter]),S=n.useMemo(()=>t.planetData?Ze(t.planetData):"rocky",[t.planetData]),I=n.useMemo(()=>Ke(S),[S]),M=n.useMemo(()=>Xe("v2"),[]),G=n.useMemo(()=>Qe("v2"),[]),D=n.useMemo(()=>Je(),[]),H=n.useMemo(()=>Be(),[]),W=n.useMemo(()=>et(),[]),T=n.useRef(null),F=n.useMemo(()=>{var X,_e,je,Ee;const R=t.id?K(t.id):Math.random(),L=bt((X=t.planetData)==null?void 0:X.pl_bmasse),A=wt((_e=t.planetData)==null?void 0:_e.pl_insol),b=((je=t.planetData)==null?void 0:je.pl_eqt)??((Ee=t.planetData)!=null&&Ee.pl_insol?Math.sqrt(t.planetData.pl_insol)*255:150),Y=It(b,R,L,A).base,V=t.diameter*te.INNER_RADIUS_MULTIPLIER,ee=t.diameter*te.OUTER_RADIUS_MULTIPLIER;return{uBaseColor:{value:Y},uRingColor:{value:Y},uTime:{value:0},uSeed:{value:R},uDensity:{value:L},uInsolation:{value:A},uInnerRadius:{value:V},uOuterRadius:{value:ee}}},[t.id,t.planetData,t.diameter]);q((R,L)=>{if(t.type==="planet"&&o.current&&t.orbitPeriod>0&&(c.current+=Math.PI*2*L*Ie/(t.orbitPeriod/60)),t.type==="star"&&t.orbitRadius>0&&o.current&&t.orbitPeriod>0&&(c.current+=Math.PI*2*L*Ie*2/(t.orbitPeriod/60)),t.type==="planet"&&o.current){const b=Math.min(Math.max(t.orbitEccentricity||0,0),ye.MAX_ECCENTRICITY),w=t.orbitRadius,Y=w*Math.sqrt(1-b*b),V=w*b,ee=w*Math.cos(c.current)-V,X=Y*Math.sin(c.current);o.current.position.x=ee,o.current.position.z=X}if(t.type==="star"&&t.orbitRadius>0&&o.current){const b=Math.min(Math.max(t.orbitEccentricity||0,0),ye.MAX_ECCENTRICITY),w=t.orbitRadius,Y=w*Math.sqrt(1-b*b),V=t.isCompanionStar?Math.PI:0,ee=w*Math.cos(c.current+V),X=Y*Math.sin(c.current+V);o.current.position.x=ee,o.current.position.z=X}o.current&&r&&r(t.id,o.current.position),m.current&&(m.current.rotation.x=t.axialTilt,t.isTidallyLocked&&t.type==="planet"?m.current.rotation.y=-c.current+Math.PI:m.current.rotation.y+=L*t.rotationSpeed);const A=R.clock.elapsedTime;if(t.type==="star")v.current&&(v.current.uniforms.uTime.value=A),p.current&&(p.current.uniforms.uTime.value=A),u.current&&(u.current.uniforms.uTime.value=A),E.current&&(E.current.uniforms.uTime.value=A),_.current&&(_.current.uniforms.uTime.value=A);else if(t.type==="planet"){if(h.current&&(h.current.uniforms.uTime.value=A,x&&o.current)){const b=x.cameraDistance.current,w=o.current.position,Y=Math.sqrt(Math.pow(w.x,2)+Math.pow(w.y-b*.4,2)+Math.pow(w.z-b,2)),V=At(Y,t.diameter);h.current.uniforms.uZoomLevel.value=V}T.current&&(T.current.uniforms.uTime.value=A)}});const U=a?1.3:1;if(t.type==="star"){const R=t.diameter/2,L=e.jsxs(e.Fragment,{children:[e.jsx("pointLight",{position:[0,0,0],color:t.color,intensity:t.isCompanionStar?C.COMPANION_LIGHT_INTENSITY:C.PRIMARY_LIGHT_INTENSITY,distance:t.isCompanionStar?C.COMPANION_LIGHT_DISTANCE:C.PRIMARY_LIGHT_DISTANCE}),e.jsx(Me,{children:e.jsxs("mesh",{children:[e.jsx("planeGeometry",{args:[t.diameter*C.GLOW_SIZE_MULTIPLIER,t.diameter*C.GLOW_SIZE_MULTIPLIER]}),e.jsx("shaderMaterial",{ref:p,transparent:!0,depthWrite:!1,blending:ae,uniforms:{uColor:{value:new z(t.color)},uIntensity:{value:t.emissiveIntensity??1},uTime:{value:0},uSeed:{value:l}},vertexShader:`
                varying vec2 vUv;
                void main() {
                  vUv = uv;
                  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
              `,fragmentShader:`
                uniform vec3 uColor;
                uniform float uIntensity;
                uniform float uTime;
                uniform float uSeed;
                varying vec2 vUv;

                // Simple noise for animation
                float hash(vec2 p) {
                  return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
                }

                float noise(vec2 p) {
                  vec2 i = floor(p);
                  vec2 f = fract(p);
                  f = f * f * (3.0 - 2.0 * f);
                  float a = hash(i);
                  float b = hash(i + vec2(1.0, 0.0));
                  float c = hash(i + vec2(0.0, 1.0));
                  float d = hash(i + vec2(1.0, 1.0));
                  return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
                }

                void main() {
                  vec2 center = vUv - 0.5;
                  float dist = length(center);  // 0 to 0.707 at corners
                  float angle = atan(center.y, center.x);

                  // Hard circular mask - forces circular shape, no box
                  float circularMask = 1.0 - smoothstep(0.35, 0.5, dist);

                  // Rotating glow with star
                  float rotAngle = angle + uTime * 0.5;

                  // Animated noise for organic variation
                  float n1 = noise(vec2(rotAngle * 3.0, dist * 8.0 + uTime * 0.3 + uSeed));
                  float n2 = noise(vec2(rotAngle * 5.0 + 10.0, dist * 12.0 - uTime * 0.2));
                  float noiseVal = n1 * 0.6 + n2 * 0.4;

                  // Exponential falloff from center
                  float glow = exp(-dist * dist * 12.0);

                  // Add noise variation (subtle)
                  glow *= 0.85 + noiseVal * 0.25;

                  // Pulsing intensity
                  float pulse = 1.0 + sin(uTime * 0.8 + uSeed * 6.28) * 0.08;

                  // Clamp intensity
                  float clampedIntensity = clamp(uIntensity, 0.7, 1.8);
                  glow = glow * clampedIntensity * 0.7 * pulse * circularMask;

                  gl_FragColor = vec4(uColor, glow);
                }
              `})]})}),e.jsxs("mesh",{ref:m,children:[e.jsx("sphereGeometry",{args:[t.diameter/2,64,64]}),e.jsx("shaderMaterial",{ref:v,vertexShader:O.get(M.vert),fragmentShader:O.get(M.frag),uniforms:d})]}),e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[R*C.CORONA_SCALE_MULTIPLIER,64,64]}),e.jsx("shaderMaterial",{ref:u,vertexShader:O.get(G.vert),fragmentShader:O.get(G.frag),uniforms:N,transparent:!0,depthWrite:!1,blending:ae,side:Re})]}),e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[R*1.4,64,64]}),e.jsx("shaderMaterial",{ref:_,vertexShader:O.get(H.vert),fragmentShader:O.get(H.frag),uniforms:j,transparent:!0,depthWrite:!1,blending:ae,side:Re})]}),e.jsx(Mt,{starRadius:R,starColor:t.color,starSeed:l,activityLevel:g}),e.jsx(Me,{children:e.jsxs("mesh",{children:[e.jsx("planeGeometry",{args:[t.diameter*C.RAYS_SIZE_MULTIPLIER,t.diameter*C.RAYS_SIZE_MULTIPLIER]}),e.jsx("shaderMaterial",{ref:E,vertexShader:O.get(D.vert),fragmentShader:O.get(D.frag),uniforms:f,transparent:!0,depthWrite:!1,blending:ae})]})})]});return t.orbitRadius>0?e.jsx("group",{ref:o,children:L}):e.jsx("group",{ref:o,children:L})}return e.jsxs("group",{ref:o,children:[e.jsxs("mesh",{ref:m,scale:[U,U,U],onPointerOver:R=>{var b,w;R.stopPropagation(),document.body.style.cursor="pointer";const L=R.clientX??((b=R.nativeEvent)==null?void 0:b.clientX),A=R.clientY??((w=R.nativeEvent)==null?void 0:w.clientY);s(t,L&&A?{x:L,y:A}:void 0)},onPointerMove:R=>{var L,A;if(a){const b=R.clientX??((L=R.nativeEvent)==null?void 0:L.clientX),w=R.clientY??((A=R.nativeEvent)==null?void 0:A.clientY);b&&w&&s(t,{x:b,y:w})}},onPointerOut:R=>{R.stopPropagation(),document.body.style.cursor="grab",s(null)},onClick:R=>{R.stopPropagation(),i==null||i(t)},children:[e.jsx("sphereGeometry",{args:[t.diameter/2,48,48]}),e.jsx("shaderMaterial",{ref:h,vertexShader:O.get(tt("v2")),fragmentShader:O.get(I),uniforms:y})]}),t.hasRings&&e.jsxs("mesh",{rotation:[te.BASE_ROTATION_X+t.axialTilt,0,0],children:[e.jsx("ringGeometry",{args:[t.diameter*te.INNER_RADIUS_MULTIPLIER,t.diameter*te.OUTER_RADIUS_MULTIPLIER,64]}),e.jsx("shaderMaterial",{ref:T,vertexShader:O.get(W.vert),fragmentShader:O.get(W.frag),uniforms:F,transparent:!0,depthWrite:!1,side:Fe})]}),a&&e.jsxs("mesh",{scale:[1.4,1.4,1.4],children:[e.jsx("sphereGeometry",{args:[t.diameter/2,24,24]}),e.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.15,side:Ue})]})]})}const we={FADE_DURATION:2.2,FADE_EASING_POWER:3},me={SEGMENTS:128,FULL_CIRCLE:Math.PI*2,ECCENTRICITY_THRESHOLD:.1},ie={highlighted:{color:"#ffffff",opacity:.8},binaryOrbit:{color:"#ffaa44",opacity:.5},eccentricPlanet:{color:"#aaaaff",opacity:.45},circularPlanet:{color:"#888888",opacity:.3}};function Lt(t,a,s){return t?ie.highlighted:a?ie.binaryOrbit:s?ie.eccentricPlanet:ie.circularPlanet}function Ae({radius:t,eccentricity:a=0,isHighlighted:s,isBinaryOrbit:i=!1}){const r=n.useRef(null),o=n.useRef(null),[m,v]=n.useState(!1),p=Math.min(Math.max(a,0),ye.MAX_ECCENTRICITY),h=t,c=h*Math.sqrt(1-p*p),x=i?0:h*p,l=p>me.ECCENTRICITY_THRESHOLD,g=n.useMemo(()=>{const d=me.SEGMENTS,u=[];for(let f=0;f<=d;f++){const _=f/d*me.FULL_CIRCLE,j=h*Math.cos(_)-x,y=c*Math.sin(_);u.push(new J(j,0,y))}const N=new st().setFromPoints(u),E=new at({transparent:!0,depthWrite:!1});return new rt(N,E)},[h,c,x]);return q(d=>{if(!r.current)return;const u=r.current.material;o.current===null&&(o.current=d.clock.elapsedTime);let N=1;if(!m){const f=d.clock.elapsedTime-o.current,_=Math.min(f/we.FADE_DURATION,1);N=1-Math.pow(1-_,we.FADE_EASING_POWER),_>=1&&v(!0)}const E=Lt(s,i,l);u.color.set(E.color),u.opacity=E.opacity*N}),e.jsx("primitive",{ref:r,object:g})}const Oe={FADE_DURATION:2.5,FADE_EASING_POWER:3},Le={WIDTH_SEGMENTS:64,HEIGHT_SEGMENTS:32},Pt={THEME_COUNT:6},Ct={bluePurple:{primary:{hue:.7,saturation:.6,lightness:.5,hueVariation:.1},secondary:{hue:.8,saturation:.5,lightness:.4,hueVariation:.05}},redOrange:{primary:{hue:0,saturation:.7,lightness:.5,hueVariation:.05},secondary:{hue:.05,saturation:.6,lightness:.4,hueVariation:.05}},tealCyan:{primary:{hue:.5,saturation:.5,lightness:.5,hueVariation:.05},secondary:{hue:.55,saturation:.4,lightness:.4,hueVariation:.05}},greenYellow:{primary:{hue:.25,saturation:.5,lightness:.45,hueVariation:.1},secondary:{hue:.15,saturation:.4,lightness:.4,hueVariation:.1}},pinkMagenta:{primary:{hue:.9,saturation:.6,lightness:.55,hueVariation:.05},secondary:{hue:.85,saturation:.5,lightness:.45,hueVariation:.05}},blueViolet:{primary:{hue:.65,saturation:.4,lightness:.35,hueVariation:.1},secondary:{hue:.7,saturation:.3,lightness:.3,hueVariation:.1}}};function Dt(t){const a=Math.floor(t*Pt.THEME_COUNT),s=Object.values(Ct),i=s[Math.min(a,s.length-1)];return{primary:new z().setHSL(i.primary.hue+t*i.primary.hueVariation,i.primary.saturation,i.primary.lightness),secondary:new z().setHSL(i.secondary.hue+t*i.secondary.hueVariation,i.secondary.saturation,i.secondary.lightness)}}function Ft(t){let a=0;for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);a=(a<<5)-a+i,a=a&a}return Math.abs(a%1e4)/1e4}function Ut({systemName:t,density:a=.3,radius:s=400,quality:i="high"}){const r=n.useRef(null),o=n.useMemo(()=>Ft(t),[t]),m=n.useMemo(()=>Dt(o),[o]),v=n.useMemo(()=>{switch(i){case"low":return 0;case"medium":return .5;case"high":return 1;default:return 1}},[i]),p=n.useRef(null),[h,c]=n.useState(!1),x=n.useMemo(()=>({uTime:{value:0},uSeed:{value:o},uDensity:{value:a},uOpacity:{value:0},uPrimaryColor:{value:m.primary},uSecondaryColor:{value:m.secondary},uQuality:{value:v}}),[o,a,m,v]);return q(l=>{if(r.current&&(r.current.uniforms.uTime.value=l.clock.elapsedTime,p.current===null&&(p.current=l.clock.elapsedTime),!h)){const g=l.clock.elapsedTime-p.current,d=Math.min(g/Oe.FADE_DURATION,1),u=1-Math.pow(1-d,Oe.FADE_EASING_POWER);r.current.uniforms.uOpacity.value=u,d>=1&&c(!0)}}),a<=0?null:e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[s,Le.WIDTH_SEGMENTS,Le.HEIGHT_SEGMENTS]}),e.jsx("shaderMaterial",{ref:r,vertexShader:O.get("v2NebulaVert"),fragmentShader:O.get("v2NebulaFrag"),uniforms:x,transparent:!0,side:Ue,depthWrite:!1})]})}function kt(){if(typeof navigator>"u")return!1;const t=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t)}function zt(){if(typeof document>"u")return{vendor:null,renderer:null};try{const t=document.createElement("canvas"),a=t.getContext("webgl")||t.getContext("experimental-webgl");if(!a||!(a instanceof WebGLRenderingContext))return{vendor:null,renderer:null};const s=a.getExtension("WEBGL_debug_renderer_info");return s?{vendor:a.getParameter(s.UNMASKED_VENDOR_WEBGL),renderer:a.getParameter(s.UNMASKED_RENDERER_WEBGL)}:{vendor:null,renderer:null}}catch{return{vendor:null,renderer:null}}}function Gt(t){return t?[/intel.*hd graphics/i,/intel.*uhd graphics/i,/intel.*iris/i,/mali-4/i,/mali-t6/i,/adreno.*3/i,/adreno.*4/i,/powervr/i,/apple gpu/i,/swiftshader/i,/llvmpipe/i].some(s=>s.test(t)):!1}function Ht(t){return t?[/nvidia.*rtx/i,/nvidia.*gtx.*10[6-9]/i,/nvidia.*gtx.*16/i,/nvidia.*gtx.*20/i,/nvidia.*gtx.*30/i,/nvidia.*gtx.*40/i,/radeon.*rx.*5[6-9]/i,/radeon.*rx.*6/i,/radeon.*rx.*7/i,/apple.*m[1-3]/i,/adreno.*6[3-9]/i,/adreno.*7/i].some(s=>s.test(t)):!1}function Yt(t,a,s,i){return Gt(i)?"low":Ht(i)&&!t?"high":t?a>=8&&s>=3?"medium":"low":a>=8?"high":a>=4?"medium":"low"}function Vt(){return n.useMemo(()=>{const t=kt(),a=typeof window<"u"&&window.devicePixelRatio||1,s=typeof navigator<"u"&&navigator.hardwareConcurrency||4,{vendor:i,renderer:r}=zt(),o=Yt(t,s,a,r);return{quality:o,isMobile:t,isLowEnd:o==="low",pixelRatio:a,cores:s,gpuVendor:i,gpuRenderer:r}},[])}const k={COUNT:3e3,SPHERE_RADIUS:500,POINT_SIZE:1.5,COLOR:16777215,INITIAL_OPACITY:0,TARGET_OPACITY:.6,FADE_DURATION:2,FADE_EASING_POWER:3},ne={AMBIENT_INTENSITY:.6,HEMISPHERE_SKY_COLOR:"#ffffff",HEMISPHERE_GROUND_COLOR:"#444444",HEMISPHERE_INTENSITY:.5},B={ASPECT_RATIO:1.5,FOV:50,MIN_DISTANCE:2,INITIAL_Y_MULTIPLIER:.5},de={MULTIPLIER_DELTA_THRESHOLD:.01,ADJUSTMENT_STOP_THRESHOLD:.001,RESPONSIVE_LERP:.1},Z={PROGRESS_RAMP_UP:3,OFFSET_DISTANCE_MULTIPLIER:4,Y_OFFSET_MULTIPLIER:.4,BASE_LERP:.06,FOLLOW_LERP:.12,TARGET_LERP_MULTIPLIER:1.5},se={PROGRESS_RAMP_DOWN:2,CAMERA_RETURN_LERP:.03,TARGET_RETURN_LERP:.03,RESIZE_ADJUST_LERP:.02,RESIZE_TARGET_LERP:.02},$t={SPEED:.1},pe={STAR_SIZE_MULTIPLIER:4,ORBITS_MULTIPLIER:2.5,MAX_DISTANCE_MULTIPLIER:3},Pe={DENSITY:.7,RADIUS:480},qt={BACKGROUND_COLOR:"black"},He=n.createContext(null),Ne=n.createContext(null);function Wt({onReady:t}){const a=n.useRef(!1);return q(()=>{!a.current&&t&&(a.current=!0,t())}),null}function Zt({count:t=k.COUNT}){const a=n.useRef(null),s=n.useRef(null),[i,r]=n.useState(!1),o=n.useMemo(()=>{const m=new Float32Array(t*3);for(let v=0;v<t;v++){const p=Math.random()*Math.PI*2,h=Math.acos(2*Math.random()-1),c=k.SPHERE_RADIUS;m[v*3]=c*Math.sin(h)*Math.cos(p),m[v*3+1]=c*Math.sin(h)*Math.sin(p),m[v*3+2]=c*Math.cos(h)}return m},[t]);return q(m=>{if(a.current&&(s.current===null&&(s.current=m.clock.elapsedTime),!i)){const v=m.clock.elapsedTime-s.current,p=Math.min(v/k.FADE_DURATION,1),h=(1-Math.pow(1-p,k.FADE_EASING_POWER))*k.TARGET_OPACITY;a.current.opacity=h,p>=1&&r(!0)}}),e.jsxs("points",{children:[e.jsx("bufferGeometry",{children:e.jsx("bufferAttribute",{attach:"attributes-position",count:t,array:o,itemSize:3})}),e.jsx("pointsMaterial",{ref:a,size:k.POINT_SIZE,color:k.COLOR,transparent:!0,opacity:k.INITIAL_OPACITY,sizeAttenuation:!1})]})}function Ye(t){return B.ASPECT_RATIO/t}function Kt({shouldAutoRotate:t,maxDistance:a,focusedBody:s,baseCameraDistance:i}){const r=n.useRef(null),{camera:o,viewport:m}=ht(),v=n.useContext(He),p=n.useContext(Ne),h=n.useRef(new J(0,0,0)),c=n.useRef(!1),x=n.useRef(0),l=n.useRef(1),g=n.useRef(!1);return q((d,u)=>{if(!r.current)return;p&&(p.cameraDistance.current=o.position.length());const N=m.width/m.height,E=Ye(N),f=Math.abs(E-l.current);f>de.MULTIPLIER_DELTA_THRESHOLD&&(g.current=!0);const _=i*E,j=new J(0,_*B.INITIAL_Y_MULTIPLIER,_);if(l.current=it.lerp(l.current,E,de.RESPONSIVE_LERP),f<de.ADJUSTMENT_STOP_THRESHOLD&&(g.current=!1),s&&v){const y=v.positions.current.get(s.id);if(y){c.current=!0,x.current=Math.min(x.current+u*Z.PROGRESS_RAMP_UP,1);const S=s.diameter*Z.OFFSET_DISTANCE_MULTIPLIER,I=new J(y.x,y.y+S*Z.Y_OFFSET_MULTIPLIER,y.z+S),M=Z.BASE_LERP+x.current*(Z.FOLLOW_LERP-Z.BASE_LERP);o.position.lerp(I,M),r.current.target.lerp(y,M*Z.TARGET_LERP_MULTIPLIER),r.current.update()}}else c.current||x.current>0?(x.current=Math.max(x.current-u*se.PROGRESS_RAMP_DOWN,0),o.position.lerp(j,se.CAMERA_RETURN_LERP),r.current.target.lerp(h.current,se.TARGET_RETURN_LERP),r.current.update(),x.current<=0&&(c.current=!1)):g.current?(o.position.lerp(j,se.RESIZE_ADJUST_LERP),r.current.target.lerp(h.current,se.RESIZE_TARGET_LERP),r.current.update()):t&&(r.current.setAzimuthalAngle(r.current.getAzimuthalAngle()+u*$t.SPEED),r.current.update())}),e.jsx(gt,{ref:r,enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:B.MIN_DISTANCE,maxDistance:a,autoRotate:!1})}function Xt({star:t,planets:a,hoveredBody:s,focusedBody:i,onBodyHover:r,onBodyClick:o,onBackgroundClick:m,onReady:v}){const{quality:p}=Vt(),h=n.useRef(new Map),c=n.useRef(100),x=n.useMemo(()=>({positions:h,registerPosition:(f,_)=>{h.current.set(f,_.clone())}}),[]),l=n.useMemo(()=>({cameraDistance:c}),[]),g=n.useMemo(()=>ke(t,a),[t,a]),d=n.useMemo(()=>{const f=Math.max(...g.map(I=>I.orbitRadius),10),_=g.find(I=>I.type==="star"),y=((_==null?void 0:_.diameter)??3)*pe.STAR_SIZE_MULTIPLIER,S=f*pe.ORBITS_MULTIPLIER;return Math.max(y,S)},[g]),u=n.useMemo(()=>{const f=typeof window<"u"?window.innerWidth/window.innerHeight:B.ASPECT_RATIO,_=Ye(f);return d*_},[d]),N=n.useCallback((f,_)=>{r==null||r(f,_)},[r]),E=n.useCallback(f=>{o==null||o(f)},[o]);return e.jsx("div",{className:"starsystem-container",children:e.jsx(pt,{camera:{position:[0,u*B.INITIAL_Y_MULTIPLIER,u],fov:B.FOV},style:{background:qt.BACKGROUND_COLOR},onPointerMissed:()=>m==null?void 0:m(),children:e.jsx(Ne.Provider,{value:l,children:e.jsx(He.Provider,{value:x,children:e.jsxs(n.Suspense,{fallback:null,children:[e.jsx(Wt,{onReady:v}),e.jsx("ambientLight",{intensity:ne.AMBIENT_INTENSITY}),e.jsx("hemisphereLight",{args:[ne.HEMISPHERE_SKY_COLOR,ne.HEMISPHERE_GROUND_COLOR,ne.HEMISPHERE_INTENSITY]}),e.jsx(Zt,{count:k.COUNT}),e.jsx(Ut,{systemName:t.hostname,density:Pe.DENSITY,radius:Pe.RADIUS,quality:p}),g.map(f=>e.jsx(Ot,{body:f,isHovered:(s==null?void 0:s.id)===f.id,onHover:N,onClick:E,onPositionUpdate:x.registerPosition},f.id)),g.filter(f=>f.type==="planet").map(f=>e.jsx(Ae,{radius:f.orbitRadius,eccentricity:f.orbitEccentricity,isHighlighted:(s==null?void 0:s.id)===f.id},`orbit-${f.id}`)),g.filter(f=>f.type==="star"&&f.orbitRadius>0).map(f=>e.jsx(Ae,{radius:f.orbitRadius,eccentricity:f.orbitEccentricity,isHighlighted:(s==null?void 0:s.id)===f.id,isBinaryOrbit:!0},`orbit-${f.id}`)),e.jsx(Kt,{shouldAutoRotate:!s&&!i,maxDistance:d*pe.MAX_DISTANCE_MULTIPLIER,focusedBody:i,baseCameraDistance:d})]})})})})})}function Qt({bodies:t,hoveredBody:a,focusedBody:s,onBodyHover:i,onBodyClick:r,isBinarySystem:o=!1}){const{t:m}=$(),v=t.filter(l=>l.type==="star"),p=v.find(l=>l.isPrimaryStar||!l.isCompanionStar),h=v.filter(l=>l.isCompanionStar),c=t.filter(l=>l.type==="planet"),x=l=>{const g=["planet-item"];return(a==null?void 0:a.id)===l.id&&g.push("hovered"),(s==null?void 0:s.id)===l.id&&g.push("focused"),g.join(" ")};return e.jsxs("div",{className:"starsystem-planets-panel",children:[e.jsx("h2",{className:"planets-panel-title",children:m("pages.starSystem.info.planetaryBodies")}),e.jsxs("ul",{className:"planets-list",children:[p&&e.jsxs("li",{className:x(p),onMouseEnter:()=>i(p),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(p),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:p.color}}),e.jsx("span",{className:"planet-name",children:p.name}),e.jsx("span",{className:"planet-type",children:m(o?"pages.starSystem.info.primaryStar":"pages.starSystem.info.star")}),(s==null?void 0:s.id)===p.id&&e.jsx("span",{className:"focus-indicator",children:"â—"})]}),h.map(l=>e.jsxs("li",{className:x(l),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(l),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:l.color}}),e.jsx("span",{className:"planet-name",children:l.name}),e.jsx("span",{className:"planet-type",children:m("pages.starSystem.info.companionStar")}),(s==null?void 0:s.id)===l.id&&e.jsx("span",{className:"focus-indicator",children:"â—"})]},l.id)),c.map(l=>{var g;return e.jsxs("li",{className:x(l),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(l),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:l.color}}),e.jsx("span",{className:"planet-name",children:l.name}),e.jsx("span",{className:"planet-type",children:((g=l.planetData)==null?void 0:g.planet_type)||m("pages.starSystem.info.planet")}),(s==null?void 0:s.id)===l.id&&e.jsx("span",{className:"focus-indicator",children:"â—"})]},l.id)})]})]})}function he(t,a){let s,i;if(a===void 0)for(const r of t)r!=null&&(s===void 0?r>=r&&(s=i=r):(s>r&&(s=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=a(o,++r,t))!=null&&(s===void 0?o>=o&&(s=i=o):(s>o&&(s=o),i<o&&(i=o)))}return[s,i]}function Ce(t){return function(a){return a<0?-Math.pow(-a,t):Math.pow(a,t)}}function Jt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Bt(t){return t<0?-t*t:t*t}function es(t){var a=t(re,re),s=1;function i(){return s===1?t(re,re):s===.5?t(Jt,Bt):t(Ce(s),Ce(1/s))}return a.exponent=function(r){return arguments.length?(s=+r,i()):s},_t(a)}function Ve(){var t=es(yt());return t.copy=function(){return St(t,Ve()).exponent(t.exponent())},Nt.apply(t,arguments),t}function ts(){return Ve.apply(null,arguments).exponent(.5)}function ss({star:t,planets:a,isOpen:s,onClose:i}){var m,v,p,h,c;const{t:r}=$(),o=n.useMemo(()=>{const x=a.filter(f=>f.is_habitable_zone).length,l=a.filter(f=>f.is_earth_like).length,g=a.length>0?a.reduce((f,_)=>f+(_.habitability_score||0),0)/a.length:0,d=a.map(f=>f.disc_year).filter(f=>f!=null).sort((f,_)=>f-_),u=d[0],N=d[d.length-1],E=[...new Set(a.map(f=>f.discoverymethod))];return{habitableCount:x,earthLikeCount:l,avgHabitability:g,firstDiscovery:u,latestDiscovery:N,discoveryMethods:E}},[a]);return n.useEffect(()=>{const x=l=>{l.key==="Escape"&&i()};return s&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow=""}},[s,i]),s?e.jsx("div",{className:"system-overview-overlay",onClick:i,children:e.jsxs("div",{className:"system-overview-modal",onClick:x=>x.stopPropagation(),children:[e.jsx("button",{className:"system-overview-close",onClick:i,children:"âœ•"}),e.jsxs("div",{className:"system-overview-content",children:[e.jsxs("header",{className:"system-overview-header",children:[e.jsx("h1",{className:"system-overview-title",children:t.hostname}),e.jsxs("div",{className:"system-overview-badges",children:[t.st_spectype&&e.jsx("span",{className:"overview-badge spectral",children:t.st_spectype}),t.sy_snum>1&&e.jsxs("span",{className:"overview-badge binary",children:["â˜…â˜… ",r("pages.starSystem.info.binarySystem")]}),t.cb_flag&&e.jsx("span",{className:"overview-badge circumbinary",children:r("pages.starSystem.info.circumbinary")})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.starComparison")}),e.jsx(as,{star:t})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.systemStats")}),e.jsxs("div",{className:"overview-stats-grid",children:[e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:t.sy_pnum}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.info.planets")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:o.habitableCount}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.systemOverview.habitableCandidates")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:((m=t.distance_ly)==null?void 0:m.toFixed(1))||"â€”"}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.systemOverview.lightYears")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:t.st_age?`${t.st_age.toFixed(1)} Gyr`:"â€”"}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.info.age")})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.starFeatures.title")}),e.jsx(os,{star:t,planets:a})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.habitability.title")}),e.jsx(cs,{planets:a})]}),t.distance_ly&&t.distance_ly>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.travelTime.title")}),e.jsx(vt,{distanceLy:t.distance_ly,compact:!0})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.planetaryData")}),e.jsxs("div",{className:"overview-charts-grid",children:[e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.planetSizes")}),e.jsx(rs,{planets:a})]}),e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.orbitalDistances")}),e.jsx(is,{planets:a})]})]})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.orbitalView.title")}),e.jsxs("div",{className:"overview-charts-grid",children:[e.jsx(ps,{star:t,planets:a}),e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.tempSizeChart.title")}),e.jsx(hs,{planets:a})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.skyPosition")}),e.jsxs("div",{className:"overview-position-grid",children:[e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.rightAscension")}),e.jsx("span",{className:"position-value",children:t.rastr||`${(v=t.ra)==null?void 0:v.toFixed(4)}Â°`})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.declination")}),e.jsx("span",{className:"position-value",children:t.decstr||`${(p=t.dec)==null?void 0:p.toFixed(4)}Â°`})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.galacticLat")}),e.jsxs("span",{className:"position-value",children:[(h=t.glat)==null?void 0:h.toFixed(2),"Â°"]})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.galacticLon")}),e.jsxs("span",{className:"position-value",children:[(c=t.glon)==null?void 0:c.toFixed(2),"Â°"]})]})]})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.discoveryInfo")}),e.jsxs("div",{className:"overview-discovery-grid",children:[o.firstDiscovery&&e.jsxs("div",{className:"discovery-item",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.firstDiscovery")}),e.jsx("span",{className:"discovery-value",children:o.firstDiscovery})]}),o.latestDiscovery&&o.latestDiscovery!==o.firstDiscovery&&e.jsxs("div",{className:"discovery-item",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.latestDiscovery")}),e.jsx("span",{className:"discovery-value",children:o.latestDiscovery})]}),o.discoveryMethods.length>0&&e.jsxs("div",{className:"discovery-item full-width",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.methods")}),e.jsx("div",{className:"discovery-methods",children:o.discoveryMethods.map(x=>e.jsx("span",{className:"method-badge",children:x},x))})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.stellarProperties")}),e.jsxs("div",{className:"overview-properties-table",children:[t.st_teff&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starTemperature",category:"star",children:r("pages.starSystem.info.temperature")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starTemperature",category:"star",children:[t.st_teff.toFixed(0)," K"]})})]}),t.st_rad&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starRadius",category:"star",children:r("pages.starSystem.info.radius")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starRadius",category:"star",children:[t.st_rad.toFixed(2)," Râ˜‰"]})})]}),t.st_mass&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starMass",category:"star",children:r("pages.starSystem.info.mass")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starMass",category:"star",children:[t.st_mass.toFixed(2)," Mâ˜‰"]})})]}),t.st_lum&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starLuminosity",category:"star",children:r("pages.starSystem.systemOverview.luminosity")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starLuminosity",category:"star",children:[t.st_lum.toFixed(3)," Lâ˜‰"]})})]}),t.st_logg&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starSurfaceGravity",category:"star",children:r("pages.starSystem.systemOverview.surfaceGravity")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starSurfaceGravity",category:"star",children:[t.st_logg.toFixed(2)," log g"]})})]}),t.st_met&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starMetallicity",category:"star",children:r("pages.starSystem.systemOverview.metallicity")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starMetallicity",category:"star",children:[t.st_met.toFixed(2)," [Fe/H]"]})})]}),t.st_rotp&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:e.jsx(P,{propertyKey:"starRotationPeriod",category:"star",children:r("pages.starSystem.systemOverview.rotationPeriod")})}),e.jsx("span",{className:"property-value",children:e.jsxs(P,{propertyKey:"starRotationPeriod",category:"star",children:[t.st_rotp.toFixed(1)," days"]})})]})]})]})]})]})}):null}function as({star:t}){const{t:a}=$(),s=5778,i=t.st_rad||1,r=t.st_teff||5778,o=100,m=i>=1?o/i:o,v=i>=1?o:o*i,p=h=>h>3e4?"#9bb0ff":h>1e4?"#aabfff":h>7500?"#cad7ff":h>6e3?"#f8f7ff":h>5200?"#fff4e8":h>3700?"#ffd2a1":h>2400?"#ffb56c":"#ff6b35";return e.jsxs("div",{className:"star-comparison-container",children:[e.jsxs("div",{className:"star-comparison-visual",children:[e.jsxs("div",{className:"comparison-body",children:[e.jsx("div",{className:"comparison-sphere sun",style:{width:m,height:m,background:`radial-gradient(circle at 30% 30%, #fff4e8, ${p(s)})`}}),e.jsx("span",{className:"comparison-label",children:a("pages.starSystem.systemOverview.sun")}),e.jsx("span",{className:"comparison-stats",children:a("pages.starSystem.systemOverview.sunStats")})]}),e.jsx("div",{className:"comparison-vs",children:"vs"}),e.jsxs("div",{className:"comparison-body",children:[e.jsx("div",{className:"comparison-sphere star",style:{width:v,height:v,background:`radial-gradient(circle at 30% 30%, #fff, ${p(r)})`}}),e.jsx("span",{className:"comparison-label",children:t.hostname}),e.jsxs("span",{className:"comparison-stats",children:[i.toFixed(2)," Râ˜‰ â€¢ ",r.toFixed(0)," K"]})]})]}),e.jsx("div",{className:"comparison-summary",children:i>1?e.jsx("p",{children:a("pages.starSystem.systemOverview.largerThanSun",{times:i.toFixed(1)})}):i<1?e.jsx("p",{children:a("pages.starSystem.systemOverview.smallerThanSun",{pct:((1-i)*100).toFixed(0)})}):e.jsx("p",{children:a("pages.starSystem.systemOverview.similarToSun")})})]})}function rs({planets:t}){const a=n.useRef(null),s=n.useRef(null),{width:i}=le(s);n.useEffect(()=>{if(!a.current||!s.current||i===0)return;const o=200,m={top:20,right:20,bottom:60,left:50},v=i-m.left-m.right,p=o-m.top-m.bottom,h=oe(a.current);h.selectAll("*").remove(),h.attr("width",i).attr("height",o);const c=h.append("g").attr("transform",`translate(${m.left},${m.top})`),x=t.filter(u=>u.pl_rade).map(u=>({name:u.pl_name.replace(r.hostname,"").trim()||u.pl_name,radius:u.pl_rade})).sort((u,N)=>N.radius-u.radius).slice(0,10);if(x.length===0)return;const l=jt().domain(x.map(u=>u.name)).range([0,v]).padding(.3),g=ze().domain([0,Et(x,u=>u.radius)||1]).nice().range([p,0]);c.selectAll(".bar").data(x).join("rect").attr("x",u=>l(u.name)||0).attr("y",u=>g(u.radius)).attr("width",l.bandwidth()).attr("height",u=>p-g(u.radius)).attr("fill","#00ccff").attr("rx",3);const d=c.append("g").attr("transform",`translate(0,${p})`).call(Se(l));d.selectAll("text").attr("fill","#888").attr("font-size","10px").attr("text-anchor","end"),i<400?d.selectAll("text").attr("transform","rotate(-65)"):d.selectAll("text").attr("transform","rotate(-45)"),c.selectAll(".domain, .tick line").attr("stroke","#444"),c.append("g").call(Ge(g).ticks(5)).selectAll("text").attr("fill","#888").attr("font-size","10px"),c.append("text").attr("transform","rotate(-90)").attr("y",-35).attr("x",-p/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text("Radius (RâŠ•)"),c.append("line").attr("x1",0).attr("x2",v).attr("y1",g(1)).attr("y2",g(1)).attr("stroke","#00ff88").attr("stroke-dasharray","4,4").attr("opacity",.6),c.append("text").attr("x",v-5).attr("y",g(1)-5).attr("text-anchor","end").attr("fill","#00ff88").attr("font-size","10px").text("Earth")},[t,i]);const r=t[0];return e.jsx("div",{ref:s,className:"chart-container",children:e.jsx("svg",{ref:a})})}function is({planets:t}){const a=n.useRef(null),s=n.useRef(null),{width:i}=le(s);return n.useEffect(()=>{if(!a.current||!s.current||i===0)return;const r=i<500,o=200,m={top:30,right:20,bottom:40,left:50},v=i-m.left-m.right,p=o-m.top-m.bottom,h=oe(a.current);h.selectAll("*").remove(),h.attr("width",i).attr("height",o);const c=h.append("g").attr("transform",`translate(${m.left},${m.top})`),x=t.filter(d=>d.pl_orbsmax).map(d=>({name:d.pl_name,distance:d.pl_orbsmax,habitable:d.is_habitable_zone||!1})).sort((d,u)=>d.distance-u.distance);if(x.length===0)return;const l=Math.max(...x.map(d=>d.distance),1),g=xe().domain([Math.min(...x.map(d=>d.distance),.01),l*1.2]).range([0,v]);c.append("rect").attr("x",g(.95)).attr("y",0).attr("width",Math.max(0,g(1.67)-g(.95))).attr("height",p).attr("fill","rgba(0, 255, 136, 0.1)"),c.append("line").attr("x1",0).attr("x2",v).attr("y1",p/2).attr("y2",p/2).attr("stroke","#333"),c.selectAll(".planet-dot").data(x).join("circle").attr("cx",d=>g(d.distance)).attr("cy",p/2).attr("r",r?6:8).attr("fill",d=>d.habitable?"#00ff88":"#00ccff").attr("stroke","#fff").attr("stroke-width",1),c.selectAll(".planet-label").data(x).join("text").attr("x",d=>g(d.distance)).attr("y",p/2-15).attr("text-anchor","middle").attr("fill","#888").attr("font-size","9px").text(d=>d.name.split(" ").pop()||d.name),c.append("g").attr("transform",`translate(0,${p})`).call(Se(g).tickValues([.01,.1,1,10,100]).tickFormat(ge(".2"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),c.selectAll(".domain, .tick line").attr("stroke","#444"),c.append("text").attr("x",v/2).attr("y",p+35).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text("Semi-major Axis (AU)"),c.append("text").attr("x",v).attr("y",-10).attr("text-anchor","end").attr("fill","rgba(0, 255, 136, 0.6)").attr("font-size","10px").text("Habitable Zone")},[t,i]),e.jsx("div",{ref:s,className:"chart-container",children:e.jsx("svg",{ref:a})})}const ns=[{key:"solarAnalog",icon:"â˜€ï¸",className:"solar"},{key:"sunLike",icon:"â­",className:"solar"},{key:"redDwarf",icon:"ðŸ”´",className:"red-dwarf"},{key:"youngSystem",icon:"ðŸŒ±",className:"age"},{key:"matureSystem",icon:"ðŸŒ³",className:"age"},{key:"ancientSystem",icon:"ðŸ›ï¸",className:"age"},{key:"metalRich",icon:"âš™ï¸",className:"metallicity"},{key:"metalPoor",icon:"ðŸ’¨",className:"metallicity"},{key:"binarySystem",icon:"â˜…â˜…",className:"binary"},{key:"circumbinary",icon:"ðŸŒ€",className:"binary"}];function ls(t,a){const s=[],i=a[0];return i&&(i.is_solar_analog?s.push("solarAnalog"):i.is_sun_like_star&&s.push("sunLike"),i.is_red_dwarf_host&&s.push("redDwarf"),i.is_young_system?s.push("youngSystem"):i.is_ancient_system?s.push("ancientSystem"):i.is_mature_system&&s.push("matureSystem"),i.is_metal_rich_star?s.push("metalRich"):i.is_metal_poor_star&&s.push("metalPoor"),t.sy_snum>1&&s.push("binarySystem"),t.cb_flag&&s.push("circumbinary")),s}function os({star:t,planets:a}){const{t:s}=$(),i=n.useMemo(()=>ls(t,a),[t,a]);return i.length===0?e.jsx("div",{className:"star-features-empty",children:s("pages.starSystem.systemOverview.starFeatures.title")}):e.jsx("div",{className:"star-features-grid",children:i.map(r=>{const o=ns.find(m=>m.key===r);return o?e.jsxs("div",{className:`star-feature-card ${o.className}`,children:[e.jsxs("div",{className:"star-feature-header",children:[e.jsx("span",{className:"star-feature-icon",children:o.icon}),e.jsx("span",{className:"star-feature-name",children:s(`pages.starSystem.systemOverview.starFeatures.${r}`)})]}),e.jsx("p",{className:"star-feature-description",children:s(`pages.starSystem.systemOverview.starFeatures.${r}Desc`)})]},r):null})})}function cs({planets:t}){const{t:a}=$(),s=n.useMemo(()=>{if(t.length===0)return null;const m=Rt(t),v=Tt(t);return{stats:m,breakdown:v}},[t]);if(!s||t.length===0)return e.jsx("div",{className:"habitability-no-data",children:a("pages.starSystem.systemOverview.habitability.noData")});const{stats:i,breakdown:r}=s,o=r.filter(m=>m.count>0);return e.jsxs("div",{className:"habitability-overview-container",children:[e.jsxs("div",{className:"habitability-score-display",children:[e.jsxs("div",{className:"habitability-avg-score",children:[e.jsx("span",{className:"habitability-score-value",children:i.avgScore.toFixed(0)}),e.jsx("span",{className:"habitability-score-label",children:a("pages.starSystem.systemOverview.habitability.avgScore")})]}),i.topScorerName&&e.jsxs("div",{className:"habitability-best-candidate",children:[e.jsx("span",{className:"habitability-candidate-name",children:i.topScorerName.split(" ").pop()}),e.jsxs("span",{className:"habitability-candidate-score",children:[a("pages.starSystem.systemOverview.habitability.score"),": ",i.topScore.toFixed(0)]})]})]}),o.length>0&&e.jsxs("div",{className:"habitability-breakdown-container",children:[e.jsx("span",{className:"habitability-breakdown-title",children:a("pages.starSystem.systemOverview.habitability.breakdown")}),e.jsx("div",{className:"habitability-breakdown-bars",children:o.map(m=>{const v=Math.max(...o.map(c=>c.pct)),p=v>0?m.pct/v*100:0,h=m.category.toLowerCase().replace(/[\s-]/g,"-");return e.jsxs("div",{className:"habitability-bar-row",children:[e.jsx("span",{className:"habitability-bar-label",children:m.category}),e.jsx("div",{className:"habitability-bar-track",children:e.jsx("div",{className:`habitability-bar-fill ${h}`,style:{width:`${p}%`,backgroundColor:m.color}})}),e.jsx("span",{className:"habitability-bar-count",children:m.count})]},m.category)})})]}),e.jsxs("div",{className:"habitability-quick-stats",children:[e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.habitableZone}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.systemOverview.habitability.habitableZone")})]}),e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.earthLike}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.systemOverview.habitability.earthLike")})]}),e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.total}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.info.planets")})]})]})]})}const us=.95,ms=1.67;function ds(t){const a=t?Math.pow(10,t):1,s=Math.sqrt(Math.max(a,.001));return{inner:us*s,outer:ms*s}}function ps({star:t,planets:a}){const{t:s}=$(),i=n.useRef(null),r=n.useRef(null),{width:o}=le(r);return n.useEffect(()=>{if(!i.current||!r.current||o===0)return;const m=o<500,v=Math.min(o,400),p=40,h=(v-p*2)/2,c=v/2,x=v/2,l=oe(i.current);l.selectAll("*").remove(),l.attr("width",v).attr("height",v);const g=a.filter(y=>y.pl_orbsmax&&y.pl_orbsmax>0).map(y=>({name:y.pl_name.split(" ").pop()||y.pl_name,semiMajorAxis:y.pl_orbsmax,eccentricity:y.pl_orbeccen||0,habitable:y.is_habitable_zone||!1})).sort((y,S)=>y.semiMajorAxis-S.semiMajorAxis);if(g.length===0)return;const d=Math.max(...g.map(y=>y.semiMajorAxis)),u=ds(t.st_lum),N=Math.max(d*1.2,u.outer*1.1),E=h/N;l.append("circle").attr("cx",c).attr("cy",x).attr("r",h+p/2).attr("fill","rgba(0, 0, 0, 0.3)");const f=u.inner*E,_=u.outer*E;_>0&&_<=h&&(l.append("circle").attr("cx",c).attr("cy",x).attr("r",_).attr("fill","rgba(0, 255, 136, 0.1)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1),f>0&&l.append("circle").attr("cx",c).attr("cy",x).attr("r",f).attr("fill","rgba(0, 0, 0, 0.3)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","4,4")),[.1,.5,1,2,5,10,20,50].filter(y=>y*E<h&&y<N).forEach(y=>{l.append("circle").attr("cx",c).attr("cy",x).attr("r",y*E).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.1)").attr("stroke-width",.5),l.append("text").attr("x",c+y*E+3).attr("y",x-3).attr("fill","rgba(255, 255, 255, 0.3)").attr("font-size","8px").text(`${y} AU`)}),l.append("circle").attr("cx",c).attr("cy",x).attr("r",8).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 10px rgba(255, 200, 0, 0.5))"),g.forEach((y,S)=>{const I=y.semiMajorAxis*E,M=S/g.length*Math.PI*2-Math.PI/2,G=c+Math.cos(M)*I,D=x+Math.sin(M)*I;l.append("circle").attr("cx",c).attr("cy",x).attr("r",I).attr("fill","none").attr("stroke",y.habitable?"rgba(0, 255, 136, 0.4)":"rgba(0, 204, 255, 0.3)").attr("stroke-width",1),l.append("circle").attr("cx",G).attr("cy",D).attr("r",m?4:6).attr("fill",y.habitable?"#00ff88":"#00ccff").attr("stroke","#fff").attr("stroke-width",1),l.append("text").attr("x",G).attr("y",D-10).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","9px").text(y.name)})},[t,a,o,s]),e.jsxs("div",{className:"orbital-topdown-container",children:[e.jsx("div",{ref:r,className:"orbital-topdown-chart",children:e.jsx("svg",{ref:i})}),e.jsxs("div",{className:"orbital-legend",children:[e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot hz"}),e.jsx("span",{children:s("pages.starSystem.systemOverview.orbitalView.habitableZone")})]}),e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot planet"}),e.jsx("span",{children:s("pages.starSystem.info.planet")})]}),e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot habitable"}),e.jsx("span",{children:s("pages.starSystem.systemOverview.habitability.habitableZone")})]})]})]})}const fe=320,ve=200;function hs({planets:t}){const{t:a}=$(),s=n.useRef(null),i=n.useRef(null),{width:r}=le(i);return n.useEffect(()=>{if(!s.current||!i.current||r===0)return;const o=r<500,m=280,v={top:30,right:30,bottom:50,left:60},p=r-v.left-v.right,h=m-v.top-v.bottom,c=oe(s.current);c.selectAll("*").remove(),c.attr("width",r).attr("height",m);const x=t.filter(S=>S.pl_eqt&&S.pl_eqt>0&&S.pl_rade&&S.pl_rade>0).map(S=>({name:S.pl_name.split(" ").pop()||S.pl_name,temp:S.pl_eqt,radius:S.pl_rade,mass:S.pl_bmasse||1,score:S.habitability_score,habitable:S.is_habitable_zone||!1}));if(x.length===0)return;const l=c.append("g").attr("transform",`translate(${v.left},${v.top})`),g=he(x,S=>S.temp),d=he(x,S=>S.radius),u=xe().domain([Math.min(g[0]*.8,100),Math.max(g[1]*1.2,3e3)]).range([0,p]),N=xe().domain([Math.min(d[0]*.8,.3),Math.max(d[1]*1.2,20)]).range([h,0]);l.append("rect").attr("x",u(fe)).attr("y",0).attr("width",p-u(fe)).attr("height",h).attr("fill","rgba(255, 100, 100, 0.1)"),l.append("rect").attr("x",u(ve)).attr("y",0).attr("width",u(fe)-u(ve)).attr("height",h).attr("fill","rgba(0, 255, 136, 0.1)"),l.append("rect").attr("x",0).attr("y",0).attr("width",u(ve)).attr("height",h).attr("fill","rgba(100, 150, 255, 0.1)");const E=ze().domain([0,50,100]).range(["#ff4444","#ffaa00","#00ff88"]),f=he(x,S=>S.mass),_=ts().domain([Math.min(f[0],.1),Math.max(f[1],100)]).range(o?[3,10]:[4,15]);l.selectAll(".planet-bubble").data(x).join("circle").attr("cx",S=>u(S.temp)).attr("cy",S=>N(S.radius)).attr("r",S=>_(S.mass)).attr("fill",S=>E(S.score)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.8),x.length<=8&&l.selectAll(".planet-label").data(x).join("text").attr("x",S=>u(S.temp)).attr("y",S=>N(S.radius)-_(S.mass)-4).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","9px").text(S=>S.name);const j=255,y=1;u(j)>0&&u(j)<p&&N(y)>0&&N(y)<h&&(l.append("circle").attr("cx",u(j)).attr("cy",N(y)).attr("r",4).attr("fill","none").attr("stroke","#fff").attr("stroke-width",2).attr("stroke-dasharray","2,2"),l.append("text").attr("x",u(j)+8).attr("y",N(y)+3).attr("fill","rgba(255, 255, 255, 0.5)").attr("font-size","9px").text("ðŸŒ")),l.append("g").attr("transform",`translate(0,${h})`).call(Se(u).tickValues([100,200,300,500,1e3,2e3]).tickFormat(ge("d"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),l.selectAll(".domain, .tick line").attr("stroke","#444"),l.append("text").attr("x",p/2).attr("y",h+40).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text(a("pages.starSystem.systemOverview.tempSizeChart.xAxis")),l.append("g").call(Ge(N).tickValues([.5,1,2,5,10,20]).tickFormat(ge(".1f"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),l.append("text").attr("transform","rotate(-90)").attr("y",-45).attr("x",-h/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text(a("pages.starSystem.systemOverview.tempSizeChart.yAxis"))},[t,a,r]),e.jsxs("div",{className:"temp-size-container",children:[e.jsx("div",{ref:i,className:"temp-size-chart",children:e.jsx("svg",{ref:s})}),e.jsxs("div",{className:"temp-size-legend",children:[e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator hot"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.tooHot")})]}),e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator habitable"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.habitable")})]}),e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator cold"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.tooCold")})]}),e.jsxs("div",{className:"temp-size-legend-item temp-size-earth-marker",children:[e.jsx("div",{className:"temp-size-earth-dot"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.earth")})]})]})]})}function Ns(){const{t}=$(),{starId:a}=nt(),s=lt(),{getStarBySlug:i,getPlanetsByHost:r,isLoading:o}=ot(),[m,v]=n.useState(!1),[p,h]=n.useState(!1),[c,x]=n.useState(null),[l,g]=n.useState(null),[d,u]=n.useState(!1),[N,E]=n.useState(null),[f,_]=n.useState(!1),j=a?i(a):void 0,y=j?r(j.hostname):[],S=n.useMemo(()=>j?ke(j,y):[],[j,y]);n.useEffect(()=>{const T=window.matchMedia("(min-width: 769px)");u(T.matches);const F=U=>{u(U.matches)};return T.addEventListener("change",F),()=>T.removeEventListener("change",F)},[]);const I=n.useCallback((T,F)=>{x(T),g(F??null)},[]),M=n.useCallback(T=>{(N==null?void 0:N.id)===T.id?T.type==="planet"?s(`/planets/${ct(T.id)}`):T.type==="star"&&v(!0):E(T)},[N,s]),G=n.useCallback(()=>{E(null)},[]),D=n.useCallback(()=>{_(!0)},[]),H=j?j.sy_snum>1:!1;if(o)return e.jsx(ut,{message:t("pages.star.loading")});if(!j)return e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{className:"error-title",children:t("pages.star.notFound.title")}),e.jsx("p",{className:"error-message",children:t("pages.star.notFound.message",{starId:a||""})}),e.jsx(Te,{to:"/",className:"starsystem-back-link",children:t("pages.star.notFound.returnToStarfield")})]})});const W=j?mt(j):null;return e.jsxs(e.Fragment,{children:[W&&e.jsx(dt,{...W}),e.jsx("div",{className:"starsystem-page",children:e.jsxs("section",{className:"starsystem-hero-section",children:[e.jsxs("div",{className:"starsystem-hero-header",children:[e.jsx("h1",{className:"starsystem-title",children:j.hostname}),e.jsxs("p",{className:"starsystem-subtitle",children:[j.st_spectype||j.star_class||t("pages.starSystem.info.unknown"),j.distance_ly&&` â€¢ ${j.distance_ly.toFixed(2)} ly`,y.length>0&&` â€¢ ${y.length} ${y.length===1?t("pages.starSystem.info.planet"):t("pages.starSystem.info.planets")}`]}),e.jsx("button",{className:"system-overview-btn",onClick:()=>v(!0),children:t("pages.starSystem.systemOverview.button")})]}),e.jsx("div",{className:"starsystem-procedural-notice",children:e.jsx(P,{propertyKey:"proceduralVisuals",category:"visualization",showIcon:!0,children:t("pages.starSystem.proceduralNotice")})}),e.jsx(Te,{to:"/",className:"starsystem-back-button",children:t("pages.star.backToStarfield")}),e.jsx(Xt,{star:j,planets:y,hoveredBody:c,focusedBody:N,onBodyHover:I,onBodyClick:M,onBackgroundClick:G,onReady:D}),!f&&e.jsx("div",{className:"starsystem-loading-overlay",children:e.jsx("p",{className:"starsystem-loading-text",children:t("pages.star.loadingScene")})}),(d||p)&&e.jsx(Qt,{bodies:S,hoveredBody:c,focusedBody:N,onBodyHover:T=>I(T),onBodyClick:M,isBinarySystem:H}),!d&&e.jsx("button",{className:"bodies-toggle-btn",onClick:()=>h(!p),title:t(p?"pages.starSystem.hideBodies":"pages.starSystem.showBodies"),children:p?"âœ•":"â˜°"}),c&&c.type==="planet"&&l&&c.planetData&&e.jsxs("div",{className:"starsystem-cursor-tooltip",style:{left:l.x+20,top:l.y-10},children:[e.jsxs("div",{className:"cursor-tooltip-header",children:[e.jsx("div",{className:"cursor-tooltip-name",children:c.planetData.pl_name}),e.jsx("div",{className:"cursor-tooltip-type",children:c.planetData.planet_type})]}),e.jsxs("div",{className:"cursor-tooltip-details",children:[c.planetData.pl_rade&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Radius"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[c.planetData.pl_rade.toFixed(2)," RâŠ•"]})]}),c.planetData.pl_bmasse&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Mass"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[c.planetData.pl_bmasse.toFixed(2)," MâŠ•"]})]}),c.planetData.pl_orbper&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Orbital Period"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[c.planetData.pl_orbper.toFixed(2)," days"]})]}),c.planetData.pl_orbsmax&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Semi-major Axis"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[c.planetData.pl_orbsmax.toFixed(3)," AU"]})]}),c.planetData.pl_eqt&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Eq. Temperature"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[c.planetData.pl_eqt.toFixed(0)," K"]})]}),c.planetData.disc_year&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Discovered"}),e.jsx("span",{className:"cursor-tooltip-value",children:c.planetData.disc_year})]}),c.planetData.discoverymethod&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Method"}),e.jsx("span",{className:"cursor-tooltip-value",children:c.planetData.discoverymethod})]})]}),e.jsx("div",{className:"cursor-tooltip-hint",children:"Click to view details"})]}),e.jsx(ss,{star:j,planets:y,isOpen:m,onClose:()=>v(!1)})]})})]})}export{Ns as default};
