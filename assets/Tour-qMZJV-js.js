const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TourHeroBackground-Bv5eNEbP.js","assets/index-agfWtMau.js","assets/index-D7vM14bD.css","assets/react-three-fiber.esm-5J2Felbe.js"])))=>i.map(i=>d[i]);
import{r as m,j as s,u as j,d as v,L as N,aF as S}from"./index-agfWtMau.js";import{P as h}from"./PlanetCard-D-Oq5uhs.js";import{S as P}from"./StarCard-MWr3FrtX.js";import{S as T,i as D}from"./seo-CvLMoO3_.js";function b(e={}){const{threshold:r=.1,rootMargin:t="0px",triggerOnce:i=!0}=e,a=m.useRef(null),[n,c]=m.useState(!1);return m.useEffect(()=>{const l=a.current;if(!l)return;const p=new IntersectionObserver(([u])=>{u.isIntersecting?(c(!0),i&&p.unobserve(l)):i||c(!1)},{threshold:r,rootMargin:t});return p.observe(l),()=>p.disconnect()},[r,t,i]),{ref:a,isVisible:n}}function g({id:e,chapter:r,title:t,intro:i,children:a}){const{ref:n,isVisible:c}=b({threshold:.2}),{ref:l,isVisible:p}=b({threshold:.1});return s.jsxs("section",{id:e,className:"tour-section",children:[s.jsxs("div",{ref:n,className:`tour-section-header tour-animate ${c?"visible":""}`,children:[s.jsx("span",{className:"tour-chapter-number",children:r}),s.jsx("h2",{className:"tour-section-title",children:t}),s.jsx("p",{className:"tour-section-intro",children:i})]}),s.jsx("div",{ref:l,className:`tour-showcase ${p?"visible":""}`,children:a})]})}function E({sections:e}){const{t:r}=j(),[t,i]=m.useState("");m.useEffect(()=>{const n=new IntersectionObserver(c=>{c.forEach(l=>{l.isIntersecting&&i(l.target.id)})},{rootMargin:"-45% 0px -45% 0px",threshold:0});return e.forEach(({id:c})=>{const l=document.getElementById(c);l&&n.observe(l)}),()=>n.disconnect()},[e]);const a=n=>{const c=document.getElementById(n);c&&c.scrollIntoView({behavior:"smooth"})};return s.jsx("nav",{className:"tour-navigation","aria-label":r("components.tour.navigation.ariaLabel"),children:e.map(({id:n,label:c})=>s.jsx("button",{className:`tour-nav-dot ${t===n?"active":""}`,onClick:()=>a(n),title:c,"aria-label":r("components.tour.navigation.jumpTo",{section:c})},n))})}const I=["Proxima Cen b","TRAPPIST-1 e","Kepler-452 b","51 Peg b","Kepler-16 b","Kepler-186 f"],K={"Proxima Cen b":"proximaCenB","TRAPPIST-1 e":"trappist1e","Kepler-452 b":"kepler452b","51 Peg b":"fiftyOnePegB","Kepler-16 b":"kepler16b","Kepler-186 f":"kepler186f"};function C(e,r){const t=new Map(e.map(a=>[a.pl_name,a])),i=[];return I.forEach(a=>{const n=t.get(a),c=K[a];n&&c&&i.push({...n,tourCategory:"famous",tourDescription:r(`pages.tour.descriptions.famous.${c}`)})}),i}const F=["Proxima Cen","Barnard's star","Wolf 1069","TRAPPIST-1","51 Peg","iot Dra","Kepler-186","KOI-351","Kepler-16"],A={"Proxima Cen":"proximaCen","Barnard's star":"barnardsStar","Wolf 1069":"wolf1069","TRAPPIST-1":"trappist1","51 Peg":"fiftyOnePeg","iot Dra":"iotDra","Kepler-186":"kepler186","KOI-351":"kepler90","Kepler-16":"kepler16"};function k(e,r){const t=new Map(e.map(a=>[a.hostname,a])),i=[];return F.forEach(a=>{const n=t.get(a),c=A[a];if(n&&c){const l={...n};l.hostname==="KOI-351"&&(l.hostname="Kepler-90"),i.push({...l,tourCategory:"famousStar",tourDescription:r(`pages.tour.descriptions.stars.${c}`)})}}),i}function O(e,r){var a;const t=((a=e.distance_ly)==null?void 0:a.toFixed(1))??"unknown",i=e.planet_type??r("pages.tour.descriptions.common.world");return e.is_habitable_zone?r("pages.tour.descriptions.nearby.habitableZone",{distance:t,type:i}):e.sy_pnum>1?r("pages.tour.descriptions.nearby.multiPlanet",{distance:t,count:e.sy_pnum}):r("pages.tour.descriptions.nearby.default",{distance:t,type:i})}function R(e,r){return e.filter(t=>t.distance_ly!==null&&t.distance_ly>0&&t.distance_ly<50).sort((t,i)=>(t.distance_ly??1/0)-(i.distance_ly??1/0)).slice(0,6).map(t=>({...t,tourCategory:"nearby",tourDescription:O(t,r)}))}function V(e,r){const t=e.habitability_score.toFixed(0),i=[];return e.is_earth_like?i.push(r("pages.tour.descriptions.habitable.traits.earthSized")):e.planet_type&&i.push(e.planet_type),e.is_habitable_zone&&i.push(r("pages.tour.descriptions.habitable.traits.habitableZone")),e.is_sun_like_star?i.push(r("pages.tour.descriptions.habitable.traits.sunLikeStar")):e.is_red_dwarf_host&&i.push(r("pages.tour.descriptions.habitable.traits.redDwarf")),(i.length>0?r("pages.tour.descriptions.habitable.intro",{traits:i.join(", ")}):"")+r("pages.tour.descriptions.habitable.score",{score:t})}function $(e,r){return e.filter(t=>t.is_top_habitable_candidate||t.habitability_score>60).sort((t,i)=>i.habitability_score-t.habitability_score).slice(0,6).map(t=>({...t,tourCategory:"habitable",tourDescription:V(t,r)}))}function w(e,r,t){var i,a,n,c;switch(e){case"ultra_hot":{const l=((i=r.pl_eqt)==null?void 0:i.toFixed(0))??"2000+";return t("pages.tour.descriptions.extreme.ultraHot",{temp:l})}case"puffy":{const l=((a=r.pl_dens)==null?void 0:a.toFixed(2))??t("pages.tour.descriptions.common.veryLow");return t("pages.tour.descriptions.extreme.puffy",{density:l})}case"circumbinary":return t("pages.tour.descriptions.extreme.circumbinary");case"ultra_dense":{const l=((n=r.pl_dens)==null?void 0:n.toFixed(1))??"8+";return t("pages.tour.descriptions.extreme.ultraDense",{density:l})}case"eccentric":{const l=((c=r.pl_orbeccen)==null?void 0:c.toFixed(2))??"0.3+";return t("pages.tour.descriptions.extreme.eccentric",{ecc:l})}default:return""}}function M(e,r){const t=[{flag:"is_ultra_hot",type:"ultra_hot",labelKey:"pages.tour.descriptions.extreme.labels.ultraHot"},{flag:"is_puffy",type:"puffy",labelKey:"pages.tour.descriptions.extreme.labels.puffy"},{flag:"is_circumbinary",type:"circumbinary",labelKey:"pages.tour.descriptions.extreme.labels.circumbinary"},{flag:"is_ultra_dense",type:"ultra_dense",labelKey:"pages.tour.descriptions.extreme.labels.ultraDense"},{flag:"is_eccentric_orbit",type:"eccentric",labelKey:"pages.tour.descriptions.extreme.labels.eccentric"}],i=[];return t.forEach(({flag:a,type:n,labelKey:c})=>{if(i.length>=6)return;e.filter(p=>p[a]===!0).slice(0,i.length<4?2:1).forEach(p=>{i.length<6&&i.push({...p,extremeType:n,extremeLabel:r(c),tourCategory:"extreme",tourDescription:w(n,p,r)})})}),i}function q(e,r){var u,f,x,_,y;const t=[],i=e.filter(o=>o.pl_eqt!==null&&o.pl_eqt>0).sort((o,d)=>(d.pl_eqt??0)-(o.pl_eqt??0))[0];if(i){const o=(u=i.pl_eqt)==null?void 0:u.toFixed(0);t.push({...i,record:r("pages.tour.descriptions.records.labels.hottest"),recordValue:`${o}K`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.hottest",{temp:o})})}const a=e.filter(o=>o.pl_eqt!==null&&o.pl_eqt>0).sort((o,d)=>(o.pl_eqt??1/0)-(d.pl_eqt??1/0))[0];if(a){const o=(f=a.pl_eqt)==null?void 0:f.toFixed(0),d=((a.pl_eqt??0)-273).toFixed(0);t.push({...a,record:r("pages.tour.descriptions.records.labels.coldest"),recordValue:`${o}K`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.coldest",{temp:o,tempC:d})})}const n=e.filter(o=>o.pl_orbper!==null&&o.pl_orbper>0).sort((o,d)=>(o.pl_orbper??1/0)-(d.pl_orbper??1/0))[0];if(n){const o=n.pl_orbper,d=o<1?r("pages.tour.descriptions.common.hours",{value:(o*24).toFixed(1)}):r("pages.tour.descriptions.common.days",{value:o.toFixed(2)});t.push({...n,record:r("pages.tour.descriptions.records.labels.fastest"),recordValue:d,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.fastest",{period:d})})}const c=e.filter(o=>o.pl_radj!==null&&o.pl_radj>0).sort((o,d)=>(d.pl_radj??0)-(o.pl_radj??0))[0];if(c){const o=(x=c.pl_radj)==null?void 0:x.toFixed(1);t.push({...c,record:r("pages.tour.descriptions.records.labels.largest"),recordValue:`${o} R♃`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.largest",{radius:o})})}const l=e.filter(o=>o.pl_rade!==null&&o.pl_rade>0).sort((o,d)=>(o.pl_rade??1/0)-(d.pl_rade??1/0))[0];if(l){const o=(_=l.pl_rade)==null?void 0:_.toFixed(2);t.push({...l,record:r("pages.tour.descriptions.records.labels.smallest"),recordValue:`${o} R⊕`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.smallest",{radius:o})})}const p=e.filter(o=>o.st_age!==null&&o.st_age>0).sort((o,d)=>(d.st_age??0)-(o.st_age??0))[0];if(p){const o=(y=p.st_age)==null?void 0:y.toFixed(1);t.push({...p,record:r("pages.tour.descriptions.records.labels.oldest"),recordValue:`${o} Gyr`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.oldest",{age:o})})}return t.slice(0,6)}function L(e,r,t){return{famous:C(e,t),famousStars:k(r,t),nearest:R(e,t),habitable:$(e,t),extreme:M(e,t),records:q(e,t)}}const B=m.lazy(()=>S(()=>import("./TourHeroBackground-Bv5eNEbP.js"),__vite__mapDeps([0,1,2,3])));function Y(){const{t:e}=j(),r=[{id:"stars",label:e("pages.tour.sections.stars.title")},{id:"famous",label:e("pages.tour.sections.famous.title")},{id:"nearest",label:e("pages.tour.sections.nearest.title")},{id:"habitable",label:e("pages.tour.sections.habitable.title")},{id:"extreme",label:e("pages.tour.sections.extreme.title")},{id:"records",label:e("pages.tour.sections.records.title")}],{getAllPlanets:t,getAllStars:i,isLoading:a}=v(),n=m.useMemo(()=>{if(a)return null;const u=t(),f=i();return L(u,f,e)},[a,t,i,e]),{ref:c,isVisible:l}=b({threshold:.3});if(a||!n)return s.jsx("div",{className:"tour-page",children:s.jsx("div",{className:"tour-hero",children:s.jsx("div",{className:"spinner"})})});const p=D();return s.jsxs(s.Fragment,{children:[s.jsx(T,{...p}),s.jsxs("div",{className:"tour-page",children:[s.jsxs("header",{ref:c,className:`tour-hero ${l?"visible":""}`,children:[s.jsx(m.Suspense,{fallback:null,children:s.jsx(B,{})}),s.jsxs("div",{className:"tour-hero-content",children:[s.jsx("h1",{className:"tour-hero-title",children:e("pages.tour.title")}),s.jsx("p",{className:"tour-hero-subtitle",children:e("pages.tour.subtitle")})]}),s.jsxs("div",{className:"tour-hero-scroll",children:[s.jsx("span",{className:"tour-hero-scroll-hint",children:e("pages.tour.scrollHint")}),s.jsx("div",{className:"tour-hero-scroll-arrow",children:"↓"})]})]}),s.jsx(E,{sections:r}),s.jsx(g,{id:"stars",chapter:e("pages.tour.sections.stars.chapter"),title:e("pages.tour.sections.stars.title"),intro:e("pages.tour.sections.stars.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.famousStars.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(P,{star:u})},u.hostname))})}),s.jsx(g,{id:"famous",chapter:e("pages.tour.sections.famous.chapter"),title:e("pages.tour.sections.famous.title"),intro:e("pages.tour.sections.famous.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.famous.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:u})},u.pl_name))})}),s.jsx(g,{id:"nearest",chapter:e("pages.tour.sections.nearest.chapter"),title:e("pages.tour.sections.nearest.title"),intro:e("pages.tour.sections.nearest.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.nearest.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:u})},u.pl_name))})}),s.jsx(g,{id:"habitable",chapter:e("pages.tour.sections.habitable.chapter"),title:e("pages.tour.sections.habitable.title"),intro:e("pages.tour.sections.habitable.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.habitable.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:u})},u.pl_name))})}),s.jsx(g,{id:"extreme",chapter:e("pages.tour.sections.extreme.chapter"),title:e("pages.tour.sections.extreme.title"),intro:e("pages.tour.sections.extreme.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.extreme.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:u})},`${u.pl_name}-${u.extremeType}`))})}),s.jsx(g,{id:"records",chapter:e("pages.tour.sections.records.chapter"),title:e("pages.tour.sections.records.title"),intro:e("pages.tour.sections.records.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:n.records.map(u=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:u})},`${u.pl_name}-${u.record}`))})}),s.jsxs("footer",{className:"tour-footer",children:[s.jsx("h2",{className:"tour-footer-title",children:e("pages.tour.footer.title")}),s.jsx(N,{to:"/planets",className:"tour-footer-cta",children:e("pages.tour.footer.cta")})]})]})]})}export{Y as default};
