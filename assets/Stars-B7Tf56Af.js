import{u as B,j as s,L as z,n as H,a as Q,c as q,r as o}from"./index-KgdxG6_W.js";import{g as D}from"./astronomy-CUSq6E6z.js";function G({star:a}){const{t:n}=B(),g=D(a.star_class),m=`rgb(${g>>16&255}, ${g>>8&255}, ${g&255})`;return s.jsx(z,{to:`/stars/${H(a.hostname)}`,className:"block h-full",children:s.jsxs("div",{className:"star-card",children:[s.jsx("div",{className:"star-card-visualization",children:s.jsx("div",{className:"star-visualization-dot",style:{backgroundColor:m,boxShadow:`0 0 20px ${m}, 0 0 40px ${m}40`}})}),s.jsxs("div",{className:"star-card-header",children:[s.jsx("h3",{className:"star-card-name",children:a.hostname}),s.jsxs("div",{className:"star-card-badges",children:[a.sy_snum>1&&s.jsx("div",{className:"star-card-binary-badge",children:n("pages.starCard.binary","Binary")}),a.star_class&&s.jsx("div",{className:"star-card-class-badge",children:a.star_class})]})]}),s.jsxs("div",{className:"star-card-properties",children:[a.st_teff&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.temperature")}),s.jsxs("span",{className:"property-value",children:[Math.round(a.st_teff)," K"]})]}),a.st_rad&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.radius")}),s.jsxs("span",{className:"property-value",children:[a.st_rad.toFixed(2)," R☉"]})]}),a.st_mass&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.mass")}),s.jsxs("span",{className:"property-value",children:[a.st_mass.toFixed(2)," M☉"]})]}),a.distance_ly&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.distance")}),s.jsx("span",{className:"property-value",children:a.distance_ly<1e3?`${a.distance_ly.toFixed(1)} ly`:`${(a.distance_ly/1e3).toFixed(1)} kly`})]}),s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.planets")}),s.jsx("span",{className:"property-value",children:a.sy_pnum})]}),a.sy_vmag&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.vMagnitude")}),s.jsx("span",{className:"property-value",children:a.sy_vmag.toFixed(2)})]})]}),s.jsx("div",{className:"star-card-footer",children:s.jsx("span",{className:"star-card-link-hint",children:n("pages.starCard.viewSystem")})})]})})}const _=24;function U(){var w;const{t:a}=B(),{getAllStars:n,isLoading:g,error:m}=Q(),[x,S]=q(),[h,C]=o.useState(x.get("sort")||"name"),[d,M]=o.useState(((w=x.get("classes"))==null?void 0:w.split(",").filter(Boolean))||[]),[p,k]=o.useState(x.get("search")||""),[E,j]=o.useState(parseInt(x.get("page")||"1",10)),[i,$]=o.useState(x.get("binary")||"all"),N=o.useMemo(()=>n(),[n]),I=o.useMemo(()=>{const e=new Set;return N.forEach(l=>{l.star_class&&e.add(l.star_class)}),Array.from(e).sort()},[N]),y=o.useMemo(()=>{let e=N;if(d.length>0&&(e=e.filter(t=>t.star_class&&d.includes(t.star_class))),i==="binary"?e=e.filter(t=>t.sy_snum>1):i==="single"&&(e=e.filter(t=>t.sy_snum===1)),p){const t=p.toLowerCase();e=e.filter(u=>u.hostname.toLowerCase().includes(t))}return[...e].sort((t,u)=>{switch(h){case"distance":return(t.distance_ly??1/0)-(u.distance_ly??1/0);case"planets":return u.sy_pnum-t.sy_pnum;case"temperature":return(u.st_teff??0)-(t.st_teff??0);case"name":default:return t.hostname.localeCompare(u.hostname)}})},[N,d,p,h,i]),c=Math.ceil(y.length/_),r=Math.min(Math.max(1,E),c||1),f=(r-1)*_,F=f+_,P=y.slice(f,F);o.useEffect(()=>{const e=new URLSearchParams;h!=="name"&&e.set("sort",h),d.length>0&&e.set("classes",d.join(",")),p&&e.set("search",p),i!=="all"&&e.set("binary",i),r!==1&&e.set("page",String(r)),S(e,{replace:!0})},[h,d,p,i,r,S]);const v=()=>{j(1)},L=e=>{M(l=>l.includes(e)?l.filter(t=>t!==e):[...l,e]),v()},R=e=>{k(e),v()},T=e=>{C(e),v()},b=e=>{$(e),v()},A=()=>{M([]),k(""),C("name"),$("all"),j(1)};return g?s.jsx("div",{className:"spinner-container",children:s.jsxs("div",{className:"spinner-content",children:[s.jsx("div",{className:"spinner-orbit",children:s.jsx("div",{className:"spinner-planet"})}),s.jsx("div",{className:"spinner-text",children:a("pages.stars.loading")})]})}):m?s.jsx("div",{className:"error-container",children:s.jsxs("div",{className:"error-content",children:[s.jsx("h1",{className:"error-title",children:a("pages.stars.errorTitle")}),s.jsx("p",{className:"error-message",children:m})]})}):s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"page-title",children:a("pages.stars.title")}),s.jsxs("div",{className:"stars-controls",children:[s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:a("pages.stars.searchPlaceholder"),value:p,onChange:e=>R(e.target.value),className:"search-input"})}),s.jsxs("div",{className:"controls-row",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.starClass")}),s.jsx("div",{className:"class-buttons",children:I.map(e=>s.jsx("button",{onClick:()=>L(e),className:`class-button ${d.includes(e)?"active":""}`,children:e},e))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.systemType","System Type")}),s.jsxs("div",{className:"class-buttons",children:[s.jsx("button",{onClick:()=>b("all"),className:`class-button ${i==="all"?"active":""}`,children:a("pages.stars.filters.allSystems","All")}),s.jsx("button",{onClick:()=>b("binary"),className:`class-button ${i==="binary"?"active":""}`,children:a("pages.stars.filters.binarySystems","Binary ★★")}),s.jsx("button",{onClick:()=>b("single"),className:`class-button ${i==="single"?"active":""}`,children:a("pages.stars.filters.singleSystems","Single ★")})]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.sortBy")}),s.jsxs("select",{value:h,onChange:e=>T(e.target.value),className:"sort-select",children:[s.jsx("option",{value:"name",children:a("pages.stars.sort.name")}),s.jsx("option",{value:"distance",children:a("pages.stars.sort.distance")}),s.jsx("option",{value:"planets",children:a("pages.stars.sort.planets")}),s.jsx("option",{value:"temperature",children:a("pages.stars.sort.temperature")})]})]}),(d.length>0||p||i!=="all")&&s.jsx("button",{onClick:A,className:"clear-button",children:a("pages.stars.filters.clearFilters")})]}),s.jsxs("div",{className:"results-info",children:[a(y.length!==1?"pages.stars.results.showing_plural":"pages.stars.results.showing",{start:f+1,end:Math.min(F,y.length),filtered:y.length})," ",a("pages.stars.results.total",{total:N.length})]})]}),P.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"stars-grid",children:P.map(e=>s.jsx("div",{className:"stars-grid-item",children:s.jsx(G,{star:e})},e.id))}),c>1&&s.jsxs("div",{className:"pagination-container",children:[s.jsx("button",{onClick:()=>j(Math.max(1,r-1)),disabled:r===1,className:"pagination-button",children:a("pages.stars.pagination.previous")}),s.jsx("div",{className:"pagination-info",children:a("pages.stars.pagination.pageOf",{current:r,total:c})}),s.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,c)},(e,l)=>{let t=l+1;return c>5&&(r<=3?t=l+1:r>=c-2?t=c-4+l:t=r-2+l),s.jsx("button",{onClick:()=>j(t),className:`pagination-number ${r===t?"active":""}`,children:t},t)})}),s.jsx("button",{onClick:()=>j(Math.min(c,r+1)),disabled:r===c,className:"pagination-button",children:a("pages.stars.pagination.next")})]})]}):s.jsx("div",{className:"placeholder",children:a("pages.stars.results.noResults")})]})}export{U as default};
