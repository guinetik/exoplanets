import{C as B,K as R,u as F,r as g,j as i}from"./index-BjrNzXlg.js";import{s as w,b as P,g as D,j as G}from"./transform-DuX5G0rf.js";function z(r,n){const s=n*.3-.15;if(r<R.RING_COLOR_THRESHOLD_VERY_COLD)return{hue:.55+s*.1,saturation:.25+n*.15,lightness:.8+n*.1};if(r<R.RING_COLOR_THRESHOLD_COLD)return{hue:.58+s*.08,saturation:.15+n*.1,lightness:.7+n*.1};if(r<R.RING_COLOR_THRESHOLD_COOL){const d=Math.floor(n*3);return d===0?{hue:.08+s,saturation:.35,lightness:.6}:d===1?{hue:.6,saturation:.08+n*.1,lightness:.55}:{hue:.06+s,saturation:.4,lightness:.5}}return r<R.RING_COLOR_THRESHOLD_WARM?Math.floor(n*2)===0?{hue:0,saturation:.05,lightness:.4+n*.15}:{hue:.05+s*.5,saturation:.45,lightness:.45}:{hue:.03+s*.3,saturation:.5+n*.2,lightness:.35+n*.15}}function q(r,n){const s=z(r,n),d=new B;return d.setHSL(s.hue,s.saturation,s.lightness),d}const x={WALKING_KMS:.0014,CAR_KMS:.03,JET_KMS:.25,VOYAGER_KMS:17,NEW_HORIZONS_KMS:16.26,PARKER_PROBE_KMS:192,LIGHT_1PCT_KMS:2998,LIGHT_10PCT_KMS:29979,LIGHT_SPEED_KMS:299792},Y=9461e9,$=80,W=31557600,v=2e3,V=[{key:"walking",speedKms:x.WALKING_KMS,icon:"ðŸš¶",category:"human",color:"#888888"},{key:"car",speedKms:x.CAR_KMS,icon:"ðŸš—",category:"human",color:"#aaaaaa"},{key:"jet",speedKms:x.JET_KMS,icon:"âœˆï¸",category:"human",color:"#cccccc"},{key:"voyager",speedKms:x.VOYAGER_KMS,icon:"ðŸ›°ï¸",category:"spacecraft",color:"#ff6b6b"},{key:"newHorizons",speedKms:x.NEW_HORIZONS_KMS,icon:"ðŸš€",category:"spacecraft",color:"#ffa06b"},{key:"parkerProbe",speedKms:x.PARKER_PROBE_KMS,icon:"â˜€ï¸",category:"spacecraft",color:"#ffcc00"},{key:"onePercentC",speedKms:x.LIGHT_1PCT_KMS,icon:"âš¡",category:"light",color:"#00ccff"},{key:"tenPercentC",speedKms:x.LIGHT_10PCT_KMS,icon:"ðŸ’«",category:"light",color:"#00ffcc"},{key:"lightSpeed",speedKms:x.LIGHT_SPEED_KMS,icon:"ðŸŒŸ",category:"light",color:"#00ff88"}];function J(r,n){return r*Y/n/W}function _(r){return r<1?`${(r*365.25).toFixed(1)} days`:r<1e3?`${r.toFixed(0)} years`:r<1e6?`${(r/1e3).toFixed(1)}k years`:r<1e9?`${(r/1e6).toFixed(1)}M years`:r<1e12?`${(r/1e9).toFixed(1)}B years`:`${(r/1e12).toFixed(1)}T years`}function Q({distanceLy:r,compact:n=!1}){const{t:s}=F(),d=g.useRef(null),E=g.useRef(null),[O,L]=g.useState(null),[S,N]=g.useState(!1),o=g.useMemo(()=>V.map(m=>{const l=J(r,m.speedKms),K=l<=$;return{...m,years:l,withinLifetime:K}}),[r]),C=g.useMemo(()=>{var m;return((m=o.find(l=>l.withinLifetime))==null?void 0:m.key)||null},[o]);g.useEffect(()=>{if(!d.current||!E.current||!r)return;const m=E.current.clientWidth,l=m<600,K=l?Math.max(300,o.length*35+80):n?300:400,b=l?{top:20,right:30,bottom:60,left:30}:{top:20,right:120,bottom:30,left:n?100:140},T=m-b.left-b.right,f=K-b.top-b.bottom,M=w(d.current);M.selectAll("*").remove(),M.attr("width",m).attr("height",K);const c=M.append("g").attr("transform",`translate(${b.left},${b.top})`),H=Math.max(...o.map(t=>t.speedKms)),I=Math.min(...o.map(t=>t.speedKms));let h,p;if(l?(h=P().domain(o.map(t=>t.key)).range([0,T]).padding(.4),p=D().domain([I*.5,H*2]).range([f,0])):(h=D().domain([I*.5,H*2]).range([0,T]),p=P().domain(o.map(t=>t.key)).range([0,f]).padding(.3)),l){const t=h;c.selectAll(".bar-track").data(o).join("rect").attr("class","bar-track").attr("x",e=>t(e.key)||0).attr("y",0).attr("width",t.bandwidth()).attr("height",f).attr("fill","rgba(255, 255, 255, 0.03)").attr("rx",4)}else{const t=p;c.selectAll(".bar-track").data(o).join("rect").attr("class","bar-track").attr("x",0).attr("y",e=>t(e.key)||0).attr("width",T).attr("height",t.bandwidth()).attr("fill","rgba(255, 255, 255, 0.03)").attr("rx",4)}let u;if(l){const t=h;u=c.selectAll(".speed-bar").data(o).join("rect").attr("class","speed-bar").attr("x",e=>t(e.key)||0).attr("width",t.bandwidth()).attr("fill",e=>e.color).attr("rx",4).attr("opacity",.8).attr("cursor","pointer").attr("y",f).attr("height",0)}else{const t=p;u=c.selectAll(".speed-bar").data(o).join("rect").attr("class","speed-bar").attr("x",0).attr("y",e=>t(e.key)||0).attr("height",t.bandwidth()).attr("fill",e=>e.color).attr("rx",4).attr("opacity",.8).attr("cursor","pointer").attr("width",0)}if(S)if(l){const t=p;u.attr("y",e=>t(e.speedKms)).attr("height",e=>f-t(e.speedKms))}else{const t=h;u.attr("width",e=>t(e.speedKms))}else if(l){const t=p;u.transition().duration(v).delay((e,a)=>a*100).ease(G).attr("y",e=>t(e.speedKms)).attr("height",e=>f-t(e.speedKms)).on("end",()=>N(!0))}else{const t=h;u.transition().duration(v).delay((e,a)=>a*100).ease(G).attr("width",e=>t(e.speedKms)).on("end",()=>N(!0))}if(u.on("mouseenter",function(t,e){w(this).attr("opacity",1),L(e.key)}).on("mouseleave",function(){w(this).attr("opacity",.8),L(null)}),l){const t=h;c.selectAll(".speed-icon").data(o).join("text").attr("class","speed-icon").attr("x",e=>(t(e.key)||0)+t.bandwidth()/2).attr("y",f+15).attr("text-anchor","middle").attr("font-size","14px").text(e=>e.icon),c.selectAll(".speed-label").data(o).join("text").attr("class","speed-label").attr("x",e=>(t(e.key)||0)+t.bandwidth()/2).attr("y",f+30).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size","7px").text(e=>s(`components.travelTime.speeds.${e.key}`))}else{const t=p;c.selectAll(".speed-icon").data(o).join("text").attr("class","speed-icon").attr("x",-35).attr("y",e=>(t(e.key)||0)+t.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size",n?"16px":"20px").text(e=>e.icon),c.selectAll(".speed-label").data(o).join("text").attr("class","speed-label").attr("x",-45).attr("y",e=>(t(e.key)||0)+t.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","end").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size",n?"9px":"11px").text(e=>s(`components.travelTime.speeds.${e.key}`))}const k=c.selectAll(".time-label").data(o).join("text").attr("class","time-label").attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size",l?"8px":n?"9px":"11px").attr("font-family","monospace").attr("opacity",0);if(l){const t=h,e=p;S?k.attr("x",a=>(t(a.key)||0)+t.bandwidth()/2).attr("y",a=>e(a.speedKms)-5).attr("text-anchor","middle").attr("opacity",1).text(a=>_(a.years)):k.attr("x",a=>(t(a.key)||0)+t.bandwidth()/2).attr("y",a=>e(a.speedKms)-5).attr("text-anchor","middle").transition().duration(300).delay((a,j)=>v+j*100).attr("opacity",1).text(a=>_(a.years))}else{const t=h,e=p;S?k.attr("x",a=>t(a.speedKms)+8).attr("y",a=>(e(a.key)||0)+e.bandwidth()/2).attr("dy","0.35em").attr("opacity",1).text(a=>_(a.years)):k.attr("y",a=>(e(a.key)||0)+e.bandwidth()/2).attr("dy","0.35em").transition().duration(300).delay((a,j)=>v+j*100).attr("x",a=>t(a.speedKms)+8).attr("opacity",1).text(a=>_(a.years))}const A=o.filter(t=>t.withinLifetime);if(A.length>0){const t=A[A.length-1];if(l){const a=p(t.speedKms)||0;c.append("line").attr("x1",-10).attr("x2",T+10).attr("y1",a).attr("y2",a).attr("stroke","#00ff88").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.6),c.append("text").attr("x",-15).attr("y",a).attr("text-anchor","end").attr("dy","0.35em").attr("fill","#00ff88").attr("font-size","8px").text("âœ“ Lifetime")}else{const a=h(t.speedKms)||0;c.append("line").attr("x1",a).attr("x2",a).attr("y1",-10).attr("y2",f+10).attr("stroke","#00ff88").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.6),c.append("text").attr("x",a).attr("y",-15).attr("text-anchor","middle").attr("fill","#00ff88").attr("font-size","10px").text(s("components.travelTime.reachableInLifetime"))}}},[r,o,s,S,n]);const y=O?o.find(m=>m.key===O):null;return!r||r<=0?i.jsx("div",{className:"travel-time-section",children:i.jsx("p",{className:"travel-unreachable",children:s("components.travelTime.unknownDistance")})}):i.jsxs("div",{className:"travel-time-section",children:[i.jsxs("div",{className:"travel-time-header",children:[i.jsxs("div",{className:"travel-time-distance",children:[i.jsx("span",{className:"distance-value",children:r.toFixed(1)}),i.jsx("span",{className:"distance-label",children:s("components.travelTime.lightYearsAway")})]}),C&&i.jsxs("div",{className:"travel-time-reachable",children:[i.jsx("span",{className:"reachable-icon",children:"âœ“"}),i.jsx("span",{children:s("components.travelTime.reachableAt",{speed:s(`components.travelTime.speeds.${C}`)})})]})]}),i.jsx("div",{ref:E,className:"travel-time-chart",children:i.jsx("svg",{ref:d})}),y&&i.jsxs("div",{className:"travel-time-details",children:[i.jsx("div",{className:"detail-icon",children:y.icon}),i.jsxs("div",{className:"detail-info",children:[i.jsx("span",{className:"detail-name",children:s(`components.travelTime.speeds.${y.key}`)}),i.jsx("span",{className:"detail-time",children:_(y.years)})]}),i.jsx("div",{className:"detail-stats",children:i.jsx("span",{className:`detail-badge ${y.withinLifetime?"reachable":""}`,children:y.withinLifetime?s("components.travelTime.withinLifetime"):s("components.travelTime.lifetimes",{count:Math.ceil(y.years/$)})})})]}),i.jsxs("button",{className:"travel-time-replay",onClick:()=>N(!1),children:["ðŸ”„ ",s("components.travelTime.replayRace")]})]})}export{Q as T,q as c};
