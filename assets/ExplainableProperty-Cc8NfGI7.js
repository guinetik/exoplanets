import{C as D,O as T,r as p,u as L,j as e,W as $}from"./index-XZ3gHdqT.js";function H(s,t){const n=t*.3-.15;if(s<T.RING_COLOR_THRESHOLD_VERY_COLD)return{hue:.55+n*.1,saturation:.25+t*.15,lightness:.8+t*.1};if(s<T.RING_COLOR_THRESHOLD_COLD)return{hue:.58+n*.08,saturation:.15+t*.1,lightness:.7+t*.1};if(s<T.RING_COLOR_THRESHOLD_COOL){const o=Math.floor(t*3);return o===0?{hue:.08+n,saturation:.35,lightness:.6}:o===1?{hue:.6,saturation:.08+t*.1,lightness:.55}:{hue:.06+n,saturation:.4,lightness:.5}}return s<T.RING_COLOR_THRESHOLD_WARM?{hue:.1+n*.1,saturation:.08+t*.08,lightness:.6+t*.15}:{hue:.08+n*.1,saturation:.1+t*.1,lightness:.55+t*.15}}function G(s,t){const n=H(s,t),o=new D;return o.setHSL(n.hue,n.saturation,n.lightness),o}function V(s){const[t,n]=p.useState({width:0,height:0});return p.useLayoutEffect(()=>{const o=s.current;if(!o)return;const r=new ResizeObserver(a=>{if(!a||a.length===0)return;const{width:c,height:l}=a[0].contentRect;n({width:c,height:l})});return r.observe(o),()=>r.unobserve(o)},[s]),t}const M=9461e9,I=80,F=31557600,A={BASE_DURATION:2,MAX_DURATION:8},O=[{id:"starship",icon:"bfr",speedKms:7.6,color:"#ff6b6b"},{id:"shuttle",icon:"shuttle",speedKms:7.8,color:"#ff8c6b"},{id:"saturnV",icon:"saturn9",speedKms:11.2,color:"#ffa06b"},{id:"falconHeavy",icon:"falcon-heavy",speedKms:11.2,color:"#ffb86b"},{id:"newHorizons",icon:"new-horizons",speedKms:16.26,color:"#ffd06b"},{id:"voyager",icon:"voyager",speedKms:17,color:"#ffcc00"},{id:"parkerProbe",icon:"parker",speedKms:192,color:"#00ccff"},{id:"solarSail",icon:"solar",speedKms:2998,color:"#00ffcc"},{id:"enterprise",icon:"enterprise",speedKms:299792,color:"#00ff88"}];function P(s,t){return s*M/t/F}function _(s){return s<1?`${(s*365.25).toFixed(1)} days`:s<1e3?`${s.toFixed(0)} years`:s<1e6?`${(s/1e3).toFixed(1)}k years`:s<1e9?`${(s/1e6).toFixed(1)}M years`:s<1e12?`${(s/1e9).toFixed(1)}B years`:`${(s/1e12).toFixed(1)}T years`}function K(s,t){const n=1-s/(t-1),o=80,r=15;return r+n*(o-r)}function w(s,t,n,o,r,a){const c=K(s,t),l=(n+r)/2,x=o-c;return`M ${n} ${o} Q ${l} ${x} ${r} ${a}`}function z(s,t,n,o,r,a,c){const l=1-s;return{x:l*l*t+2*l*s*o+s*s*a,y:l*l*n+2*l*s*r+s*s*c}}function Y({spacecraft:s,onClose:t,t:n}){p.useEffect(()=>{const a=c=>{c.key==="Escape"&&t()};return document.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[t]);const o=(s.speedKms*2236.94).toFixed(0),r=(s.speedKms/299792*100).toFixed(s.speedKms>=2998?0:6);return $.createPortal(e.jsx("div",{className:"property-dialog-overlay",onClick:t,children:e.jsxs("div",{className:"property-dialog",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"property-dialog-close",onClick:t,"aria-label":"Close dialog",children:"Ã—"}),e.jsxs("div",{className:"spacecraft-dialog-header",children:[e.jsx("img",{src:`/icons/${s.icon}.svg`,alt:s.id,className:"spacecraft-dialog-icon",style:{filter:"brightness(0) invert(1)"}}),e.jsx("h3",{className:"property-dialog-title",children:n(`components.travelTime.speeds.${s.id}`)})]}),e.jsxs("div",{className:"property-dialog-content",children:[e.jsx("p",{className:"property-dialog-description",children:n(`components.travelTime.spacecraft.${s.id}.description`)}),e.jsxs("div",{className:"spacecraft-stats",children:[e.jsxs("div",{className:"spacecraft-stat",children:[e.jsx("span",{className:"stat-label",children:n("components.travelTime.speedLabel")}),e.jsxs("span",{className:"stat-value",style:{color:s.color},children:[s.speedKms.toLocaleString()," km/s"]}),e.jsxs("span",{className:"stat-secondary",children:["(",Number(o).toLocaleString()," mph)"]})]}),e.jsxs("div",{className:"spacecraft-stat",children:[e.jsx("span",{className:"stat-label",children:n("components.travelTime.percentLight")}),e.jsxs("span",{className:"stat-value",style:{color:s.color},children:[r,"%"]})]}),e.jsxs("div",{className:"spacecraft-stat",children:[e.jsx("span",{className:"stat-label",children:n("components.travelTime.travelTimeLabel")}),e.jsx("span",{className:"stat-value",style:{color:s.color},children:_(s.years)}),s.withinLifetime&&e.jsxs("span",{className:"stat-reachable",children:["âœ“ ",n("components.travelTime.withinLifetime")]})]})]}),e.jsx("div",{className:"property-dialog-fun-fact",children:n(`components.travelTime.spacecraft.${s.id}.funFact`)})]})]})}),document.body)}function W({distanceLy:s,compact:t=!1}){const{t:n}=L(),[o,r]=p.useState(0),[a,c]=p.useState(!0),[l,x]=p.useState(null),d=p.useMemo(()=>{const i=Math.max(...O.map(m=>m.speedKms));return O.map((m,y)=>{const b=P(s,m.speedKms),E=b<=I,R=m.speedKms/i,S=A.BASE_DURATION+(1-R)*(A.MAX_DURATION-A.BASE_DURATION);return{...m,index:y,years:b,withinLifetime:E,duration:S}})},[s]),N=p.useMemo(()=>{var i;return((i=d.find(m=>m.withinLifetime))==null?void 0:i.id)||null},[d]);p.useEffect(()=>{if(a){const i=Math.max(...d.map(y=>y.duration)),m=setTimeout(()=>{c(!1)},i*1e3+500);return()=>clearTimeout(m)}},[a,d,o]);const k=p.useCallback(()=>{r(i=>i+1),c(!0)},[]),u=400,j=t?160:200,v=50,f=u-50,h=j-50;return!s||s<=0?e.jsx("div",{className:"travel-time-section",children:e.jsx("p",{className:"travel-unreachable",children:n("components.travelTime.unknownDistance")})}):e.jsxs("div",{className:"travel-time-section",children:[e.jsxs("div",{className:"travel-time-header",children:[e.jsxs("div",{className:"travel-time-distance",children:[e.jsx("span",{className:"distance-value",children:s.toFixed(1)}),e.jsx("span",{className:"distance-label",children:n("components.travelTime.lightYearsAway")})]}),N&&e.jsxs("div",{className:"travel-time-reachable",children:[e.jsx("span",{className:"reachable-icon",children:"âœ“"}),e.jsx("span",{children:n("components.travelTime.reachableAt",{speed:n(`components.travelTime.speeds.${N}`)})})]})]}),e.jsx("div",{className:"travel-viz-container",children:e.jsxs("svg",{viewBox:`0 0 ${u} ${j}`,className:"travel-viz",preserveAspectRatio:"xMidYMid meet",children:[d.map(i=>{const m=w(i.index,d.length,v,h,f,h);return e.jsx("path",{d:m,fill:"none",stroke:i.color,strokeWidth:2,strokeOpacity:.3,strokeDasharray:"4,4"},i.id)}),e.jsx("text",{x:v,y:h,fontSize:t?24:32,textAnchor:"middle",dominantBaseline:"middle",children:"ðŸŒ"}),e.jsx("text",{x:v,y:h+25,fill:"rgba(255,255,255,0.6)",fontSize:t?10:12,textAnchor:"middle",children:n("components.travelTime.earth")}),e.jsx("text",{x:f,y:h,fontSize:t?24:32,textAnchor:"middle",dominantBaseline:"middle",children:"ðŸª"}),e.jsx("text",{x:f,y:h+25,fill:"rgba(255,255,255,0.6)",fontSize:t?10:12,textAnchor:"middle",children:n("components.travelTime.planet")}),d.map(i=>{const m=K(i.index,d.length),y=(v+f)/2,b=h-m,E=w(i.index,d.length,v,h,f,h),R=d.length,S=.1+.8*(i.index/(R-1)),C=z(S,v,h,y,b,f,h),g=t?20:24;return a?e.jsx("image",{href:`/icons/${i.icon}.svg`,width:g,height:g,className:"craft-icon",style:{filter:"brightness(0) invert(1)"},children:e.jsx("animateMotion",{dur:`${i.duration}s`,repeatCount:"1",fill:"freeze",path:E})},i.id):e.jsx("image",{href:`/icons/${i.icon}.svg`,x:C.x-g/2,y:C.y-g/2,width:g,height:g,className:"craft-icon",style:{filter:"brightness(0) invert(1)"}},i.id)})]},o)}),e.jsx("div",{className:"travel-legend",children:d.map(i=>e.jsxs("button",{className:`travel-legend-item clickable ${i.withinLifetime?"reachable":""}`,onClick:()=>x(i),type:"button",children:[e.jsx("img",{src:`/icons/${i.icon}.svg`,alt:i.id,className:"legend-icon",style:{filter:"brightness(0) invert(1)"}}),e.jsx("span",{className:"legend-name",children:n(`components.travelTime.speeds.${i.id}`)}),e.jsx("span",{className:"legend-time",style:{color:i.color},children:_(i.years)})]},i.id))}),e.jsxs("button",{className:"travel-time-replay",onClick:k,disabled:a,children:["ðŸ”„ ",n("components.travelTime.replayRace")]}),l&&e.jsx(Y,{spacecraft:l,onClose:()=>x(null),t:n})]})}function B({isOpen:s,onClose:t,propertyKey:n,category:o}){const{t:r}=L();if(p.useEffect(()=>{const u=j=>{j.key==="Escape"&&s&&t()};return s&&(document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",u),document.body.style.overflow="unset"}},[s,t]),!s)return null;const a=`propertyExplanations.${o}.${n}`,c=r(`${a}.title`),l=r(`${a}.description`),x=r(`${a}.example`,{defaultValue:""}),d=r(`${a}.technicalNote`,{defaultValue:""}),N=r(`${a}.funFact`,{defaultValue:""});return!c.includes(a)&&!l.includes(a)?$.createPortal(e.jsx("div",{className:"property-dialog-overlay",onClick:t,children:e.jsxs("div",{className:"property-dialog",onClick:u=>u.stopPropagation(),children:[e.jsx("button",{className:"property-dialog-close",onClick:t,"aria-label":"Close dialog",children:"Ã—"}),e.jsx("h3",{className:"property-dialog-title",children:c}),e.jsxs("div",{className:"property-dialog-content",children:[l&&e.jsx("p",{className:"property-dialog-description",children:l}),x&&e.jsxs("div",{className:"property-dialog-example",children:[e.jsx("strong",{children:"Example:"})," ",x]}),d&&e.jsxs("p",{className:"property-dialog-technical",children:[e.jsx("strong",{children:"Technical:"})," ",d]}),N&&e.jsx("div",{className:"property-dialog-fun-fact",children:N})]})]})}),document.body):$.createPortal(e.jsx("div",{className:"property-dialog-overlay",onClick:t,children:e.jsxs("div",{className:"property-dialog",onClick:u=>u.stopPropagation(),children:[e.jsx("button",{className:"property-dialog-close",onClick:t,children:"Ã—"}),e.jsx("h3",{className:"property-dialog-title",children:n.toUpperCase()}),e.jsx("div",{className:"property-dialog-content",children:e.jsx("p",{className:"text-xs text-white/40",children:"No explanation available for this property yet."})})]})}),document.body)}function X({propertyKey:s,category:t,children:n,className:o="",showIcon:r=!1}){const[a,c]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`explainable-property ${o}`,onClick:()=>c(!0),role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&c(!0)},children:[n,r&&e.jsx("span",{className:"explainable-icon","aria-hidden":"true",children:"â“˜"}),e.jsx("span",{className:"explainable-underline","aria-hidden":"true"})]}),e.jsx(B,{isOpen:a,onClose:()=>c(!1),propertyKey:s,category:t})]})}export{X as E,W as T,G as c,V as u};
