import{u as B,j as e,L as ce,n as oe,P as de,c as pe,e as ge,r as n}from"./index-C3owQnl1.js";function he({planet:s}){const{t}=B();return e.jsx(ce,{to:`/planets/${oe(s.pl_name)}`,className:"planet-card-link",children:e.jsxs("div",{className:"planet-card",children:[e.jsx("div",{className:"planet-card-visualization",children:e.jsx(de,{planet:s,size:80})}),e.jsxs("div",{className:"planet-card-header",children:[e.jsxs("div",{className:"planet-card-title-group",children:[e.jsx("h3",{className:"planet-card-name",children:s.pl_name}),e.jsx("p",{className:"planet-card-host",children:s.hostname})]}),s.planet_type&&e.jsx("div",{className:"planet-type-badge",children:s.planet_type})]}),e.jsxs("div",{className:"planet-card-properties",children:[s.pl_rade!==null&&e.jsxs("div",{className:"planet-card-property",children:[e.jsx("span",{className:"planet-card-property-label",children:t("pages.planetCard.properties.radius")}),e.jsxs("span",{className:"planet-card-property-value",children:[s.pl_rade.toFixed(2)," R⊕"]})]}),s.pl_bmasse!==null&&e.jsxs("div",{className:"planet-card-property",children:[e.jsx("span",{className:"planet-card-property-label",children:t("pages.planetCard.properties.mass")}),e.jsxs("span",{className:"planet-card-property-value",children:[s.pl_bmasse.toFixed(2)," M⊕"]})]}),s.pl_orbper!==null&&e.jsxs("div",{className:"planet-card-property",children:[e.jsx("span",{className:"planet-card-property-label",children:t("pages.planetCard.properties.period")}),e.jsxs("span",{className:"planet-card-property-value",children:[s.pl_orbper.toFixed(2)," d"]})]}),s.distance_ly!==null&&e.jsxs("div",{className:"planet-card-property",children:[e.jsx("span",{className:"planet-card-property-label",children:t("pages.planetCard.properties.distance")}),e.jsx("span",{className:"planet-card-property-value",children:s.distance_ly<1e3?`${s.distance_ly.toFixed(1)} ly`:`${(s.distance_ly/1e3).toFixed(1)} kly`})]}),s.disc_year&&e.jsxs("div",{className:"planet-card-property",children:[e.jsx("span",{className:"planet-card-property-label",children:t("pages.planetCard.properties.discovered")}),e.jsx("span",{className:"planet-card-property-value",children:s.disc_year})]})]}),e.jsxs("div",{className:"planet-card-flags",children:[s.is_habitable_zone&&e.jsx("span",{className:"flag-badge flag-habitable",children:t("pages.planetCard.flags.habitableZone")}),s.is_earth_like&&e.jsx("span",{className:"flag-badge flag-earth-like",children:t("pages.planetCard.flags.earthLike")}),s.is_top_habitable_candidate&&e.jsx("span",{className:"flag-badge flag-top-candidate",children:t("pages.planetCard.flags.topCandidate")}),s.is_potentially_rocky&&e.jsx("span",{className:"flag-badge flag-rocky",children:t("pages.planetCard.flags.potentiallyRocky")}),s.is_hot_jupiter&&e.jsx("span",{className:"flag-badge flag-hot-jupiter",children:t("pages.planetCard.flags.hotJupiter")}),s.is_hot_neptune&&e.jsx("span",{className:"flag-badge flag-hot-neptune",children:t("pages.planetCard.flags.hotNeptune")}),s.is_ultra_hot&&e.jsx("span",{className:"flag-badge flag-ultra-hot",children:t("pages.planetCard.flags.ultraHot")}),s.is_frozen_world&&e.jsx("span",{className:"flag-badge flag-frozen",children:t("pages.planetCard.flags.frozenWorld")}),s.is_ultra_dense&&e.jsx("span",{className:"flag-badge flag-ultra-dense",children:t("pages.planetCard.flags.ultraDense")}),s.is_puffy&&e.jsx("span",{className:"flag-badge flag-puffy",children:t("pages.planetCard.flags.puffy")}),s.is_ultra_short_period&&e.jsx("span",{className:"flag-badge flag-ultra-short",children:t("pages.planetCard.flags.ultraShortPeriod")}),s.is_eccentric_orbit&&e.jsx("span",{className:"flag-badge flag-eccentric",children:t("pages.planetCard.flags.eccentricOrbit")}),s.is_likely_tidally_locked&&e.jsx("span",{className:"flag-badge flag-tidally-locked",children:t("pages.planetCard.flags.tidallyLocked")}),s.cb_flag===1&&e.jsx("span",{className:"flag-badge flag-circumbinary",children:t("pages.planetCard.flags.circumbinary")}),s.is_rich_system&&e.jsx("span",{className:"flag-badge flag-rich-system",children:t("pages.planetCard.flags.richSystem")}),s.is_very_nearby&&e.jsx("span",{className:"flag-badge flag-very-nearby",children:t("pages.planetCard.flags.veryNearby")}),s.is_solar_analog&&e.jsx("span",{className:"flag-badge flag-solar-analog",children:t("pages.planetCard.flags.solarAnalog")}),s.is_red_dwarf_host&&e.jsx("span",{className:"flag-badge flag-red-dwarf",children:t("pages.planetCard.flags.redDwarfHost")}),s.has_rv_data&&e.jsx("span",{className:"flag-badge flag-rv-data",children:t("pages.planetCard.flags.hasRvData")}),s.is_controversial&&e.jsx("span",{className:"flag-badge flag-controversial",children:t("pages.planetCard.flags.controversial")})]}),e.jsx("div",{className:"planet-card-footer",children:e.jsx("span",{className:"planet-card-link-hint",children:t("pages.planetCard.viewDetails")})})]})})}const P=24;function me(){const{t:s}=B(),{getAllPlanets:t,isLoading:W,error:T}=pe(),[c,O]=ge(),[x,w]=n.useState(c.get("sort")||"name"),[g,z]=n.useState(c.get("types")?c.get("types").split(","):[]),[h,F]=n.useState(c.get("classes")?c.get("classes").split(","):[]),[u,L]=n.useState(c.get("search")||""),[j,E]=n.useState(c.get("habitable")==="true"),[b,H]=n.useState(c.get("earthlike")==="true"),[y,I]=n.useState(c.get("eccentric")==="true"),[N,R]=n.useState(c.get("circumbinary")==="true"),[f,D]=n.useState(c.get("method")||"all"),[_,A]=n.useState(c.get("ultrahot")==="true"),[v,$]=n.useState(c.get("frozen")==="true"),[Y,C]=n.useState(parseInt(c.get("page")||"1",10)),m=n.useMemo(()=>t(),[t]),Q=n.useMemo(()=>{const a=new Set;return m.forEach(r=>{r.planet_type&&a.add(r.planet_type)}),Array.from(a).sort()},[m]),G=n.useMemo(()=>{const a=new Set;return m.forEach(r=>{r.star_class&&a.add(r.star_class)}),Array.from(a).sort()},[m]),k=n.useMemo(()=>{let a=m;if(g.length>0&&(a=a.filter(l=>l.planet_type&&g.includes(l.planet_type))),h.length>0&&(a=a.filter(l=>l.star_class&&h.includes(l.star_class))),j&&(a=a.filter(l=>l.is_habitable_zone)),b&&(a=a.filter(l=>l.is_earth_like)),y&&(a=a.filter(l=>l.is_eccentric_orbit)),N&&(a=a.filter(l=>l.is_circumbinary)),f!=="all"&&(a=a.filter(l=>{const i=l.has_rv_data,S=l.is_transiting;switch(f){case"rv":return i&&!S;case"transit":return S&&!i;case"both":return i&&S;default:return!0}})),_&&(a=a.filter(l=>l.is_ultra_hot)),v&&(a=a.filter(l=>l.is_frozen_world)),u){const l=u.toLowerCase();a=a.filter(i=>i.pl_name.toLowerCase().includes(l)||i.hostname.toLowerCase().includes(l))}return[...a].sort((l,i)=>{switch(x){case"distance":return(l.distance_ly??1/0)-(i.distance_ly??1/0);case"mass":return(i.pl_bmasse??0)-(l.pl_bmasse??0);case"radius":return(i.pl_rade??0)-(l.pl_rade??0);case"discoveryYear":return i.disc_year-l.disc_year;case"habitability":const S=l.habitability_score??0;return(i.habitability_score??0)-S;case"temperatureHot":return(i.pl_eqt??0)-(l.pl_eqt??0);case"temperatureCold":return(l.pl_eqt??1/0)-(i.pl_eqt??1/0);case"name":default:return l.pl_name.localeCompare(i.pl_name)}})},[m,g,h,j,b,y,N,f,_,v,u,x]),p=Math.ceil(k.length/P),o=Math.min(Math.max(1,Y),p||1),M=(o-1)*P,q=M+P,U=k.slice(M,q);n.useEffect(()=>{const a=new URLSearchParams;x!=="name"&&a.set("sort",x),g.length>0&&a.set("types",g.join(",")),h.length>0&&a.set("classes",h.join(",")),u&&a.set("search",u),j&&a.set("habitable","true"),b&&a.set("earthlike","true"),y&&a.set("eccentric","true"),N&&a.set("circumbinary","true"),f!=="all"&&a.set("method",f),_&&a.set("ultrahot","true"),v&&a.set("frozen","true"),o!==1&&a.set("page",String(o)),O(a,{replace:!0})},[x,g,h,u,j,b,y,N,f,_,v,o,O]);const d=()=>{C(1)},J=a=>{z(r=>r.includes(a)?r.filter(l=>l!==a):[...r,a]),d()},Z=a=>{F(r=>r.includes(a)?r.filter(l=>l!==a):[...r,a]),d()},K=a=>{L(a),d()},V=a=>{w(a),d()},X=()=>{E(a=>!a),d()},ee=()=>{H(a=>!a),d()},ae=()=>{I(a=>!a),d()},se=()=>{R(a=>!a),d()},le=a=>{D(a),d()},te=()=>{A(a=>!a),d()},re=()=>{$(a=>!a),d()},ne=()=>{z([]),F([]),L(""),E(!1),H(!1),I(!1),R(!1),D("all"),A(!1),$(!1),w("name"),C(1)};if(W)return e.jsx("div",{className:"spinner-container",children:e.jsxs("div",{className:"spinner-content",children:[e.jsx("div",{className:"spinner-orbit",children:e.jsx("div",{className:"spinner-planet"})}),e.jsx("div",{className:"spinner-text",children:s("pages.planets.loading")})]})});if(T)return e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{className:"error-title",children:s("pages.planets.errorTitle")}),e.jsx("p",{className:"error-message",children:T})]})});const ie=g.length>0||h.length>0||u||j||b||y||N||f!=="all"||_||v;return e.jsxs("div",{className:"page-container",children:[e.jsx("h1",{className:"page-title",children:s("pages.planets.title")}),e.jsxs("div",{className:"planets-controls",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:s("pages.planets.searchPlaceholder"),value:u,onChange:a=>K(a.target.value),className:"search-input"})}),e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.planetType")}),e.jsx("div",{className:"type-buttons",children:Q.map(a=>e.jsx("button",{onClick:()=>J(a),className:`type-button ${g.includes(a)?"active":""}`,children:a},a))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.starClass")}),e.jsx("div",{className:"class-buttons",children:G.map(a=>e.jsx("button",{onClick:()=>Z(a),className:`class-button ${h.includes(a)?"active":""}`,children:a},a))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.discoveryMethod")}),e.jsxs("select",{value:f,onChange:a=>le(a.target.value),className:"sort-select",children:[e.jsx("option",{value:"all",children:s("pages.planets.filters.discoveryMethods.all")}),e.jsx("option",{value:"transit",children:s("pages.planets.filters.discoveryMethods.transit")}),e.jsx("option",{value:"rv",children:s("pages.planets.filters.discoveryMethods.rv")}),e.jsx("option",{value:"both",children:s("pages.planets.filters.discoveryMethods.both")})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.sortBy")}),e.jsxs("select",{value:x,onChange:a=>V(a.target.value),className:"sort-select",children:[e.jsx("option",{value:"name",children:s("pages.planets.sort.name")}),e.jsx("option",{value:"distance",children:s("pages.planets.sort.distance")}),e.jsx("option",{value:"mass",children:s("pages.planets.sort.mass")}),e.jsx("option",{value:"radius",children:s("pages.planets.sort.radius")}),e.jsx("option",{value:"discoveryYear",children:s("pages.planets.sort.discoveryYear")}),e.jsx("option",{value:"habitability",children:s("pages.planets.sort.habitability")}),e.jsx("option",{value:"temperatureHot",children:"Temperature (Hottest)"}),e.jsx("option",{value:"temperatureCold",children:"Temperature (Coldest)"})]})]})]}),e.jsxs("div",{className:"toggle-filters",children:[e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:X,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.habitableOnly")})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:ee,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.earthLikeOnly")})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:ae,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.eccentricOnly")})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:se,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.circumbinaryOnly")})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:te,className:"toggle-checkbox"}),e.jsx("span",{children:"Ultra Hot Worlds"})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:re,className:"toggle-checkbox"}),e.jsx("span",{children:"Frozen Worlds"})]})]}),ie&&e.jsx("button",{onClick:ne,className:"clear-button",children:s("pages.planets.filters.clearFilters")}),e.jsxs("div",{className:"results-info",children:[s(k.length!==1?"pages.planets.results.showing_plural":"pages.planets.results.showing",{start:M+1,end:Math.min(q,k.length),filtered:k.length})," ",s("pages.planets.results.total",{total:m.length})]})]}),U.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"planets-grid",children:U.map(a=>e.jsx("div",{className:"planets-grid-item",children:e.jsx(he,{planet:a})},a.pl_name))}),p>1&&e.jsxs("div",{className:"pagination-container",children:[e.jsx("button",{onClick:()=>C(Math.max(1,o-1)),disabled:o===1,className:"pagination-button",children:s("pages.planets.pagination.previous")}),e.jsx("div",{className:"pagination-info",children:s("pages.planets.pagination.pageOf",{current:o,total:p})}),e.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,p)},(a,r)=>{let l=r+1;return p>5&&(o<=3?l=r+1:o>=p-2?l=p-4+r:l=o-2+r),e.jsx("button",{onClick:()=>C(l),className:`pagination-number ${o===l?"active":""}`,children:l},l)})}),e.jsx("button",{onClick:()=>C(Math.min(p,o+1)),disabled:o===p,className:"pagination-button",children:s("pages.planets.pagination.next")})]})]}):e.jsx("div",{className:"placeholder",children:s("pages.planets.results.noResults")})]})}export{me as default};
