import{u as B,j as s,L as z,n as Q,S as q,c as D,e as G,r as o}from"./index-BjrNzXlg.js";function K({star:a}){const{t:n}=B();return s.jsx(z,{to:`/stars/${Q(a.hostname)}`,className:"block h-full",children:s.jsxs("div",{className:"star-card",children:[s.jsx("div",{className:"star-card-visualization",children:s.jsx(q,{star:a,size:60})}),s.jsxs("div",{className:"star-card-header",children:[s.jsx("h3",{className:"star-card-name",children:a.hostname}),s.jsxs("div",{className:"star-card-badges",children:[a.sy_snum>1&&s.jsx("div",{className:"star-card-binary-badge",children:n("pages.starCard.binary","Binary")}),a.star_class&&s.jsx("div",{className:"star-card-class-badge",children:a.star_class})]})]}),s.jsxs("div",{className:"star-card-properties",children:[a.st_teff&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.temperature")}),s.jsxs("span",{className:"property-value",children:[Math.round(a.st_teff)," K"]})]}),a.st_rad&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.radius")}),s.jsxs("span",{className:"property-value",children:[a.st_rad.toFixed(2)," R☉"]})]}),a.st_mass&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.mass")}),s.jsxs("span",{className:"property-value",children:[a.st_mass.toFixed(2)," M☉"]})]}),a.distance_ly&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.distance")}),s.jsx("span",{className:"property-value",children:a.distance_ly<1e3?`${a.distance_ly.toFixed(1)} ly`:`${(a.distance_ly/1e3).toFixed(1)} kly`})]}),s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.planets")}),s.jsx("span",{className:"property-value",children:a.sy_pnum})]}),a.sy_vmag&&s.jsxs("div",{className:"star-property",children:[s.jsx("span",{className:"property-label",children:n("pages.starCard.properties.vMagnitude")}),s.jsx("span",{className:"property-value",children:a.sy_vmag.toFixed(2)})]})]}),s.jsx("div",{className:"star-card-footer",children:s.jsx("span",{className:"star-card-link-hint",children:n("pages.starCard.viewSystem")})})]})})}const v=24;function U(){var w;const{t:a}=B(),{getAllStars:n,isLoading:$,error:b}=D(),[u,S]=G(),[m,_]=o.useState(u.get("sort")||"name"),[d,C]=o.useState(((w=u.get("classes"))==null?void 0:w.split(",").filter(Boolean))||[]),[p,M]=o.useState(u.get("search")||""),[E,g]=o.useState(parseInt(u.get("page")||"1",10)),[i,k]=o.useState(u.get("binary")||"all"),x=o.useMemo(()=>n(),[n]),T=o.useMemo(()=>{const e=new Set;return x.forEach(l=>{l.star_class&&e.add(l.star_class)}),Array.from(e).sort()},[x]),j=o.useMemo(()=>{let e=x;if(d.length>0&&(e=e.filter(t=>t.star_class&&d.includes(t.star_class))),i==="binary"?e=e.filter(t=>t.sy_snum>1):i==="single"&&(e=e.filter(t=>t.sy_snum===1)),p){const t=p.toLowerCase();e=e.filter(h=>h.hostname.toLowerCase().includes(t))}return[...e].sort((t,h)=>{switch(m){case"distance":return(t.distance_ly??1/0)-(h.distance_ly??1/0);case"planets":return h.sy_pnum-t.sy_pnum;case"temperature":return(h.st_teff??0)-(t.st_teff??0);case"name":default:return t.hostname.localeCompare(h.hostname)}})},[x,d,p,m,i]),c=Math.ceil(j.length/v),r=Math.min(Math.max(1,E),c||1),y=(r-1)*v,F=y+v,P=j.slice(y,F);o.useEffect(()=>{const e=new URLSearchParams;m!=="name"&&e.set("sort",m),d.length>0&&e.set("classes",d.join(",")),p&&e.set("search",p),i!=="all"&&e.set("binary",i),r!==1&&e.set("page",String(r)),S(e,{replace:!0})},[m,d,p,i,r,S]);const N=()=>{g(1)},I=e=>{C(l=>l.includes(e)?l.filter(t=>t!==e):[...l,e]),N()},L=e=>{M(e),N()},A=e=>{_(e),N()},f=e=>{k(e),N()},R=()=>{C([]),M(""),_("name"),k("all"),g(1)};return $?s.jsx("div",{className:"spinner-container",children:s.jsxs("div",{className:"spinner-content",children:[s.jsx("div",{className:"spinner-orbit",children:s.jsx("div",{className:"spinner-planet"})}),s.jsx("div",{className:"spinner-text",children:a("pages.stars.loading")})]})}):b?s.jsx("div",{className:"error-container",children:s.jsxs("div",{className:"error-content",children:[s.jsx("h1",{className:"error-title",children:a("pages.stars.errorTitle")}),s.jsx("p",{className:"error-message",children:b})]})}):s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"page-title",children:a("pages.stars.title")}),s.jsxs("div",{className:"stars-controls",children:[s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:a("pages.stars.searchPlaceholder"),value:p,onChange:e=>L(e.target.value),className:"search-input"})}),s.jsxs("div",{className:"controls-row",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.starClass")}),s.jsx("div",{className:"class-buttons",children:T.map(e=>s.jsx("button",{onClick:()=>I(e),className:`class-button ${d.includes(e)?"active":""}`,children:e},e))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.systemType","System Type")}),s.jsxs("div",{className:"class-buttons",children:[s.jsx("button",{onClick:()=>f("all"),className:`class-button ${i==="all"?"active":""}`,children:a("pages.stars.filters.allSystems","All")}),s.jsx("button",{onClick:()=>f("binary"),className:`class-button ${i==="binary"?"active":""}`,children:a("pages.stars.filters.binarySystems","Binary ★★")}),s.jsx("button",{onClick:()=>f("single"),className:`class-button ${i==="single"?"active":""}`,children:a("pages.stars.filters.singleSystems","Single ★")})]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.stars.filters.sortBy")}),s.jsxs("select",{value:m,onChange:e=>A(e.target.value),className:"sort-select",children:[s.jsx("option",{value:"name",children:a("pages.stars.sort.name")}),s.jsx("option",{value:"distance",children:a("pages.stars.sort.distance")}),s.jsx("option",{value:"planets",children:a("pages.stars.sort.planets")}),s.jsx("option",{value:"temperature",children:a("pages.stars.sort.temperature")})]})]}),(d.length>0||p||i!=="all")&&s.jsx("button",{onClick:R,className:"clear-button",children:a("pages.stars.filters.clearFilters")})]}),s.jsxs("div",{className:"results-info",children:[a(j.length!==1?"pages.stars.results.showing_plural":"pages.stars.results.showing",{start:y+1,end:Math.min(F,j.length),filtered:j.length})," ",a("pages.stars.results.total",{total:x.length})]})]}),P.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"stars-grid",children:P.map(e=>s.jsx("div",{className:"stars-grid-item",children:s.jsx(K,{star:e})},e.id))}),c>1&&s.jsxs("div",{className:"pagination-container",children:[s.jsx("button",{onClick:()=>g(Math.max(1,r-1)),disabled:r===1,className:"pagination-button",children:a("pages.stars.pagination.previous")}),s.jsx("div",{className:"pagination-info",children:a("pages.stars.pagination.pageOf",{current:r,total:c})}),s.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,c)},(e,l)=>{let t=l+1;return c>5&&(r<=3?t=l+1:r>=c-2?t=c-4+l:t=r-2+l),s.jsx("button",{onClick:()=>g(t),className:`pagination-number ${r===t?"active":""}`,children:t},t)})}),s.jsx("button",{onClick:()=>g(Math.min(c,r+1)),disabled:r===c,className:"pagination-button",children:a("pages.stars.pagination.next")})]})]}):s.jsx("div",{className:"placeholder",children:a("pages.stars.results.noResults")})]})}export{U as default};
