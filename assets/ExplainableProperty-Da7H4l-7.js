import{C as B,N as w,r as u,u as F,j as a,U as I}from"./index-Dpijfcqm.js";import{s as C,b as $,g as D,j as G}from"./transform-CuBf05nE.js";function Y(s,n){const i=n*.3-.15;if(s<w.RING_COLOR_THRESHOLD_VERY_COLD)return{hue:.55+i*.1,saturation:.25+n*.15,lightness:.8+n*.1};if(s<w.RING_COLOR_THRESHOLD_COLD)return{hue:.58+i*.08,saturation:.15+n*.1,lightness:.7+n*.1};if(s<w.RING_COLOR_THRESHOLD_COOL){const l=Math.floor(n*3);return l===0?{hue:.08+i,saturation:.35,lightness:.6}:l===1?{hue:.6,saturation:.08+n*.1,lightness:.55}:{hue:.06+i,saturation:.4,lightness:.5}}return s<w.RING_COLOR_THRESHOLD_WARM?{hue:.1+i*.1,saturation:.08+n*.08,lightness:.6+n*.15}:{hue:.08+i*.1,saturation:.1+n*.1,lightness:.55+n*.15}}function X(s,n){const i=Y(s,n),l=new B;return l.setHSL(i.hue,i.saturation,i.lightness),l}function tt(s){const[n,i]=u.useState({width:0,height:0});return u.useLayoutEffect(()=>{const l=s.current;if(!l)return;const m=new ResizeObserver(p=>{if(!p||p.length===0)return;const{width:f,height:h}=p[0].contentRect;i({width:f,height:h})});return m.observe(l),()=>m.unobserve(l)},[s]),n}const v={WALKING_KMS:.0014,CAR_KMS:.03,JET_KMS:.25,VOYAGER_KMS:17,NEW_HORIZONS_KMS:16.26,PARKER_PROBE_KMS:192,LIGHT_1PCT_KMS:2998,LIGHT_10PCT_KMS:29979,LIGHT_SPEED_KMS:299792},V=9461e9,z=80,W=31557600,M=2e3,U=[{key:"walking",speedKms:v.WALKING_KMS,icon:"ğŸš¶",category:"human",color:"#888888"},{key:"car",speedKms:v.CAR_KMS,icon:"ğŸš—",category:"human",color:"#aaaaaa"},{key:"jet",speedKms:v.JET_KMS,icon:"âœˆï¸",category:"human",color:"#cccccc"},{key:"voyager",speedKms:v.VOYAGER_KMS,icon:"ğŸ›°ï¸",category:"spacecraft",color:"#ff6b6b"},{key:"newHorizons",speedKms:v.NEW_HORIZONS_KMS,icon:"ğŸš€",category:"spacecraft",color:"#ffa06b"},{key:"parkerProbe",speedKms:v.PARKER_PROBE_KMS,icon:"â˜€ï¸",category:"spacecraft",color:"#ffcc00"},{key:"onePercentC",speedKms:v.LIGHT_1PCT_KMS,icon:"âš¡",category:"light",color:"#00ccff"},{key:"tenPercentC",speedKms:v.LIGHT_10PCT_KMS,icon:"ğŸ’«",category:"light",color:"#00ffcc"},{key:"lightSpeed",speedKms:v.LIGHT_SPEED_KMS,icon:"ğŸŒŸ",category:"light",color:"#00ff88"}];function J(s,n){return s*V/n/W}function E(s){return s<1?`${(s*365.25).toFixed(1)} days`:s<1e3?`${s.toFixed(0)} years`:s<1e6?`${(s/1e3).toFixed(1)}k years`:s<1e9?`${(s/1e6).toFixed(1)}M years`:s<1e12?`${(s/1e9).toFixed(1)}B years`:`${(s/1e12).toFixed(1)}T years`}function et({distanceLy:s,compact:n=!1}){const{t:i}=F(),l=u.useRef(null),m=u.useRef(null),[p,f]=u.useState(null),[h,S]=u.useState(!1),o=u.useMemo(()=>U.map(c=>{const d=J(s,c.speedKms),K=d<=z;return{...c,years:d,withinLifetime:K}}),[s]),j=u.useMemo(()=>{var c;return((c=o.find(d=>d.withinLifetime))==null?void 0:c.key)||null},[o]);u.useEffect(()=>{if(!l.current||!m.current||!s)return;const c=m.current.clientWidth,d=c<600,K=d?Math.max(300,o.length*35+80):n?300:400,_=d?{top:20,right:30,bottom:60,left:30}:{top:20,right:120,bottom:30,left:n?100:140},R=c-_.left-_.right,b=K-_.top-_.bottom,A=C(l.current);A.selectAll("*").remove(),A.attr("viewBox",`0 0 ${c} ${K}`).attr("preserveAspectRatio","xMidYMid meet").style("max-width","100%").style("height","auto");const x=A.append("g").attr("transform",`translate(${_.left},${_.top})`),P=Math.max(...o.map(t=>t.speedKms)),H=Math.min(...o.map(t=>t.speedKms));let y,g;if(d?(y=$().domain(o.map(t=>t.key)).range([0,R]).padding(.4),g=D().domain([H*.5,P*2]).range([b,0])):(y=D().domain([H*.5,P*2]).range([0,R]),g=$().domain(o.map(t=>t.key)).range([0,b]).padding(.3)),d){const t=y;x.selectAll(".bar-track").data(o).join("rect").attr("class","bar-track").attr("x",e=>t(e.key)||0).attr("y",0).attr("width",t.bandwidth()).attr("height",b).attr("fill","rgba(255, 255, 255, 0.03)").attr("rx",4)}else{const t=g;x.selectAll(".bar-track").data(o).join("rect").attr("class","bar-track").attr("x",0).attr("y",e=>t(e.key)||0).attr("width",R).attr("height",t.bandwidth()).attr("fill","rgba(255, 255, 255, 0.03)").attr("rx",4)}let k;if(d){const t=y;k=x.selectAll(".speed-bar").data(o).join("rect").attr("class","speed-bar").attr("x",e=>t(e.key)||0).attr("width",t.bandwidth()).attr("fill",e=>e.color).attr("rx",4).attr("opacity",.8).attr("cursor","pointer").attr("y",b).attr("height",0)}else{const t=g;k=x.selectAll(".speed-bar").data(o).join("rect").attr("class","speed-bar").attr("x",0).attr("y",e=>t(e.key)||0).attr("height",t.bandwidth()).attr("fill",e=>e.color).attr("rx",4).attr("opacity",.8).attr("cursor","pointer").attr("width",0)}if(h)if(d){const t=g;k.attr("y",e=>t(e.speedKms)).attr("height",e=>b-t(e.speedKms))}else{const t=y;k.attr("width",e=>t(e.speedKms))}else if(d){const t=g;k.transition().duration(M).delay((e,r)=>r*100).ease(G).attr("y",e=>t(e.speedKms)).attr("height",e=>b-t(e.speedKms)).on("end",()=>S(!0))}else{const t=y;k.transition().duration(M).delay((e,r)=>r*100).ease(G).attr("width",e=>t(e.speedKms)).on("end",()=>S(!0))}if(k.on("mouseenter",function(t,e){C(this).attr("opacity",1),f(e.key)}).on("mouseleave",function(){C(this).attr("opacity",.8),f(null)}),d){const t=y;x.selectAll(".speed-icon").data(o).join("text").attr("class","speed-icon").attr("x",e=>(t(e.key)||0)+t.bandwidth()/2).attr("y",b+15).attr("text-anchor","middle").attr("font-size","14px").text(e=>e.icon),x.selectAll(".speed-label").data(o).join("text").attr("class","speed-label").attr("x",e=>(t(e.key)||0)+t.bandwidth()/2).attr("y",b+30).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size","7px").text(e=>i(`components.travelTime.speeds.${e.key}`))}else{const t=g;x.selectAll(".speed-icon").data(o).join("text").attr("class","speed-icon").attr("x",-35).attr("y",e=>(t(e.key)||0)+t.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size",n?"16px":"20px").text(e=>e.icon),x.selectAll(".speed-label").data(o).join("text").attr("class","speed-label").attr("x",-45).attr("y",e=>(t(e.key)||0)+t.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","end").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size",n?"9px":"11px").text(e=>i(`components.travelTime.speeds.${e.key}`))}const T=x.selectAll(".time-label").data(o).join("text").attr("class","time-label").attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size",d?"8px":n?"9px":"11px").attr("font-family","monospace").attr("opacity",0);if(d){const t=y,e=g;h?T.attr("x",r=>(t(r.key)||0)+t.bandwidth()/2).attr("y",r=>e(r.speedKms)-5).attr("text-anchor","middle").attr("opacity",1).text(r=>E(r.years)):T.attr("x",r=>(t(r.key)||0)+t.bandwidth()/2).attr("y",r=>e(r.speedKms)-5).attr("text-anchor","middle").transition().duration(300).delay((r,O)=>M+O*100).attr("opacity",1).text(r=>E(r.years))}else{const t=y,e=g;h?T.attr("x",r=>t(r.speedKms)+8).attr("y",r=>(e(r.key)||0)+e.bandwidth()/2).attr("dy","0.35em").attr("opacity",1).text(r=>E(r.years)):T.attr("y",r=>(e(r.key)||0)+e.bandwidth()/2).attr("dy","0.35em").transition().duration(300).delay((r,O)=>M+O*100).attr("x",r=>t(r.speedKms)+8).attr("opacity",1).text(r=>E(r.years))}const L=o.filter(t=>t.withinLifetime);if(L.length>0){const t=L[L.length-1];if(d){const r=g(t.speedKms)||0;x.append("line").attr("x1",-10).attr("x2",R+10).attr("y1",r).attr("y2",r).attr("stroke","#00ff88").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.6),x.append("text").attr("x",-15).attr("y",r).attr("text-anchor","end").attr("dy","0.35em").attr("fill","#00ff88").attr("font-size","8px").text("âœ“ Lifetime")}else{const r=y(t.speedKms)||0;x.append("line").attr("x1",r).attr("x2",r).attr("y1",-10).attr("y2",b+10).attr("stroke","#00ff88").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.6),x.append("text").attr("x",r).attr("y",-15).attr("text-anchor","middle").attr("fill","#00ff88").attr("font-size","10px").text(i("components.travelTime.reachableInLifetime"))}}},[s,o,i,h,n]);const N=p?o.find(c=>c.key===p):null;return!s||s<=0?a.jsx("div",{className:"travel-time-section",children:a.jsx("p",{className:"travel-unreachable",children:i("components.travelTime.unknownDistance")})}):a.jsxs("div",{className:"travel-time-section",children:[a.jsxs("div",{className:"travel-time-header",children:[a.jsxs("div",{className:"travel-time-distance",children:[a.jsx("span",{className:"distance-value",children:s.toFixed(1)}),a.jsx("span",{className:"distance-label",children:i("components.travelTime.lightYearsAway")})]}),j&&a.jsxs("div",{className:"travel-time-reachable",children:[a.jsx("span",{className:"reachable-icon",children:"âœ“"}),a.jsx("span",{children:i("components.travelTime.reachableAt",{speed:i(`components.travelTime.speeds.${j}`)})})]})]}),a.jsx("div",{ref:m,className:"travel-time-chart",children:a.jsx("svg",{ref:l})}),N&&a.jsxs("div",{className:"travel-time-details",children:[a.jsx("div",{className:"detail-icon",children:N.icon}),a.jsxs("div",{className:"detail-info",children:[a.jsx("span",{className:"detail-name",children:i(`components.travelTime.speeds.${N.key}`)}),a.jsx("span",{className:"detail-time",children:E(N.years)})]}),a.jsx("div",{className:"detail-stats",children:a.jsx("span",{className:`detail-badge ${N.withinLifetime?"reachable":""}`,children:N.withinLifetime?i("components.travelTime.withinLifetime"):i("components.travelTime.lifetimes",{count:Math.ceil(N.years/z)})})})]}),a.jsxs("button",{className:"travel-time-replay",onClick:()=>S(!1),children:["ğŸ”„ ",i("components.travelTime.replayRace")]})]})}function Z({isOpen:s,onClose:n,propertyKey:i,category:l}){const{t:m}=F();if(u.useEffect(()=>{const c=d=>{d.key==="Escape"&&s&&n()};return s&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[s,n]),!s)return null;const p=`propertyExplanations.${l}.${i}`,f=m(`${p}.title`),h=m(`${p}.description`),S=m(`${p}.example`,{defaultValue:""}),o=m(`${p}.technicalNote`,{defaultValue:""}),j=m(`${p}.funFact`,{defaultValue:""});return!f.includes(p)&&!h.includes(p)?I.createPortal(a.jsx("div",{className:"property-dialog-overlay",onClick:n,children:a.jsxs("div",{className:"property-dialog",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"property-dialog-close",onClick:n,"aria-label":"Close dialog",children:"Ã—"}),a.jsx("h3",{className:"property-dialog-title",children:f}),a.jsxs("div",{className:"property-dialog-content",children:[h&&a.jsx("p",{className:"property-dialog-description",children:h}),S&&a.jsxs("div",{className:"property-dialog-example",children:[a.jsx("strong",{children:"Example:"})," ",S]}),o&&a.jsxs("p",{className:"property-dialog-technical",children:[a.jsx("strong",{children:"Technical:"})," ",o]}),j&&a.jsx("div",{className:"property-dialog-fun-fact",children:j})]})]})}),document.body):I.createPortal(a.jsx("div",{className:"property-dialog-overlay",onClick:n,children:a.jsxs("div",{className:"property-dialog",onClick:c=>c.stopPropagation(),children:[a.jsx("button",{className:"property-dialog-close",onClick:n,children:"Ã—"}),a.jsx("h3",{className:"property-dialog-title",children:i.toUpperCase()}),a.jsx("div",{className:"property-dialog-content",children:a.jsx("p",{className:"text-xs text-white/40",children:"No explanation available for this property yet."})})]})}),document.body)}function at({propertyKey:s,category:n,children:i,className:l="",showIcon:m=!1}){const[p,f]=u.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`explainable-property ${l}`,onClick:()=>f(!0),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&f(!0)},children:[i,m&&a.jsx("span",{className:"explainable-icon","aria-hidden":"true",children:"â“˜"}),a.jsx("span",{className:"explainable-underline","aria-hidden":"true"})]}),a.jsx(Z,{isOpen:p,onClose:()=>f(!1),propertyKey:s,category:n})]})}export{at as E,et as T,X as c,tt as u};
