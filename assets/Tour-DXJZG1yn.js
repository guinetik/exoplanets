const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TourHeroBackground-Bc1JmOxG.js","./index-B2LdEqhF.js","./index-DiyCqSjp.css","./react-three-fiber.esm-DM0_awdn.js"])))=>i.map(i=>d[i]);
import{r as p,j as i,u as j,c as v,L as N,aE as E}from"./index-B2LdEqhF.js";import{P as h}from"./PlanetCard-C_A2ZpQr.js";function g(e={}){const{threshold:t=.1,rootMargin:r="0px",triggerOnce:o=!0}=e,n=p.useRef(null),[c,a]=p.useState(!1);return p.useEffect(()=>{const l=n.current;if(!l)return;const d=new IntersectionObserver(([b])=>{b.isIntersecting?(a(!0),o&&d.unobserve(l)):o||a(!1)},{threshold:t,rootMargin:r});return d.observe(l),()=>d.disconnect()},[t,r,o]),{ref:n,isVisible:c}}function m({id:e,chapter:t,title:r,intro:o,children:n}){const{ref:c,isVisible:a}=g({threshold:.2}),{ref:l,isVisible:d}=g({threshold:.1});return i.jsxs("section",{id:e,className:"tour-section",children:[i.jsxs("div",{ref:c,className:`tour-section-header tour-animate ${a?"visible":""}`,children:[i.jsx("span",{className:"tour-chapter-number",children:t}),i.jsx("h2",{className:"tour-section-title",children:r}),i.jsx("p",{className:"tour-section-intro",children:o})]}),i.jsx("div",{ref:l,className:`tour-showcase ${d?"visible":""}`,children:n})]})}function D({sections:e}){const[t,r]=p.useState("");p.useEffect(()=>{const n=new IntersectionObserver(c=>{c.forEach(a=>{a.isIntersecting&&r(a.target.id)})},{rootMargin:"-45% 0px -45% 0px",threshold:0});return e.forEach(({id:c})=>{const a=document.getElementById(c);a&&n.observe(a)}),()=>n.disconnect()},[e]);const o=n=>{const c=document.getElementById(n);c&&c.scrollIntoView({behavior:"smooth"})};return i.jsx("nav",{className:"tour-navigation","aria-label":"Tour sections",children:e.map(({id:n,label:c})=>i.jsx("button",{className:`tour-nav-dot ${t===n?"active":""}`,onClick:()=>o(n),title:c,"aria-label":`Jump to ${c}`},n))})}const I=["Proxima Cen b","TRAPPIST-1 e","Kepler-452 b","51 Peg b","Kepler-16 b","Kepler-186 f"],T={"Proxima Cen b":"proximaCenB","TRAPPIST-1 e":"trappist1e","Kepler-452 b":"kepler452b","51 Peg b":"fiftyOnePegB","Kepler-16 b":"kepler16b","Kepler-186 f":"kepler186f"};function F(e,t){const r=new Map(e.map(n=>[n.pl_name,n])),o=[];return I.forEach(n=>{const c=r.get(n),a=T[n];c&&a&&o.push({...c,tourCategory:"famous",tourDescription:t(`pages.tour.descriptions.famous.${a}`)})}),o}function P(e,t){var n;const r=((n=e.distance_ly)==null?void 0:n.toFixed(1))??"unknown",o=e.planet_type??t("pages.tour.descriptions.common.world");return e.is_habitable_zone?t("pages.tour.descriptions.nearby.habitableZone",{distance:r,type:o}):e.sy_pnum>1?t("pages.tour.descriptions.nearby.multiPlanet",{distance:r,count:e.sy_pnum}):t("pages.tour.descriptions.nearby.default",{distance:r,type:o})}function S(e,t){return e.filter(r=>r.distance_ly!==null&&r.distance_ly>0&&r.distance_ly<50).sort((r,o)=>(r.distance_ly??1/0)-(o.distance_ly??1/0)).slice(0,6).map(r=>({...r,tourCategory:"nearby",tourDescription:P(r,t)}))}function C(e,t){const r=e.habitability_score.toFixed(0),o=[];return e.is_earth_like?o.push(t("pages.tour.descriptions.habitable.traits.earthSized")):e.planet_type&&o.push(e.planet_type),e.is_habitable_zone&&o.push(t("pages.tour.descriptions.habitable.traits.habitableZone")),e.is_sun_like_star?o.push(t("pages.tour.descriptions.habitable.traits.sunLikeStar")):e.is_red_dwarf_host&&o.push(t("pages.tour.descriptions.habitable.traits.redDwarf")),(o.length>0?t("pages.tour.descriptions.habitable.intro",{traits:o.join(", ")}):"")+t("pages.tour.descriptions.habitable.score",{score:r})}function V(e,t){return e.filter(r=>r.is_top_habitable_candidate||r.habitability_score>60).sort((r,o)=>o.habitability_score-r.habitability_score).slice(0,6).map(r=>({...r,tourCategory:"habitable",tourDescription:C(r,t)}))}function $(e,t,r){var o,n,c,a;switch(e){case"ultra_hot":{const l=((o=t.pl_eqt)==null?void 0:o.toFixed(0))??"2000+";return r("pages.tour.descriptions.extreme.ultraHot",{temp:l})}case"puffy":{const l=((n=t.pl_dens)==null?void 0:n.toFixed(2))??r("pages.tour.descriptions.common.veryLow");return r("pages.tour.descriptions.extreme.puffy",{density:l})}case"circumbinary":return r("pages.tour.descriptions.extreme.circumbinary");case"ultra_dense":{const l=((c=t.pl_dens)==null?void 0:c.toFixed(1))??"8+";return r("pages.tour.descriptions.extreme.ultraDense",{density:l})}case"eccentric":{const l=((a=t.pl_orbeccen)==null?void 0:a.toFixed(2))??"0.3+";return r("pages.tour.descriptions.extreme.eccentric",{ecc:l})}default:return""}}function k(e,t){const r=[{flag:"is_ultra_hot",type:"ultra_hot",labelKey:"pages.tour.descriptions.extreme.labels.ultraHot"},{flag:"is_puffy",type:"puffy",labelKey:"pages.tour.descriptions.extreme.labels.puffy"},{flag:"is_circumbinary",type:"circumbinary",labelKey:"pages.tour.descriptions.extreme.labels.circumbinary"},{flag:"is_ultra_dense",type:"ultra_dense",labelKey:"pages.tour.descriptions.extreme.labels.ultraDense"},{flag:"is_eccentric_orbit",type:"eccentric",labelKey:"pages.tour.descriptions.extreme.labels.eccentric"}],o=[];return r.forEach(({flag:n,type:c,labelKey:a})=>{if(o.length>=6)return;e.filter(d=>d[n]===!0).slice(0,o.length<4?2:1).forEach(d=>{o.length<6&&o.push({...d,extremeType:c,extremeLabel:t(a),tourCategory:"extreme",tourDescription:$(c,d,t)})})}),o}function K(e,t){var b,f,_,x,y;const r=[],o=e.filter(s=>s.pl_eqt!==null&&s.pl_eqt>0).sort((s,u)=>(u.pl_eqt??0)-(s.pl_eqt??0))[0];if(o){const s=(b=o.pl_eqt)==null?void 0:b.toFixed(0);r.push({...o,record:t("pages.tour.descriptions.records.labels.hottest"),recordValue:`${s}K`,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.hottest",{temp:s})})}const n=e.filter(s=>s.pl_eqt!==null&&s.pl_eqt>0).sort((s,u)=>(s.pl_eqt??1/0)-(u.pl_eqt??1/0))[0];if(n){const s=(f=n.pl_eqt)==null?void 0:f.toFixed(0),u=((n.pl_eqt??0)-273).toFixed(0);r.push({...n,record:t("pages.tour.descriptions.records.labels.coldest"),recordValue:`${s}K`,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.coldest",{temp:s,tempC:u})})}const c=e.filter(s=>s.pl_orbper!==null&&s.pl_orbper>0).sort((s,u)=>(s.pl_orbper??1/0)-(u.pl_orbper??1/0))[0];if(c){const s=c.pl_orbper,u=s<1?t("pages.tour.descriptions.common.hours",{value:(s*24).toFixed(1)}):t("pages.tour.descriptions.common.days",{value:s.toFixed(2)});r.push({...c,record:t("pages.tour.descriptions.records.labels.fastest"),recordValue:u,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.fastest",{period:u})})}const a=e.filter(s=>s.pl_radj!==null&&s.pl_radj>0).sort((s,u)=>(u.pl_radj??0)-(s.pl_radj??0))[0];if(a){const s=(_=a.pl_radj)==null?void 0:_.toFixed(1);r.push({...a,record:t("pages.tour.descriptions.records.labels.largest"),recordValue:`${s} R♃`,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.largest",{radius:s})})}const l=e.filter(s=>s.pl_rade!==null&&s.pl_rade>0).sort((s,u)=>(s.pl_rade??1/0)-(u.pl_rade??1/0))[0];if(l){const s=(x=l.pl_rade)==null?void 0:x.toFixed(2);r.push({...l,record:t("pages.tour.descriptions.records.labels.smallest"),recordValue:`${s} R⊕`,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.smallest",{radius:s})})}const d=e.filter(s=>s.st_age!==null&&s.st_age>0).sort((s,u)=>(u.st_age??0)-(s.st_age??0))[0];if(d){const s=(y=d.st_age)==null?void 0:y.toFixed(1);r.push({...d,record:t("pages.tour.descriptions.records.labels.oldest"),recordValue:`${s} Gyr`,tourCategory:"record",tourDescription:t("pages.tour.descriptions.records.oldest",{age:s})})}return r.slice(0,6)}function R(e,t){return{famous:F(e,t),nearest:S(e,t),habitable:V(e,t),extreme:k(e,t),records:K(e,t)}}const q=p.lazy(()=>E(()=>import("./TourHeroBackground-Bc1JmOxG.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),w=[{id:"famous",label:"Famous Worlds"},{id:"nearest",label:"Nearest Neighbors"},{id:"habitable",label:"Most Habitable"},{id:"extreme",label:"Extreme Worlds"},{id:"records",label:"Record Breakers"}];function L(){const{t:e}=j(),{getAllPlanets:t,isLoading:r}=v(),o=p.useMemo(()=>{if(r)return null;const a=t();return R(a,e)},[r,t,e]),{ref:n,isVisible:c}=g({threshold:.3});return r||!o?i.jsx("div",{className:"tour-page",children:i.jsx("div",{className:"tour-hero",children:i.jsx("div",{className:"spinner"})})}):i.jsxs("div",{className:"tour-page",children:[i.jsxs("header",{ref:n,className:`tour-hero ${c?"visible":""}`,children:[i.jsx(p.Suspense,{fallback:null,children:i.jsx(q,{})}),i.jsxs("div",{className:"tour-hero-content",children:[i.jsx("h1",{className:"tour-hero-title",children:e("pages.tour.title")}),i.jsx("p",{className:"tour-hero-subtitle",children:e("pages.tour.subtitle")})]}),i.jsxs("div",{className:"tour-hero-scroll",children:[i.jsx("span",{className:"tour-hero-scroll-hint",children:e("pages.tour.scrollHint")}),i.jsx("div",{className:"tour-hero-scroll-arrow",children:"↓"})]})]}),i.jsx(D,{sections:w}),i.jsx(m,{id:"famous",chapter:e("pages.tour.sections.famous.chapter"),title:e("pages.tour.sections.famous.title"),intro:e("pages.tour.sections.famous.intro"),children:i.jsx("div",{className:"tour-planets-grid",children:o.famous.map(a=>i.jsx("div",{className:"planets-grid-item",children:i.jsx(h,{planet:a})},a.pl_name))})}),i.jsx(m,{id:"nearest",chapter:e("pages.tour.sections.nearest.chapter"),title:e("pages.tour.sections.nearest.title"),intro:e("pages.tour.sections.nearest.intro"),children:i.jsx("div",{className:"tour-planets-grid",children:o.nearest.map(a=>i.jsx("div",{className:"planets-grid-item",children:i.jsx(h,{planet:a})},a.pl_name))})}),i.jsx(m,{id:"habitable",chapter:e("pages.tour.sections.habitable.chapter"),title:e("pages.tour.sections.habitable.title"),intro:e("pages.tour.sections.habitable.intro"),children:i.jsx("div",{className:"tour-planets-grid",children:o.habitable.map(a=>i.jsx("div",{className:"planets-grid-item",children:i.jsx(h,{planet:a})},a.pl_name))})}),i.jsx(m,{id:"extreme",chapter:e("pages.tour.sections.extreme.chapter"),title:e("pages.tour.sections.extreme.title"),intro:e("pages.tour.sections.extreme.intro"),children:i.jsx("div",{className:"tour-planets-grid",children:o.extreme.map(a=>i.jsx("div",{className:"planets-grid-item",children:i.jsx(h,{planet:a})},`${a.pl_name}-${a.extremeType}`))})}),i.jsx(m,{id:"records",chapter:e("pages.tour.sections.records.chapter"),title:e("pages.tour.sections.records.title"),intro:e("pages.tour.sections.records.intro"),children:i.jsx("div",{className:"tour-planets-grid",children:o.records.map(a=>i.jsx("div",{className:"planets-grid-item",children:i.jsx(h,{planet:a})},`${a.pl_name}-${a.record}`))})}),i.jsxs("footer",{className:"tour-footer",children:[i.jsx("h2",{className:"tour-footer-title",children:e("pages.tour.footer.title")}),i.jsx(N,{to:"/planets",className:"tour-footer-cta",children:e("pages.tour.footer.cta")})]})]})}export{L as default};
