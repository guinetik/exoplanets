function O(t,n){let i;if(n===void 0)for(const e of t)e!=null&&(i>e||i===void 0&&e>=e)&&(i=e);else{let e=-1;for(let s of t)(s=n(s,++e,t))!=null&&(i>s||i===void 0&&s>=s)&&(i=s)}return i}const E=Math.PI,T=2*E,M=1e-6,R=T-M;function L(t){this._+=t[0];for(let n=1,i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function Y(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return L;const i=10**n;return function(e){this._+=e[0];for(let s=1,r=e.length;s<r;++s)this._+=Math.round(arguments[s]*i)/i+e[s]}}class Z{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?L:Y(n)}moveTo(n,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,i){this._append`L${this._x1=+n},${this._y1=+i}`}quadraticCurveTo(n,i,e,s){this._append`Q${+n},${+i},${this._x1=+e},${this._y1=+s}`}bezierCurveTo(n,i,e,s,r,c){this._append`C${+n},${+i},${+e},${+s},${this._x1=+r},${this._y1=+c}`}arcTo(n,i,e,s,r){if(n=+n,i=+i,e=+e,s=+s,r=+r,r<0)throw new Error(`negative radius: ${r}`);let c=this._x1,h=this._y1,l=e-n,u=s-i,_=c-n,o=h-i,f=_*_+o*o;if(this._x1===null)this._append`M${this._x1=n},${this._y1=i}`;else if(f>M)if(!(Math.abs(o*l-u*_)>M)||!r)this._append`L${this._x1=n},${this._y1=i}`;else{let p=e-c,d=s-h,g=l*l+u*u,$=p*p+d*d,m=Math.sqrt(g),v=Math.sqrt(f),b=r*Math.tan((E-Math.acos((g+f-$)/(2*m*v)))/2),x=b/v,k=b/m;Math.abs(x-1)>M&&this._append`L${n+x*_},${i+x*o}`,this._append`A${r},${r},0,0,${+(o*p>_*d)},${this._x1=n+k*l},${this._y1=i+k*u}`}}arc(n,i,e,s,r,c){if(n=+n,i=+i,e=+e,c=!!c,e<0)throw new Error(`negative radius: ${e}`);let h=e*Math.cos(s),l=e*Math.sin(s),u=n+h,_=i+l,o=1^c,f=c?s-r:r-s;this._x1===null?this._append`M${u},${_}`:(Math.abs(this._x1-u)>M||Math.abs(this._y1-_)>M)&&this._append`L${u},${_}`,e&&(f<0&&(f=f%T+T),f>R?this._append`A${e},${e},0,1,${o},${n-h},${i-l}A${e},${e},0,1,${o},${this._x1=u},${this._y1=_}`:f>M&&this._append`A${e},${e},0,${+(f>=E)},${o},${this._x1=n+e*Math.cos(r)},${this._y1=i+e*Math.sin(r)}`)}rect(n,i,e,s){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+i}h${e=+e}v${+s}h${-e}Z`}toString(){return this._}}function a(t){return function(){return t}}function P(t){let n=3;return t.digits=function(i){if(!arguments.length)return n;if(i==null)n=null;else{const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);n=e}return t},()=>new Z(n)}function z(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function C(t){this._context=t}C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function X(t){return new C(t)}function j(t){return t[0]}function q(t){return t[1]}function I(t,n){var i=a(!0),e=null,s=X,r=null,c=P(h);t=typeof t=="function"?t:t===void 0?j:a(t),n=typeof n=="function"?n:n===void 0?q:a(n);function h(l){var u,_=(l=z(l)).length,o,f=!1,p;for(e==null&&(r=s(p=c())),u=0;u<=_;++u)!(u<_&&i(o=l[u],u,l))===f&&((f=!f)?r.lineStart():r.lineEnd()),f&&r.point(+t(o,u,l),+n(o,u,l));if(p)return r=null,p+""||null}return h.x=function(l){return arguments.length?(t=typeof l=="function"?l:a(+l),h):t},h.y=function(l){return arguments.length?(n=typeof l=="function"?l:a(+l),h):n},h.defined=function(l){return arguments.length?(i=typeof l=="function"?l:a(!!l),h):i},h.curve=function(l){return arguments.length?(s=l,e!=null&&(r=s(e)),h):s},h.context=function(l){return arguments.length?(l==null?e=r=null:r=s(e=l),h):e},h}function Q(t,n,i){var e=null,s=a(!0),r=null,c=X,h=null,l=P(u);t=typeof t=="function"?t:t===void 0?j:a(+t),n=typeof n=="function"?n:a(n===void 0?0:+n),i=typeof i=="function"?i:i===void 0?q:a(+i);function u(o){var f,p,d,g=(o=z(o)).length,$,m=!1,v,b=new Array(g),x=new Array(g);for(r==null&&(h=c(v=l())),f=0;f<=g;++f){if(!(f<g&&s($=o[f],f,o))===m)if(m=!m)p=f,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),d=f-1;d>=p;--d)h.point(b[d],x[d]);h.lineEnd(),h.areaEnd()}m&&(b[f]=+t($,f,o),x[f]=+n($,f,o),h.point(e?+e($,f,o):b[f],i?+i($,f,o):x[f]))}if(v)return h=null,v+""||null}function _(){return I().defined(s).curve(c).context(r)}return u.x=function(o){return arguments.length?(t=typeof o=="function"?o:a(+o),e=null,u):t},u.x0=function(o){return arguments.length?(t=typeof o=="function"?o:a(+o),u):t},u.x1=function(o){return arguments.length?(e=o==null?null:typeof o=="function"?o:a(+o),u):e},u.y=function(o){return arguments.length?(n=typeof o=="function"?o:a(+o),i=null,u):n},u.y0=function(o){return arguments.length?(n=typeof o=="function"?o:a(+o),u):n},u.y1=function(o){return arguments.length?(i=o==null?null:typeof o=="function"?o:a(+o),u):i},u.lineX0=u.lineY0=function(){return _().x(t).y(n)},u.lineY1=function(){return _().x(t).y(i)},u.lineX1=function(){return _().x(e).y(n)},u.defined=function(o){return arguments.length?(s=typeof o=="function"?o:a(!!o),u):s},u.curve=function(o){return arguments.length?(c=o,r!=null&&(h=c(r)),u):c},u.context=function(o){return arguments.length?(o==null?r=h=null:h=c(r=o),u):r},u}function S(t){return t<0?-1:1}function N(t,n,i){var e=t._x1-t._x0,s=n-t._x1,r=(t._y1-t._y0)/(e||s<0&&-0),c=(i-t._y1)/(s||e<0&&-0),h=(r*s+c*e)/(e+s);return(S(r)+S(c))*Math.min(Math.abs(r),Math.abs(c),.5*Math.abs(h))||0}function A(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n}function w(t,n,i){var e=t._x0,s=t._y0,r=t._x1,c=t._y1,h=(r-e)/3;t._context.bezierCurveTo(e+h,s+h*n,r-h,c-h*i,r,c)}function y(t){this._context=t}y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:w(this,this._t0,A(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var i=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,w(this,A(this,i=N(this,t,n)),i);break;default:w(this,this._t0,i=N(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i}}};Object.create(y.prototype).point=function(t,n){y.prototype.point.call(this,n,t)};function B(t){return new y(t)}export{Q as a,B as b,a as c,z as d,I as l,O as m,P as w};
