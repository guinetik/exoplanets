import{u as ie,c as ce,e as oe,r as n,j as s,S as he}from"./index-9Wcf8Asn.js";import{P as de}from"./PlanetCard--_zUatHV.js";const M=24;function me(){const{t:a}=ie(),{getAllPlanets:P,isLoading:Y,error:O}=ce(),[i,T]=oe(),[f,w]=n.useState(i.get("sort")||"name"),[d,E]=n.useState(i.get("types")?i.get("types").split(","):[]),[p,H]=n.useState(i.get("classes")?i.get("classes").split(","):[]),[g,L]=n.useState(i.get("search")||""),[x,z]=n.useState(i.get("habitable")==="true"),[b,F]=n.useState(i.get("earthlike")==="true"),[j,I]=n.useState(i.get("eccentric")==="true"),[y,q]=n.useState(i.get("circumbinary")==="true"),[u,A]=n.useState(i.get("method")||"all"),[v,R]=n.useState(i.get("ultrahot")==="true"),[N,U]=n.useState(i.get("frozen")==="true"),[$,_]=n.useState(parseInt(i.get("page")||"1",10)),m=n.useMemo(()=>P(),[P]),Q=n.useMemo(()=>{const e=new Set;return m.forEach(l=>{l.planet_type&&e.add(l.planet_type)}),Array.from(e).sort()},[m]),W=n.useMemo(()=>{const e=new Set;return m.forEach(l=>{l.star_class&&e.add(l.star_class)}),Array.from(e).sort()},[m]),k=n.useMemo(()=>{let e=m;if(d.length>0&&(e=e.filter(t=>t.planet_type&&d.includes(t.planet_type))),p.length>0&&(e=e.filter(t=>t.star_class&&p.includes(t.star_class))),x&&(e=e.filter(t=>t.is_habitable_zone)),b&&(e=e.filter(t=>t.is_earth_like)),j&&(e=e.filter(t=>t.is_eccentric_orbit)),y&&(e=e.filter(t=>t.is_circumbinary)),u!=="all"&&(e=e.filter(t=>{const r=t.has_rv_data,S=t.is_transiting;switch(u){case"rv":return r&&!S;case"transit":return S&&!r;case"both":return r&&S;default:return!0}})),v&&(e=e.filter(t=>t.is_ultra_hot)),N&&(e=e.filter(t=>t.is_frozen_world)),g){const t=g.toLowerCase();e=e.filter(r=>r.pl_name.toLowerCase().includes(t)||r.hostname.toLowerCase().includes(t))}return[...e].sort((t,r)=>{switch(f){case"distance":return(t.distance_ly??1/0)-(r.distance_ly??1/0);case"mass":return(r.pl_bmasse??0)-(t.pl_bmasse??0);case"radius":return(r.pl_rade??0)-(t.pl_rade??0);case"discoveryYear":return r.disc_year-t.disc_year;case"habitability":const S=t.habitability_score??0;return(r.habitability_score??0)-S;case"temperatureHot":return(r.pl_eqt??0)-(t.pl_eqt??0);case"temperatureCold":return(t.pl_eqt??1/0)-(r.pl_eqt??1/0);case"name":default:return t.pl_name.localeCompare(r.pl_name)}})},[m,d,p,x,b,j,y,u,v,N,g,f]),h=Math.ceil(k.length/M),c=Math.min(Math.max(1,$),h||1),C=(c-1)*M,B=C+M,D=k.slice(C,B);n.useEffect(()=>{const e=new URLSearchParams;f!=="name"&&e.set("sort",f),d.length>0&&e.set("types",d.join(",")),p.length>0&&e.set("classes",p.join(",")),g&&e.set("search",g),x&&e.set("habitable","true"),b&&e.set("earthlike","true"),j&&e.set("eccentric","true"),y&&e.set("circumbinary","true"),u!=="all"&&e.set("method",u),v&&e.set("ultrahot","true"),N&&e.set("frozen","true"),c!==1&&e.set("page",String(c)),T(e,{replace:!0})},[f,d,p,g,x,b,j,y,u,v,N,c,T]);const o=()=>{_(1)},G=e=>{E(l=>l.includes(e)?l.filter(t=>t!==e):[...l,e]),o()},J=e=>{H(l=>l.includes(e)?l.filter(t=>t!==e):[...l,e]),o()},K=e=>{L(e),o()},V=e=>{w(e),o()},X=()=>{z(e=>!e),o()},Z=()=>{F(e=>!e),o()},ee=()=>{I(e=>!e),o()},se=()=>{q(e=>!e),o()},te=e=>{A(e),o()},ae=()=>{R(e=>!e),o()},le=()=>{U(e=>!e),o()},ne=()=>{E([]),H([]),L(""),z(!1),F(!1),I(!1),q(!1),A("all"),R(!1),U(!1),w("name"),_(1)};if(Y)return s.jsx(he,{message:a("pages.planets.loading")});if(O)return s.jsx("div",{className:"error-container",children:s.jsxs("div",{className:"error-content",children:[s.jsx("h1",{className:"error-title",children:a("pages.planets.errorTitle")}),s.jsx("p",{className:"error-message",children:O})]})});const re=d.length>0||p.length>0||g||x||b||j||y||u!=="all"||v||N;return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"page-title",children:a("pages.planets.title")}),s.jsxs("div",{className:"planets-controls",children:[s.jsx("div",{className:"search-bar",children:s.jsx("input",{type:"text",placeholder:a("pages.planets.searchPlaceholder"),value:g,onChange:e=>K(e.target.value),className:"search-input"})}),s.jsxs("div",{className:"controls-row",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.planets.filters.planetType")}),s.jsx("div",{className:"type-buttons",children:Q.map(e=>s.jsx("button",{onClick:()=>G(e),className:`type-button ${d.includes(e)?"active":""}`,children:e},e))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.planets.filters.starClass")}),s.jsx("div",{className:"class-buttons",children:W.map(e=>s.jsx("button",{onClick:()=>J(e),className:`class-button ${p.includes(e)?"active":""}`,children:e},e))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.planets.filters.discoveryMethod")}),s.jsxs("select",{value:u,onChange:e=>te(e.target.value),className:"sort-select",children:[s.jsx("option",{value:"all",children:a("pages.planets.filters.discoveryMethods.all")}),s.jsx("option",{value:"transit",children:a("pages.planets.filters.discoveryMethods.transit")}),s.jsx("option",{value:"rv",children:a("pages.planets.filters.discoveryMethods.rv")}),s.jsx("option",{value:"both",children:a("pages.planets.filters.discoveryMethods.both")})]})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:a("pages.planets.filters.sortBy")}),s.jsxs("select",{value:f,onChange:e=>V(e.target.value),className:"sort-select",children:[s.jsx("option",{value:"name",children:a("pages.planets.sort.name")}),s.jsx("option",{value:"distance",children:a("pages.planets.sort.distance")}),s.jsx("option",{value:"mass",children:a("pages.planets.sort.mass")}),s.jsx("option",{value:"radius",children:a("pages.planets.sort.radius")}),s.jsx("option",{value:"discoveryYear",children:a("pages.planets.sort.discoveryYear")}),s.jsx("option",{value:"habitability",children:a("pages.planets.sort.habitability")}),s.jsx("option",{value:"temperatureHot",children:"Temperature (Hottest)"}),s.jsx("option",{value:"temperatureCold",children:"Temperature (Coldest)"})]})]})]}),s.jsxs("div",{className:"toggle-filters",children:[s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:x,onChange:X,className:"toggle-checkbox"}),s.jsx("span",{children:a("pages.planets.filters.habitableOnly")})]}),s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:Z,className:"toggle-checkbox"}),s.jsx("span",{children:a("pages.planets.filters.earthLikeOnly")})]}),s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:ee,className:"toggle-checkbox"}),s.jsx("span",{children:a("pages.planets.filters.eccentricOnly")})]}),s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:se,className:"toggle-checkbox"}),s.jsx("span",{children:a("pages.planets.filters.circumbinaryOnly")})]}),s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:ae,className:"toggle-checkbox"}),s.jsx("span",{children:"Ultra Hot Worlds"})]}),s.jsxs("label",{className:"toggle-filter",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:le,className:"toggle-checkbox"}),s.jsx("span",{children:"Frozen Worlds"})]})]}),re&&s.jsx("button",{onClick:ne,className:"clear-button",children:a("pages.planets.filters.clearFilters")}),s.jsxs("div",{className:"results-info",children:[a(k.length!==1?"pages.planets.results.showing_plural":"pages.planets.results.showing",{start:C+1,end:Math.min(B,k.length),filtered:k.length})," ",a("pages.planets.results.total",{total:m.length})]})]}),D.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"planets-grid",children:D.map(e=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(de,{planet:e})},e.pl_name))}),h>1&&s.jsxs("div",{className:"pagination-container",children:[s.jsx("button",{onClick:()=>_(Math.max(1,c-1)),disabled:c===1,className:"pagination-button",children:a("pages.planets.pagination.previous")}),s.jsx("div",{className:"pagination-info",children:a("pages.planets.pagination.pageOf",{current:c,total:h})}),s.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,h)},(e,l)=>{let t=l+1;return h>5&&(c<=3?t=l+1:c>=h-2?t=h-4+l:t=c-2+l),s.jsx("button",{onClick:()=>_(t),className:`pagination-number ${c===t?"active":""}`,children:t},t)})}),s.jsx("button",{onClick:()=>_(Math.min(h,c+1)),disabled:c===h,className:"pagination-button",children:a("pages.planets.pagination.next")})]})]}):s.jsx("div",{className:"placeholder",children:a("pages.planets.results.noResults")})]})}export{me as default};
