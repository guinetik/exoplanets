import{r as m,j as t,l as Kt,m as Ct,w as Pt,k as Dt,H as Lt,I as It,J as Vt,K as Ot,s as it,D as Ht,u as O,N as Bt,n as ht,O as Z,P as Ut,R as Wt,T as Gt,L as pt,U as qt,G as Yt,e as Zt,d as Xt,S as Jt}from"./index-agfWtMau.js";import{C as Qt,a as te}from"./react-three-fiber.esm-5J2Felbe.js";import{c as ee,E as T,u as ae,T as se}from"./ExplainableProperty-1kP7emX1.js";import{O as re,s as H,d as lt,m as nt,e as tt,f as et,g as kt,b as Rt}from"./transform-DUNKWzO3.js";import{r as ut,u as gt}from"./reviewService-C0bxutLt.js";import{U as ie}from"./UserPrompt-k2xIPApm.js";import{m as ne,l as St,a as vt,b as le}from"./monotone-CvAkBM_g.js";import{c as oe,S as ce}from"./seo-CvLMoO3_.js";function bt(e,a,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+a)/6,(e._y0+4*e._y1+s)/6)}function Mt(e){this._context=e}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,a){switch(e=+e,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bt(this,e,a);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=a}};function ot(e){return new Mt(e)}function yt(e,a,s,n=.5){return e==null||isNaN(e)?n:Math.max(0,Math.min(1,(e-a)/(s-a)))}function zt(e,a,s){return Math.max(a,Math.min(s,e))}function jt(e){const a=zt(e,0,1);return a*a*(3-2*a)}function de({count:e=2e3}){const a=m.useMemo(()=>{const s=new Float32Array(e*3);for(let n=0;n<e;n++){const o=Math.random()*Math.PI*2,r=Math.acos(2*Math.random()-1),p=200;s[n*3]=p*Math.sin(r)*Math.cos(o),s[n*3+1]=p*Math.sin(r)*Math.sin(o),s[n*3+2]=p*Math.cos(r)}return s},[e]);return t.jsxs("points",{children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:a,itemSize:3})}),t.jsx("pointsMaterial",{size:1.2,color:16777215,transparent:!0,opacity:.5,sizeAttenuation:!1})]})}function pe(e){let a=0;for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);a=(a<<5)-a+n,a=a&a}return Math.abs(a%1e3)/1e3}function me({planet:e}){const a=m.useRef(null),s=m.useRef(null),n=m.useRef(null),o=m.useRef(null),r=m.useMemo(()=>Kt(e),[e]),p=m.useMemo(()=>Ct(r),[r]),x=m.useMemo(()=>Pt("v2"),[]),N=m.useMemo(()=>Dt({planet:e,detailLevel:"detailed",starTemp:e.st_teff??void 0}),[e]),h=m.useMemo(()=>Lt(e),[e]),_=m.useMemo(()=>It(e),[e]),w=e.is_likely_tidally_locked??!1,j=m.useMemo(()=>{const F=pe(e.pl_name),M=yt(e.pl_dens,.3,13,.5),S=yt(e.pl_insol,.01,1e4,.5),u=Vt(e).temperatureK,c=ee(u,F);return{uBaseColor:{value:c},uRingColor:{value:c},uTime:{value:0},uSeed:{value:F},uDensity:{value:M},uInsolation:{value:S},uInnerRadius:{value:2.5},uOuterRadius:{value:4}}},[e]);te((F,M)=>{a.current&&(a.current.rotation.x=_,w?a.current.rotation.y+=M*.02:a.current.rotation.y+=M*h);const S=F.clock.elapsedTime;n.current&&(n.current.uniforms.uTime.value=S),o.current&&(o.current.uniforms.uTime.value=S)});const k=m.useMemo(()=>Ot(e),[e]),C=m.useMemo(()=>Math.PI/2,[]);return t.jsx("group",{position:[0,.2,0],children:t.jsxs("group",{ref:a,children:[t.jsxs("mesh",{ref:s,children:[t.jsx("sphereGeometry",{args:[2,64,64]}),t.jsx("shaderMaterial",{ref:n,vertexShader:it.get(x),fragmentShader:it.get(p),uniforms:N})]}),k&&t.jsxs("mesh",{rotation:[C,0,0],children:[t.jsx("ringGeometry",{args:[2.5,4,128,1]}),t.jsx("shaderMaterial",{ref:o,vertexShader:it.get("ringsVert"),fragmentShader:it.get("ringsFrag"),uniforms:j,transparent:!0,side:Ht,depthWrite:!1})]})]})})}function he({planet:e}){return t.jsx(Qt,{camera:{position:[0,0,9],fov:50},style:{background:"transparent"},children:t.jsxs(m.Suspense,{fallback:null,children:[t.jsx("ambientLight",{intensity:.4}),t.jsx("hemisphereLight",{args:["#ffffff","#444444",.4]}),t.jsx("directionalLight",{position:[5,3,5],intensity:1}),t.jsx(de,{count:2e3}),t.jsx(me,{planet:e}),t.jsx(re,{enablePan:!1,enableZoom:!1,autoRotate:!0,autoRotateSpeed:.5})]})})}const fe={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};function Tt({rating:e,onChange:a,readonly:s=!1,size:n="md"}){const o=fe[n],r=x=>{!s&&a&&a(x)},p=(x,N)=>{!s&&a&&(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),a(x))};return t.jsx("div",{className:`star-rating ${s?"star-rating-readonly":"star-rating-interactive"}`,children:[1,2,3,4,5].map(x=>t.jsx("button",{type:"button",className:`star-rating-star ${e>=x?"filled":"empty"}`,onClick:()=>r(x),onKeyDown:N=>p(x,N),disabled:s,"aria-label":`${x} star${x!==1?"s":""}`,tabIndex:s?-1:0,children:t.jsx("svg",{className:o,fill:e>=x?"#faca15":"#4b5563",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},x))})}function xe(e){const a=Date.now(),s=365.25*24*60*60*1e3,n=(a-e)/s;if(n>1e3){const r=Math.round(n);if(r>=1e6)return`~${(r/1e6).toFixed(1)}M years ago`;if(r>=1e3)return`~${(r/1e3).toFixed(1)}k years ago`}return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function ue({review:e}){const a=e.author;return t.jsxs("article",{className:"review-card",children:[t.jsxs("header",{className:"review-header",children:[t.jsx("img",{className:"review-avatar",src:(a==null?void 0:a.avatar)||`https://api.dicebear.com/7.x/bottts-neutral/svg?seed=${e.userid}`,alt:`${(a==null?void 0:a.name)||"Unknown"}'s avatar`}),t.jsxs("div",{className:"review-author-info",children:[t.jsx("span",{className:"review-author-name",children:(a==null?void 0:a.name)||"Unknown Traveler"}),t.jsx("time",{className:"review-date",children:xe(e.date)})]})]}),t.jsxs("div",{className:"review-rating-row",children:[t.jsx(Tt,{rating:e.rate,readonly:!0,size:"sm"}),t.jsx("h3",{className:"review-title",children:e.title})]}),t.jsx("p",{className:"review-text",children:e.text})]})}function ge({reviews:e,loading:a}){const{t:s}=O();return a?t.jsxs("div",{className:"reviews-loading",children:[t.jsx("div",{className:"reviews-loading-spinner"}),t.jsx("span",{children:s("common.loading")})]}):e.length===0?t.jsx("div",{className:"reviews-empty",children:t.jsx("p",{children:s("pages.planet.info.reviews.empty")})}):t.jsx("div",{className:"reviews-list",children:e.map(n=>t.jsx(ue,{review:n},n.id))})}function ve({user:e,onSubmit:a,onClose:s}){const{t:n}=O(),[o,r]=m.useState(4),[p,x]=m.useState(""),[N,h]=m.useState(""),[_,w]=m.useState(!1),[j,k]=m.useState({}),C=()=>{const S={};return p.trim().length<3&&(S.title=n("pages.planet.info.reviews.form.errorTitleMin")),N.trim().length<10&&(S.text=n("pages.planet.info.reviews.form.errorTextMin")),k(S),Object.keys(S).length===0},F=async S=>{if(S.preventDefault(),!!C()){w(!0);try{await a({rate:o,title:p.trim(),text:N.trim()})}finally{w(!1)}}},M=S=>{S.target===S.currentTarget&&!_&&s()};return t.jsx("div",{className:"review-form-overlay",onClick:M,children:t.jsxs("div",{className:"review-form-modal",children:[t.jsx("button",{className:"review-form-close",onClick:s,disabled:_,"aria-label":"Close",children:"Ã—"}),t.jsx("h2",{className:"review-form-title",children:n("pages.planet.info.reviews.form.title")}),t.jsxs("div",{className:"review-form-user",children:[t.jsx("img",{src:e.avatar,alt:e.name,className:"review-form-avatar"}),t.jsx("span",{className:"review-form-username",children:e.name})]}),t.jsxs("form",{onSubmit:F,className:"review-form",children:[t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{className:"review-form-label",children:n("pages.planet.info.reviews.form.ratingLabel")}),t.jsx(Tt,{rating:o,onChange:r,size:"lg"})]}),t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{htmlFor:"review-title",className:"review-form-label",children:n("pages.planet.info.reviews.form.titleLabel")}),t.jsx("input",{id:"review-title",type:"text",className:`review-form-input ${j.title?"error":""}`,placeholder:n("pages.planet.info.reviews.form.titlePlaceholder"),value:p,onChange:S=>{x(S.target.value),j.title&&k({...j,title:void 0})},disabled:_,maxLength:100}),j.title&&t.jsx("span",{className:"review-form-error",children:j.title})]}),t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{htmlFor:"review-text",className:"review-form-label",children:n("pages.planet.info.reviews.form.textLabel")}),t.jsx("textarea",{id:"review-text",className:`review-form-textarea ${j.text?"error":""}`,placeholder:n("pages.planet.info.reviews.form.textPlaceholder"),value:N,onChange:S=>{h(S.target.value),j.text&&k({...j,text:void 0})},disabled:_,rows:4,maxLength:1e3}),j.text&&t.jsx("span",{className:"review-form-error",children:j.text})]}),t.jsx("button",{type:"submit",className:"review-form-submit",disabled:_,children:n(_?"common.loading":"pages.planet.info.reviews.form.submit")})]})]})})}function be({planetId:e}){const{t:a}=O(),{profile:s,loading:n}=Bt(),[o,r]=m.useState([]),[p,x]=m.useState(!0),[N,h]=m.useState(!1),[_,w]=m.useState(!1),[j,k]=m.useState(null),C=s||j,F=m.useCallback(async()=>{x(!0);try{const c=await ut.getReviews(e);r(c)}finally{x(!1)}},[e]);m.useEffect(()=>{F()},[F]),m.useEffect(()=>{const c=gt.getUser();c&&k(c)},[]);const M=()=>{C?h(!0):w(!0)},S=c=>{const g=gt.createUser(c);k(g),w(!1),h(!0)},D=()=>{w(!1),s&&h(!0)},u=async c=>{C&&(await ut.createReview({planet:e,userid:C.uid,rate:c.rate,title:c.title,text:c.text},C),h(!1),await F())};return n?t.jsx("div",{className:"reviews-section",children:t.jsx("div",{className:"reviews-loading",children:"Loading..."})}):t.jsxs("div",{className:"reviews-section",children:[t.jsx("div",{className:"reviews-header",children:t.jsx("button",{className:"reviews-write-button",onClick:M,children:a("pages.planet.info.reviews.writeReview")})}),t.jsx(ge,{reviews:o,loading:p}),_&&t.jsx(ie,{onSubmit:S,onClose:D}),N&&C&&t.jsx(ve,{user:C,onSubmit:u,onClose:()=>h(!1)})]})}function ct({propertyKey:e,category:a,label:s,value:n,earthRef:o,className:r=""}){const p=o?`${o.label}: ${o.value} ${o.unit}`:void 0;return t.jsxs("div",{className:`planet-property-row ${r}`,title:p,children:[t.jsxs("span",{className:"planet-property-label",children:[t.jsx(T,{propertyKey:e,category:a,className:"inline",children:s}),o&&t.jsx("span",{className:"earth-indicator",title:p,"aria-label":"Earth reference value available",children:"ðŸŒ"})]}),t.jsx("span",{className:"planet-property-value",children:t.jsx(T,{propertyKey:e,category:a,className:"inline",children:n})})]})}const Nt={pl_rade:{value:1,unit:"RâŠ•",labelKey:"earthRadius"},pl_bmasse:{value:1,unit:"MâŠ•",labelKey:"earthMass"},pl_dens:{value:5.51,unit:"g/cmÂ³",labelKey:"earthDensity"},pl_eqt:{value:255,unit:"K",labelKey:"earthEqTemp"},pl_insol:{value:1,unit:"SâŠ•",labelKey:"earthInsolation"},pl_orbper:{value:365.25,unit:"days",labelKey:"earthOrbitalPeriod"},pl_orbsmax:{value:1,unit:"AU",labelKey:"earthSemiMajorAxis"},pl_orbeccen:{value:.017,unit:"",labelKey:"earthOrbitalEccentricity"},st_teff:{value:5778,unit:"K",labelKey:"sunTemperature"},st_met:{value:0,unit:"dex",labelKey:"sunMetallicity"},st_age:{value:4.6,unit:"Gyr",labelKey:"sunAge"}},ye=[{id:"hostname",labelKey:"hostStar",format:e=>e.hostname},{id:"planet_type",labelKey:"planetType",format:(e,a)=>e.planet_type||a},{id:"pl_rade",labelKey:"radius",format:(e,a)=>e.pl_rade?`${e.pl_rade.toFixed(2)} RâŠ•`:a,earthRef:"pl_rade"},{id:"pl_bmasse",labelKey:"mass",format:(e,a)=>e.pl_bmasse?`${e.pl_bmasse.toFixed(2)} MâŠ•`:a,earthRef:"pl_bmasse"},{id:"pl_dens",labelKey:"density",format:(e,a)=>e.pl_dens?`${e.pl_dens.toFixed(2)} g/cmÂ³`:a,earthRef:"pl_dens"},{id:"pl_insol",labelKey:"insolationFlux",format:(e,a)=>e.pl_insol?`${e.pl_insol.toFixed(2)} SâŠ•`:a,earthRef:"pl_insol"},{id:"pl_eqt",labelKey:"eqTemperature",format:(e,a)=>e.pl_eqt?`${e.pl_eqt.toFixed(0)} K`:a,earthRef:"pl_eqt"},{id:"pl_orbper",labelKey:"orbitalPeriod",format:(e,a)=>e.pl_orbper?`${e.pl_orbper.toFixed(2)} days`:a,earthRef:"pl_orbper"},{id:"pl_orbsmax",labelKey:"semiMajorAxis",format:(e,a)=>e.pl_orbsmax?`${e.pl_orbsmax.toFixed(3)} AU`:a,earthRef:"pl_orbsmax"},{id:"pl_orbeccen",labelKey:"orbitalEccentricity",format:(e,a)=>e.pl_orbeccen!==null?e.pl_orbeccen.toFixed(3):a,earthRef:"pl_orbeccen"}],je=[{id:"st_teff",labelKey:"starTemperature",format:(e,a)=>e.st_teff?`${e.st_teff.toFixed(0)} K`:a,earthRef:"st_teff"},{id:"st_met",labelKey:"starMetallicity",format:(e,a)=>e.st_met!==null?`${e.st_met.toFixed(2)} dex`:a,earthRef:"st_met"},{id:"st_age",labelKey:"starAge",format:(e,a)=>e.st_age?`${e.st_age.toFixed(2)} Gyr`:a,earthRef:"st_age"}],Ne=[{id:"disc_year",labelKey:"discoveryYear",format:(e,a)=>{var s;return((s=e.disc_year)==null?void 0:s.toString())||a}},{id:"discoverymethod",labelKey:"discoveryMethod",format:(e,a)=>e.discoverymethod||a},{id:"disc_facility",labelKey:"facility",format:(e,a)=>e.disc_facility||a}];function E({flagKey:e,className:a}){const{t:s}=O(),n=s(`pages.planet.info.flags.${e}`),o=s(`pages.planet.info.flagDescriptions.${e}`);return t.jsx("span",{className:`planet-flag ${a}`,title:o,children:n})}function _e({planet:e}){const{t:a}=O();return t.jsxs("div",{className:"planet-info-container",children:[t.jsx("section",{className:"planet-info-section",children:t.jsxs("div",{className:"planet-flags",children:[e.is_habitable_zone&&t.jsx(T,{propertyKey:"habitableZone",category:"flag",children:t.jsx(E,{flagKey:"habitableZone",className:"flag-habitable"})}),e.is_earth_like&&t.jsx(T,{propertyKey:"earthLike",category:"flag",children:t.jsx(E,{flagKey:"earthLike",className:"flag-earth-like"})}),e.is_top_habitable_candidate&&t.jsx(T,{propertyKey:"topCandidate",category:"flag",children:t.jsx(E,{flagKey:"topCandidate",className:"flag-top-candidate"})}),e.is_potentially_rocky&&t.jsx(T,{propertyKey:"potentiallyRocky",category:"flag",children:t.jsx(E,{flagKey:"potentiallyRocky",className:"flag-rocky"})}),e.has_earth_like_insolation&&t.jsx(T,{propertyKey:"earthLikeInsolation",category:"flag",children:t.jsx(E,{flagKey:"earthLikeInsolation",className:"flag-habitable"})}),e.is_hot_jupiter&&t.jsx(T,{propertyKey:"hotJupiter",category:"flag",children:t.jsx(E,{flagKey:"hotJupiter",className:"flag-hot-jupiter"})}),e.is_hot_neptune&&t.jsx(T,{propertyKey:"hotNeptune",category:"flag",children:t.jsx(E,{flagKey:"hotNeptune",className:"flag-hot-neptune"})}),e.is_ultra_hot&&t.jsx(T,{propertyKey:"ultraHot",category:"flag",children:t.jsx(E,{flagKey:"ultraHot",className:"flag-ultra-hot"})}),e.is_frozen_world&&t.jsx(T,{propertyKey:"frozenWorld",category:"flag",children:t.jsx(E,{flagKey:"frozenWorld",className:"flag-frozen"})}),e.is_ultra_dense&&t.jsx(T,{propertyKey:"ultraDense",category:"flag",children:t.jsx(E,{flagKey:"ultraDense",className:"flag-ultra-dense"})}),e.is_puffy&&t.jsx(T,{propertyKey:"puffy",category:"flag",children:t.jsx(E,{flagKey:"puffy",className:"flag-puffy"})}),e.is_super_massive&&t.jsx(T,{propertyKey:"superMassive",category:"flag",children:t.jsx(E,{flagKey:"superMassive",className:"flag-super-massive"})}),e.is_lightweight&&t.jsx(T,{propertyKey:"lightweight",category:"flag",children:t.jsx(E,{flagKey:"lightweight",className:"flag-lightweight"})}),e.is_ultra_short_period&&t.jsx(T,{propertyKey:"ultraShortPeriod",category:"flag",children:t.jsx(E,{flagKey:"ultraShortPeriod",className:"flag-ultra-short"})}),e.is_long_period&&t.jsx(T,{propertyKey:"longPeriod",category:"flag",children:t.jsx(E,{flagKey:"longPeriod",className:"flag-long-period"})}),e.is_eccentric_orbit&&t.jsx(T,{propertyKey:"eccentricOrbit",category:"flag",children:t.jsx(E,{flagKey:"eccentricOrbit",className:"flag-eccentric"})}),e.is_circular_orbit&&t.jsx(T,{propertyKey:"circularOrbit",category:"flag",children:t.jsx(E,{flagKey:"circularOrbit",className:"flag-circular"})}),e.is_likely_tidally_locked&&t.jsx(T,{propertyKey:"tidallyLocked",category:"flag",children:t.jsx(E,{flagKey:"tidallyLocked",className:"flag-tidally-locked"})}),e.is_circumbinary&&t.jsx(T,{propertyKey:"circumbinary",category:"flag",children:t.jsx(E,{flagKey:"circumbinary",className:"flag-circumbinary"})}),e.is_multi_planet_system&&t.jsx(T,{propertyKey:"multiPlanet",category:"flag",children:t.jsx(E,{flagKey:"multiPlanet",className:"flag-multi-planet"})}),e.is_rich_system&&t.jsx(T,{propertyKey:"richSystem",category:"flag",children:t.jsx(E,{flagKey:"richSystem",className:"flag-rich-system"})}),e.is_multi_star_system&&t.jsx(T,{propertyKey:"multiStar",category:"flag",children:t.jsx(E,{flagKey:"multiStar",className:"flag-multi-star"})}),e.is_very_nearby&&t.jsx(T,{propertyKey:"veryNearby",category:"flag",children:t.jsx(E,{flagKey:"veryNearby",className:"flag-very-nearby"})}),e.is_nearby&&!e.is_very_nearby&&t.jsx(T,{propertyKey:"nearby",category:"flag",children:t.jsx(E,{flagKey:"nearby",className:"flag-nearby"})}),e.is_solar_analog&&t.jsx(T,{propertyKey:"solarAnalog",category:"flag",children:t.jsx(E,{flagKey:"solarAnalog",className:"flag-solar-analog"})}),e.is_red_dwarf_host&&t.jsx(T,{propertyKey:"redDwarfHost",category:"flag",children:t.jsx(E,{flagKey:"redDwarfHost",className:"flag-red-dwarf"})}),e.is_young_system&&t.jsx(T,{propertyKey:"youngSystem",category:"flag",children:t.jsx(E,{flagKey:"youngSystem",className:"flag-young"})}),e.is_ancient_system&&t.jsx(T,{propertyKey:"ancientSystem",category:"flag",children:t.jsx(E,{flagKey:"ancientSystem",className:"flag-ancient"})}),e.is_metal_rich_star&&t.jsx(T,{propertyKey:"metalRich",category:"flag",children:t.jsx(E,{flagKey:"metalRich",className:"flag-metal-rich"})}),e.is_metal_poor_star&&t.jsx(T,{propertyKey:"metalPoor",category:"flag",children:t.jsx(E,{flagKey:"metalPoor",className:"flag-metal-poor"})}),e.is_transiting&&t.jsx(T,{propertyKey:"transiting",category:"flag",children:t.jsx(E,{flagKey:"transiting",className:"flag-transiting"})}),e.has_rv_data&&t.jsx(T,{propertyKey:"hasRvData",category:"flag",children:t.jsx(E,{flagKey:"hasRvData",className:"flag-rv"})}),e.has_ttv&&t.jsx(T,{propertyKey:"hasTtv",category:"flag",children:t.jsx(E,{flagKey:"hasTtv",className:"flag-ttv"})}),e.is_controversial&&t.jsx(T,{propertyKey:"controversial",category:"flag",children:t.jsx(E,{flagKey:"controversial",className:"flag-controversial"})})]})}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.properties")}),t.jsx("p",{className:"earth-comparison-hint",children:a("pages.planet.info.earthComparison")}),t.jsx("div",{className:"planet-properties-table",children:ye.map(s=>{const n=a("pages.planet.info.unknown"),o=s.format(e,n),r=a(`pages.planet.info.fields.${s.labelKey}`),p=s.earthRef?Nt[s.earthRef]:null,x=p?a(`pages.planet.info.earthRef.${p.labelKey}`):null;return t.jsx(ct,{propertyKey:s.labelKey,category:"planet",label:r,value:o,earthRef:p&&x?{value:p.value,unit:p.unit,label:x}:void 0},s.id)})})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.hostStar")}),t.jsx("div",{className:"planet-properties-table",children:je.map(s=>{const n=a("pages.planet.info.unknown"),o=s.format(e,n),r=a(`pages.planet.info.fields.${s.labelKey}`),p=s.earthRef?Nt[s.earthRef]:null,x=p?a(`pages.planet.info.earthRef.${p.labelKey}`):null;return t.jsx(ct,{propertyKey:s.labelKey,category:"star",label:r,value:o,earthRef:p&&x?{value:p.value,unit:p.unit,label:x}:void 0},s.id)})})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.discovery")}),t.jsx("div",{className:"planet-properties-table",children:Ne.map(s=>{const n=a("pages.planet.info.unknown"),o=s.format(e,n),r=a(`pages.planet.info.fields.${s.labelKey}`);return t.jsx(ct,{propertyKey:s.labelKey,category:"discovery",label:r,value:o},s.id)})})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.reviews")}),t.jsx(be,{planetId:ht(e.pl_name)})]})]})}const dt={"Sub-Earth":"#a0a0a0","Earth-sized":"#4a90d9","Super-Earth":"#6bb86b","Sub-Neptune":"#7ec8e3","Neptune-like":"#4169e1","Gas Giant":"#d4a574",unknown:"#888888"};function At(e){return e?dt[e]??dt.unknown:dt.unknown}function we(e){return e.is_habitable_zone?"#00ff88":e.is_earth_like?"#4a90d9":At(e.planet_type??null)}function ke(e){const a=Z.COMPARISON_MAX_SIZE,s=Z.COMPARISON_MIN_SIZE,n=Z.COMPARISON_MAX_RADIUS_FACTOR,o=e>=1?a/Math.min(e,n):a,r=e>=1?a:a*e,p=Math.max(o,s),x=Math.max(r,s);return{earthDisplaySize:p,planetDisplaySize:x}}function Re(e){return`radial-gradient(circle at 30% 30%, #fff, ${e}, ${e}dd)`}const q={radius:Z.EARTH_RADIUS_RELATIVE,mass:Z.EARTH_MASS_RELATIVE,density:Z.EARTH_DENSITY,temperature:Z.EARTH_EQUILIBRIUM_TEMP},Se="radial-gradient(circle at 30% 30%, #87ceeb, #4a90d9, #1e4d7b)";function Me({planet:e}){const{t:a}=O(),s=e.pl_rade||1,n=e.pl_bmasse||null,o=e.pl_dens||null,r=e.pl_eqt||null,{earthDisplaySize:p,planetDisplaySize:x}=ke(s),N=Ut(n,s),h=(N==null?void 0:N.gravityEarth)??null,_=At(e.planet_type),w=[{key:"radius",label:a("pages.planet.comparison.radius"),earthValue:`${q.radius.toFixed(1)} RâŠ•`,planetValue:e.pl_rade?`${e.pl_rade.toFixed(2)} RâŠ•`:"â€”",ratio:e.pl_rade?e.pl_rade/q.radius:null},{key:"mass",label:a("pages.planet.comparison.mass"),earthValue:`${q.mass.toFixed(1)} MâŠ•`,planetValue:n?`${n.toFixed(2)} MâŠ•`:"â€”",ratio:n?n/q.mass:null},{key:"density",label:a("pages.planet.comparison.density"),earthValue:`${q.density.toFixed(2)} g/cmÂ³`,planetValue:o?`${o.toFixed(2)} g/cmÂ³`:"â€”",ratio:o?o/q.density:null},{key:"gravity",label:a("pages.planet.comparison.gravity"),earthValue:"1.0 g",planetValue:h?`${h.toFixed(2)} g`:"â€”",ratio:h},{key:"temperature",label:a("pages.planet.comparison.temperature"),earthValue:`${q.temperature} K`,planetValue:r?`${r.toFixed(0)} K`:"â€”",ratio:r?r/q.temperature:null}],j=k=>k===null?"":k>1?a("pages.planet.comparison.timesLarger",{times:k.toFixed(1)}):k<1?a("pages.planet.comparison.timesSmaller",{times:(1/k).toFixed(1)}):a("pages.planet.comparison.similar");return t.jsxs("div",{className:"planet-earth-comparison",children:[t.jsxs("div",{className:"comparison-visual",children:[t.jsxs("div",{className:"comparison-body",children:[t.jsx("div",{className:"comparison-sphere earth",style:{width:p,height:p,background:Se},children:t.jsx("div",{className:"sphere-highlight"})}),t.jsx("span",{className:"comparison-label",children:a("pages.planet.comparison.earth")}),t.jsx("span",{className:"comparison-stats",children:"1.0 RâŠ• â€¢ 1.0 MâŠ•"})]}),t.jsx("div",{className:"comparison-vs",children:"vs"}),t.jsxs("div",{className:"comparison-body",children:[t.jsx("div",{className:"comparison-sphere planet",style:{width:x,height:x,background:Re(_)},children:t.jsx("div",{className:"sphere-highlight"})}),t.jsx("span",{className:"comparison-label",children:e.pl_name}),t.jsxs("span",{className:"comparison-stats",children:[e.pl_rade?`${e.pl_rade.toFixed(2)} RâŠ•`:"â€”"," â€¢ ",n?`${n.toFixed(1)} MâŠ•`:"â€”"]})]})]}),t.jsx("div",{className:"comparison-summary",children:s>1?t.jsx("p",{children:a("pages.planet.comparison.largerThanEarth",{times:s.toFixed(1)})}):s<1?t.jsx("p",{children:a("pages.planet.comparison.smallerThanEarth",{pct:((1-s)*100).toFixed(0)})}):t.jsx("p",{children:a("pages.planet.comparison.similarToEarth")})}),t.jsx("div",{className:"comparison-metrics",children:w.map(k=>t.jsxs("div",{className:"comparison-metric-row",children:[t.jsx("span",{className:"metric-label",children:k.label}),t.jsx("span",{className:"metric-earth",children:k.earthValue}),t.jsx("span",{className:"metric-planet",children:k.planetValue}),t.jsx("span",{className:"metric-ratio",children:j(k.ratio)})]},k.key))})]})}function ze(e){let a=0;if(e.pl_eqt){const r=e.pl_eqt;if(r>=200&&r<=320){const p=Math.abs(r-255);a=Math.max(0,40-p*.5)}else r<200?a=Math.max(0,20-(200-r)*.2):a=Math.max(0,20-(r-320)*.1)}let s=0;if(e.pl_rade){const r=e.pl_rade;r>=.8&&r<=1.5?s=30:r>=.5&&r<=2?s=25:r>=.3&&r<=2.5?s=15:r<=4?s=8:s=2}let n=0;switch(e.star_class){case"G":n=20;break;case"K":n=18;break;case"F":n=15;break;case"M":n=12;break;case"A":n=8;break;default:n=5}let o=0;if(e.pl_insol){const r=e.pl_insol;r>=.5&&r<=2?o=10:r>=.25&&r<=4?o=6:o=2}return{temperature:Math.round(a),size:Math.round(s),starType:n,insolation:o}}function Te(e){return e>=80?"#00ff88":e>=60?"#88ff00":e>=40?"#ffcc00":e>=20?"#ff8800":"#ff4444"}function Ae(e,a){return e>=80?"excellent":e>=60?"good":e>=40?"moderate":e>=20?"low":"minimal"}function Ee({planet:e}){const{t:a}=O(),s=e.habitability_score||0,n=m.useMemo(()=>ze(e),[e]),o=Te(s),r=Ae(s),p=160,x=12,N=(p-x)/2,h=2*Math.PI*N,_=s/100*h,w=h-_,j=[{key:"temperature",label:a("pages.planet.habitability.temperature"),value:n.temperature,max:40,color:"#ff6b6b"},{key:"size",label:a("pages.planet.habitability.size"),value:n.size,max:30,color:"#4ecdc4"},{key:"starType",label:a("pages.planet.habitability.starType"),value:n.starType,max:20,color:"#ffe66d"},{key:"insolation",label:a("pages.planet.habitability.insolation"),value:n.insolation,max:10,color:"#a8e6cf"}];return t.jsxs("div",{className:"habitability-gauge",children:[t.jsxs("div",{className:"gauge-container",children:[t.jsxs("svg",{className:"gauge-svg",width:p,height:p,viewBox:`0 0 ${p} ${p}`,children:[t.jsx("circle",{className:"gauge-background",cx:p/2,cy:p/2,r:N,fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:x}),t.jsx("circle",{className:"gauge-progress",cx:p/2,cy:p/2,r:N,fill:"none",stroke:o,strokeWidth:x,strokeLinecap:"round",strokeDasharray:h,strokeDashoffset:w,transform:`rotate(-90 ${p/2} ${p/2})`,style:{transition:"stroke-dashoffset 1s ease-out, stroke 0.3s ease",filter:`drop-shadow(0 0 6px ${o}80)`}})]}),t.jsxs("div",{className:"gauge-center",children:[t.jsx("span",{className:"gauge-score",style:{color:o},children:s.toFixed(0)}),t.jsx("span",{className:"gauge-label",children:"/100"})]})]}),t.jsx("div",{className:"gauge-tier",style:{color:o},children:a(`pages.planet.habitability.tiers.${r}`)}),t.jsxs("div",{className:"habitability-breakdown",children:[t.jsx("h4",{className:"breakdown-title",children:a("pages.planet.habitability.breakdown")}),j.map(k=>t.jsxs("div",{className:"breakdown-item",children:[t.jsxs("div",{className:"breakdown-header",children:[t.jsx("span",{className:"breakdown-label",children:k.label}),t.jsxs("span",{className:"breakdown-value",children:[k.value,"/",k.max]})]}),t.jsx("div",{className:"breakdown-bar-track",children:t.jsx("div",{className:"breakdown-bar-fill",style:{width:`${k.value/k.max*100}%`,backgroundColor:k.color}})})]},k.key))]}),t.jsxs("div",{className:"habitability-indicators",children:[e.is_habitable_zone&&t.jsxs("span",{className:"indicator positive",children:["âœ“ ",a("pages.planet.habitability.inHabitableZone")]}),e.is_earth_like&&t.jsxs("span",{className:"indicator positive",children:["âœ“ ",a("pages.planet.habitability.earthLikeSize")]}),e.is_potentially_rocky&&t.jsxs("span",{className:"indicator positive",children:["âœ“ ",a("pages.planet.habitability.potentiallyRocky")]}),e.is_top_habitable_candidate&&t.jsxs("span",{className:"indicator highlight",children:["â˜… ",a("pages.planet.habitability.topCandidate")]})]})]})}const Y={SCORCHING:1500,HOT:500,WARM:320,HABITABLE_UPPER:320,HABITABLE_LOWER:200,COLD:150,FROZEN:100},J={VENUS:737,EARTH:255,MARS:210};function Fe(e){return e===null?{zone:"unknown",color:"#666666",description:"Temperature unknown"}:e>Y.SCORCHING?{zone:"scorching",color:"#ff2200",description:"Extreme heat - metals may vaporize"}:e>Y.HOT?{zone:"hot",color:"#ff6600",description:"Very hot - surface would be molten"}:e>Y.WARM?{zone:"warm",color:"#ffaa00",description:"Too warm for liquid water"}:e>=Y.HABITABLE_LOWER?{zone:"habitable",color:"#00ff88",description:"Potential for liquid water"}:e>=Y.COLD?{zone:"cool",color:"#00ccff",description:"Cool - water would be frozen"}:e>=Y.FROZEN?{zone:"cold",color:"#0088ff",description:"Cold - likely frozen surface"}:{zone:"frozen",color:"#4444ff",description:"Extreme cold - cryogenic conditions"}}function Q(e){const n=Math.max(50,Math.min(2e3,e)),o=Math.log(50),r=Math.log(2e3);return(Math.log(n)-o)/(r-o)*100}function $e({planet:e}){const{t:a}=O(),s=e.pl_eqt,n=s?null:Wt(e.st_teff??null,e.st_rad??null,e.pl_orbsmax??null),o=s||(n==null?void 0:n.temperatureK)||null,r=!s&&n!==null,p=Fe(o),x=o?Q(o):50,N=[{name:"Venus",temp:J.VENUS,position:Q(J.VENUS),emoji:"ðŸª"},{name:"Earth",temp:J.EARTH,position:Q(J.EARTH),emoji:"ðŸŒ"},{name:"Mars",temp:J.MARS,position:Q(J.MARS),emoji:"ðŸ”´"}],h=Q(Y.HABITABLE_LOWER),_=Q(Y.HABITABLE_UPPER);return t.jsxs("div",{className:"temperature-zone-indicator",children:[t.jsx("h4",{className:"temp-zone-title",children:a("pages.planet.temperature.title")}),t.jsx("div",{className:"temp-value-display",children:o?t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"temp-value",style:{color:p.color},children:[o.toFixed(0)," K"]}),t.jsxs("span",{className:"temp-celsius",children:["(",(o-273.15).toFixed(0),"Â°C)"]}),r&&t.jsxs("span",{className:"temp-approximate",title:"Calculated using Stefan-Boltzmann law from stellar and orbital parameters",children:[" ","~"]})]}):t.jsx("span",{className:"temp-unknown",children:a("pages.planet.temperature.unknown")})}),t.jsx("div",{className:"temp-zone-label",style:{color:p.color},children:a(`pages.planet.temperature.zones.${p.zone}`)}),t.jsxs("div",{className:"temp-scale-container",children:[t.jsxs("div",{className:"temp-scale-bar",children:[t.jsx("div",{className:"temp-habitable-zone",style:{left:`${h}%`,width:`${_-h}%`}}),t.jsx("div",{className:"temp-scale-gradient"}),N.map(w=>t.jsxs("div",{className:"temp-reference-marker",style:{left:`${w.position}%`},title:`${w.name}: ${w.temp}K`,children:[t.jsx("span",{className:"reference-emoji",children:w.emoji}),t.jsx("span",{className:"reference-line"})]},w.name)),o&&t.jsxs("div",{className:"temp-planet-marker",style:{left:`${x}%`,borderColor:p.color},children:[t.jsx("div",{className:"marker-dot",style:{backgroundColor:p.color}}),t.jsx("div",{className:"marker-label",children:e.pl_letter||"â—"})]})]}),t.jsxs("div",{className:"temp-scale-labels",children:[t.jsx("span",{className:"scale-label cold",children:a("pages.planet.temperature.frozen")}),t.jsx("span",{className:"scale-label habitable",children:a("pages.planet.temperature.habitable")}),t.jsx("span",{className:"scale-label hot",children:a("pages.planet.temperature.scorching")})]})]}),t.jsx("p",{className:"temp-zone-description",children:a(`pages.planet.temperature.descriptions.${p.zone}`)}),r&&t.jsx("p",{className:"temp-approximation-notice",children:"â“˜ Temperature estimated using Stefan-Boltzmann law (T = Tâ˜… Ã— âˆš(Râ˜…/2a)) from stellar temperature, radius, and orbital distance. NASA data not available."}),t.jsxs("div",{className:"temp-legend",children:[t.jsxs("div",{className:"legend-item",children:[t.jsx("span",{className:"legend-marker earth",children:"ðŸŒ"}),t.jsx("span",{className:"legend-text",children:"Earth (255K)"})]}),t.jsxs("div",{className:"legend-item",children:[t.jsx("span",{className:"legend-marker habitable-zone"}),t.jsx("span",{className:"legend-text",children:a("pages.planet.temperature.habitableZone")})]})]})]})}function Ke({planet:e,siblings:a}){var r;const{t:s}=O(),n=m.useRef(null),o=m.useRef(null);return m.useEffect(()=>{if(!n.current||!o.current)return;const p=o.current.clientWidth,x=Math.min(p,350),N=40,h=(x-N*2)/2,_=x/2,w=x/2,j=H(n.current);j.selectAll("*").remove(),j.attr("width",x).attr("height",x);const C=(a.length>0?a:[e]).filter(i=>i.pl_orbsmax&&i.pl_orbsmax>0).map(i=>({name:i.pl_name.split(" ").pop()||i.pl_name,fullName:i.pl_name,semiMajorAxis:i.pl_orbsmax,eccentricity:i.pl_orbeccen||0,habitable:i.is_habitable_zone||!1,isCurrent:i.pl_name===e.pl_name,color:we(i),planetType:i.planet_type})).sort((i,l)=>i.semiMajorAxis-l.semiMajorAxis);if(C.length===0)return;const F=Math.max(...C.map(i=>i.semiMajorAxis)),M=Gt(e.st_lum),S=Math.max(F*1.3,M.outer*1.2),D=h/S;j.append("circle").attr("cx",_).attr("cy",w).attr("r",h+N/2).attr("fill","rgba(0, 0, 0, 0.3)");const u=M.inner*D,c=M.outer*D;c>0&&c<=h+20&&(j.append("circle").attr("cx",_).attr("cy",w).attr("r",Math.min(c,h)).attr("fill","rgba(0, 255, 136, 0.1)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1),u>0&&j.append("circle").attr("cx",_).attr("cy",w).attr("r",u).attr("fill","rgba(0, 0, 0, 0.3)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","4,4")),[.1,.5,1,2,5,10,20,50].filter(i=>i*D<h&&i<S).forEach(i=>{j.append("circle").attr("cx",_).attr("cy",w).attr("r",i*D).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.1)").attr("stroke-width",.5),j.append("text").attr("x",_+i*D+3).attr("y",w-3).attr("fill","rgba(255, 255, 255, 0.3)").attr("font-size","8px").text(`${i} AU`)}),j.append("circle").attr("cx",_).attr("cy",w).attr("r",10).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 10px rgba(255, 200, 0, 0.5))"),C.forEach((i,l)=>{const f=i.semiMajorAxis*D,v=l/C.length*Math.PI*2-Math.PI/2,d=_+Math.cos(v)*f,b=w+Math.sin(v)*f;j.append("circle").attr("cx",_).attr("cy",w).attr("r",f).attr("fill","none").attr("stroke",i.isCurrent?"rgba(255, 255, 255, 0.6)":i.habitable?"rgba(0, 255, 136, 0.4)":"rgba(0, 204, 255, 0.2)").attr("stroke-width",i.isCurrent?2:1).attr("stroke-dasharray",i.isCurrent?"none":"4,4");const $=i.isCurrent?10:6;j.append("circle").attr("cx",d).attr("cy",b).attr("r",$).attr("fill",i.color).attr("stroke",i.isCurrent?"#fff":"rgba(255,255,255,0.5)").attr("stroke-width",i.isCurrent?2:1).attr("filter",i.isCurrent?"drop-shadow(0 0 8px rgba(255,255,255,0.5))":"none"),j.append("text").attr("x",d).attr("y",b-$-5).attr("text-anchor","middle").attr("fill",i.isCurrent?"#fff":"rgba(255, 255, 255, 0.7)").attr("font-size",i.isCurrent?"11px":"9px").attr("font-weight",i.isCurrent?"bold":"normal").text(i.name)})},[e,a]),e.pl_orbsmax?t.jsxs("div",{className:"orbital-position-container",children:[t.jsx("h4",{className:"orbital-title",children:s("pages.planet.orbital.title")}),t.jsx("div",{ref:o,className:"orbital-chart",children:t.jsx("svg",{ref:n})}),t.jsxs("div",{className:"orbital-legend",children:[t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot star"}),t.jsx("span",{children:e.hostname})]}),t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot current"}),t.jsx("span",{children:e.pl_name})]}),t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot hz"}),t.jsx("span",{children:s("pages.planet.orbital.habitableZone")})]})]}),t.jsxs("div",{className:"orbital-info",children:[t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.distance")}),t.jsxs("span",{className:"info-value",children:[(r=e.pl_orbsmax)==null?void 0:r.toFixed(3)," AU"]})]}),e.pl_orbper&&t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.period")}),t.jsx("span",{className:"info-value",children:e.pl_orbper<365?`${e.pl_orbper.toFixed(1)} days`:`${(e.pl_orbper/365.25).toFixed(2)} years`})]}),e.pl_orbeccen!==null&&t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.eccentricity")}),t.jsx("span",{className:"info-value",children:e.pl_orbeccen.toFixed(3)})]})]})]}):t.jsx("div",{className:"orbital-position-container",children:t.jsx("div",{className:"orbital-no-data",children:s("pages.planet.orbital.noData")})})}function Ce(e,a){return e.is_earth_like&&e.is_habitable_zone?a("pages.planet.siblings.earthLikeHabitable"):e.is_habitable_zone?a("pages.planet.siblings.habitable"):e.is_hot_jupiter?a("pages.planet.siblings.hotJupiter"):e.is_frozen_world?a("pages.planet.siblings.frozen"):e.planet_type||a("pages.planet.siblings.exoplanet")}function Pe({currentPlanet:e,siblings:a}){const{t:s}=O(),n=a.filter(r=>r.pl_name!==e.pl_name);if(n.length===0)return null;const o=[...n].sort((r,p)=>(r.pl_orbsmax||999)-(p.pl_orbsmax||999));return t.jsxs("div",{className:"sibling-planets-section",children:[t.jsx("h3",{className:"sibling-planets-title",children:s("pages.planet.siblings.title",{system:e.hostname})}),t.jsx("p",{className:"sibling-planets-subtitle",children:s("pages.planet.siblings.count",{count:n.length})}),t.jsx("div",{className:"sibling-planets-grid",children:o.map(r=>t.jsxs(pt,{to:`/planets/${ht(r.pl_name)}`,className:"sibling-planet-card",children:[t.jsx("div",{className:"sibling-thumbnail",children:t.jsx(qt,{planet:r,size:64})}),t.jsxs("div",{className:"sibling-info",children:[t.jsx("span",{className:"sibling-name",children:r.pl_name.replace(e.hostname,"").trim()||r.pl_letter||r.pl_name}),t.jsx("span",{className:"sibling-type",children:Ce(r,s)})]}),t.jsxs("div",{className:"sibling-stats",children:[r.pl_rade&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:r.pl_rade.toFixed(1)}),t.jsx("span",{className:"stat-unit",children:"RâŠ•"})]}),r.pl_eqt&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:r.pl_eqt.toFixed(0)}),t.jsx("span",{className:"stat-unit",children:"K"})]}),r.pl_orbsmax&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:r.pl_orbsmax.toFixed(2)}),t.jsx("span",{className:"stat-unit",children:"AU"})]})]}),t.jsxs("div",{className:"sibling-badges",children:[r.is_habitable_zone&&t.jsx("span",{className:"sibling-badge habitable",children:"HZ"}),r.is_earth_like&&t.jsx("span",{className:"sibling-badge earth-like",children:"ðŸŒ"}),r.is_hot_jupiter&&t.jsx("span",{className:"sibling-badge hot",children:"ðŸ”¥"})]})]},r.pl_name))})]})}function mt(e,a,s){const{x:n,y:o,width:r,isMobile:p,fontSize:x=10,itemPadding:N=20,forceHorizontal:h=!1}=s,_=e.append("g").attr("class","chart-legend"),w=12,j=18,C=a.reduce((c,g)=>g.text.length>c.length?g.text:c,"").length*x*.55,F=12+N+C+N,M=a.map(c=>{const g=H(document.createElementNS("http://www.w3.org/2000/svg","g")),i=c.size??w,l=j/2;return c.type==="rect"?g.append("rect").attr("width",i).attr("height",i).attr("x",0).attr("y",l-i/2).attr("fill",c.color).attr("rx",2):c.type==="circle"?g.append("circle").attr("cx",i/2).attr("cy",l).attr("r",i/2).attr("fill",c.color):c.type==="line"&&g.append("line").attr("x1",0).attr("x2",i).attr("y1",l).attr("y2",l).attr("stroke",c.color).attr("stroke-width",2).attr("stroke-dasharray",c.lineStyle==="dashed"?"4,2":"none"),g.append("text").attr("x",N+i).attr("y",l).attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size",`${x}px`).attr("dominant-baseline","middle").text(c.text),{g,width:F,height:j}});let S=0,D=j;if(p&&!h)M.forEach((c,g)=>{_.append(()=>c.g.attr("transform",`translate(0, ${g*j})`).node()),S=Math.max(S,c.width)}),D=M.length*j;else{let c=0,g=0;M.forEach(i=>{_.append(()=>i.g.attr("transform",`translate(${c}, 0)`).node()),c+=i.width,g=Math.max(g,c)}),S=g,D=j}const u=p?n:n+(r-S)/2;return _.attr("transform",`translate(${u}, ${o})`),e.insert("rect",".chart-legend").attr("x",u-10).attr("y",o-5).attr("width",S+20).attr("height",D+10).attr("fill","rgba(0, 0, 0, 0.6)").attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",1).attr("rx",4),{width:S,height:D}}function De(e,a=1){const s=e.pl_rvamp,n=e.pl_orbper,o=(e.st_radv||0)*1e3,r=[],p=Math.floor(a*100);for(let x=0;x<=p;x++){const N=x/100*2*Math.PI,h=x/100*n,_=o+s*Math.sin(N);r.push({time:h,velocity:_,phase:N})}return r}function Le(e){if(e==null||isNaN(e))return"N/A";const a=Number(e);return Math.abs(a)<1?`${(a*1e3).toFixed(0)} cm/s`:`${a.toFixed(2)} m/s`}function Ie({planet:e,siblings:a=[]}){const{t:s}=O(),[n,o]=m.useState(null),[r,p]=m.useState(0),x=m.useRef(null),N=m.useRef(null),h=m.useRef(null),_=m.useRef(null),w=m.useRef(null),j=m.useRef(null),k=m.useRef(null),C=m.useRef(null),F=m.useRef(null),M=m.useRef(null),S=m.useRef(),{width:D}=ae(_),u=e.pl_rvamp!==null&&e.pl_orbper!==null;if(m.useEffect(()=>{if(!u)return;const i=15,l=.01,f=i/e.pl_orbper,v=l*Math.min(Math.max(f,.2),8),d=()=>{p(b=>(b+v)%(Math.PI*2)),S.current=requestAnimationFrame(d)};return S.current=requestAnimationFrame(d),()=>{S.current&&cancelAnimationFrame(S.current)}},[u,e.pl_orbper]),m.useEffect(()=>{if(!u||!x.current||!N.current)return;const i=N.current.clientWidth,l=i<500,f=Math.min(i-20,1200),v=420,d={top:20,right:30,bottom:l?120:100,left:70},b=H(x.current);b.selectAll("*").remove(),b.attr("width",f).attr("height",v);const $=De(e),P=lt().domain([0,nt($,A=>A.time)]).range([d.left,f-d.right]),z=lt().domain([ne($,A=>A.velocity)-e.pl_rvamp*.2,nt($,A=>A.velocity)+e.pl_rvamp*.2]).range([v-d.bottom,d.top]),L=St().x(A=>P(A.time)).y(A=>z(A.velocity)).curve(ot);b.append("rect").attr("width",f).attr("height",v).attr("fill","rgba(0, 0, 0, 0.2)"),b.append("g").attr("class","grid").attr("transform",`translate(0,${v-d.bottom})`).call(tt(P).ticks(5).tickSize(-(v-d.top-d.bottom)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)"),b.append("g").attr("class","grid").attr("transform",`translate(${d.left},0)`).call(et(z).ticks(5).tickSize(-(f-d.left-d.right)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)");const y=e.pl_rvamp,R=e.pl_orbper,K=(e.st_radv||0)*1e3;b.append("line").attr("x1",d.left).attr("x2",f-d.right).attr("y1",z(K)).attr("y2",z(K)).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2).attr("stroke-dasharray","5,5");const I=vt().x(A=>P(A.time)).y0(z(K)).y1(A=>z(Math.max(A.velocity,K))).curve(ot);b.append("path").datum($).attr("d",I).attr("fill","rgba(255, 100, 100, 0.15)").attr("opacity",.8);const V=vt().x(A=>P(A.time)).y0(z(K)).y1(A=>z(Math.min(A.velocity,K))).curve(ot);b.append("path").datum($).attr("d",V).attr("fill","rgba(100, 150, 255, 0.15)").attr("opacity",.8),b.append("path").datum($).attr("id","rv-curve-path").attr("d",L).attr("fill","none").attr("stroke","#00ccff").attr("stroke-width",2).attr("opacity",.9);const at=[{color:"rgba(255, 100, 100, 0.4)",text:s("pages.planet.rv.legendRedshift"),type:"rect"},{color:"rgba(100, 150, 255, 0.4)",text:s("pages.planet.rv.legendBlueshift"),type:"rect"},{color:"rgba(255, 255, 255, 0.5)",text:s("pages.planet.rv.legendBaseline"),type:"line",lineStyle:"dashed"}];mt(b,at,{x:d.left,y:v-d.bottom+50,width:f-d.left-d.right,isMobile:l,itemPadding:10,forceHorizontal:!1}),b.append("circle").attr("cx",0).attr("cy",0).attr("r",6).attr("fill","#ff6b6b").attr("stroke","#fff").attr("stroke-width",2).attr("class","rv-animated-marker");const B=b.append("g").attr("transform",`translate(0,${v-d.bottom})`).call(tt(P).ticks(5));B.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),B.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),b.append("text").attr("x",f/2).attr("y",v-d.bottom+30).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.rv.xAxisLabel"));const U=b.append("g").attr("transform",`translate(${d.left},0)`).call(et(z).ticks(5).tickFormat(A=>`${A}`));U.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),U.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),b.append("text").attr("transform","rotate(-90)").attr("x",-210).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.rv.yAxisLabel"));const X=r/(Math.PI*2)*R,G=K+y*Math.sin(r);b.select(".rv-animated-marker").attr("cx",P(X)).attr("cy",z(G))},[r,u,e,s]),m.useEffect(()=>{if(!u||!w.current||!j.current)return;const i=250,l=i/2,f=i/2,v=i/2-20,d=H(w.current);d.selectAll("*").remove(),d.attr("width",i).attr("height",i),d.append("rect").attr("width",i).attr("height",i).attr("fill","rgba(0, 0, 0, 0.3)");const b=v*.7,$=v*.15,P=l+Math.cos(r)*b,z=f+Math.sin(r)*b,L=l-Math.cos(r)*$,y=f-Math.sin(r)*$;d.append("circle").attr("cx",l).attr("cy",f).attr("r",b).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.2)").attr("stroke-width",1).attr("stroke-dasharray","4,4"),d.append("circle").attr("cx",l).attr("cy",f).attr("r",$).attr("fill","none").attr("stroke","rgba(255, 200, 0, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","2,2");const R=90,K=R*Math.PI/180,I=Math.cos(K),V=Math.sin(K),B=-(Math.cos(r)*I+Math.sin(r)*V);let U;if(B>.05){const st=Math.abs(B);U=`rgba(0, ${Math.floor(150+st*105)}, 255, ${.4+st*.3})`}else if(B<-.05){const st=Math.abs(B),ft=255,xt=Math.floor(200-st*200);U=`rgba(${ft}, ${xt}, 0, ${.4+st*.3})`}else U="rgba(255, 255, 200, 0.25)";const X=40,G=60,A=(R-X/2)*Math.PI/180,rt=(R+X/2)*Math.PI/180,Ft=`${L+Math.cos(A)*G},${y+Math.sin(A)*G}`,$t=`${L+Math.cos(rt)*G},${y+Math.sin(rt)*G}`;d.append("path").attr("d",`M ${L},${y} L ${Ft} L ${$t} Z`).attr("fill",U).attr("opacity",.6),d.append("circle").attr("cx",L).attr("cy",y).attr("r",15).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 8px rgba(255, 200, 0, 0.6))"),d.append("circle").attr("cx",P).attr("cy",z).attr("r",8).attr("fill","#00ccff").attr("stroke","#fff").attr("stroke-width",1),d.append("circle").attr("cx",l).attr("cy",f).attr("r",3).attr("fill","#ff6b6b").attr("opacity",.5),d.append("text").attr("x",i/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text("Orbital Motion")},[r,u]),m.useEffect(()=>{if(!u||!k.current||!C.current)return;const i=250,l=80,f=l/2,v=180,d=H(k.current);d.selectAll("*").remove(),d.attr("width",i).attr("height",l),d.append("rect").attr("width",i).attr("height",l).attr("fill","rgba(0, 0, 0, 0.3)"),d.append("line").attr("x1",35).attr("x2",35+v).attr("y1",f).attr("y2",f).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2);const b=35+v/2+Math.cos(r)*8,$=35+v/2+Math.cos(r)*60;d.append("circle").attr("cx",b).attr("cy",f).attr("r",12).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 6px rgba(255, 200, 0, 0.5))"),d.append("circle").attr("cx",$).attr("cy",f).attr("r",6).attr("fill","#00ccff").attr("stroke","#fff").attr("stroke-width",1),d.append("text").attr("x",i/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text("Side View")},[r,u]),m.useEffect(()=>{if(!u||!F.current||!M.current)return;const i=Math.min(M.current.clientWidth,600),l=H(F.current);l.selectAll("*").remove(),l.attr("width",i).attr("height",380),l.append("rect").attr("width",i).attr("height",380).attr("fill","rgba(0, 0, 0, 0.3)");const f=l.append("defs").append("linearGradient").attr("id","spectrum-gradient").attr("x1","0%").attr("x2","100%");f.append("stop").attr("offset","0%").attr("stop-color","#4169e1"),f.append("stop").attr("offset","25%").attr("stop-color","#00bfff"),f.append("stop").attr("offset","50%").attr("stop-color","#90ee90"),f.append("stop").attr("offset","75%").attr("stop-color","#ffff00"),f.append("stop").attr("offset","100%").attr("stop-color","#ff4500"),l.append("rect").attr("x",20).attr("y",20).attr("width",i-40).attr("height",40).attr("fill","url(#spectrum-gradient)");const v=e.pl_rvamp,d=v*Math.sin(r),$=d/v*20;[{pos:.05,label:"Ca K"},{pos:.08,label:"Ca H"},{pos:.25,label:"H-Î´"},{pos:.35,label:"H-Î³"},{pos:.45,label:"H-Î²"},{pos:.55,label:"Mg"},{pos:.59,label:"Na D"},{pos:.61,label:"Na D"},{pos:.75,label:"H-Î±"},{pos:.88,label:"Ca II"}].forEach((K,I)=>{const V=20+(i-40)*K.pos;l.append("line").attr("x1",V).attr("x2",V).attr("y1",10).attr("y2",70).attr("stroke","#000").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("opacity",.6),l.append("line").attr("x1",V+$).attr("x2",V+$).attr("y1",20).attr("y2",60).attr("stroke","#000").attr("stroke-width",3).attr("opacity",.9);const at=80+I%3*10;l.append("text").attr("x",V).attr("y",at).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size",i<500?"6px":"8px").text(K.label)});const z=Math.abs(d)>.1?`${d>0?"Redshift":"Blueshift"} (${Math.abs(d).toFixed(1)} m/s)`:"No shift (perpendicular motion)";l.append("text").attr("x",i/2).attr("y",110).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size",i<500?"8px":"10px").text(z);const L=[{text:"How to Read These Visualizations:",y:135,bold:!0,size:11},{text:"",y:145},{text:"REDSHIFT (Star moving away from us):",y:155,bold:!0},{text:"  â€¢ Orbital View: Planet at BOTTOM position",y:168},{text:"  â€¢ Side View: Both star & planet on RIGHT (far side)",y:181},{text:"  â€¢ RV Curve: Red marker at PEAK (maximum velocity)",y:194},{text:"  â€¢ Spectrum: Black lines shift RIGHT (toward red)",y:207},{text:"",y:217},{text:"BLUESHIFT (Star moving toward us):",y:227,bold:!0},{text:"  â€¢ Orbital View: Planet at TOP position",y:240},{text:"  â€¢ Side View: Both star & planet on LEFT (near side)",y:253},{text:"  â€¢ RV Curve: Red marker at VALLEY (minimum velocity)",y:266},{text:"  â€¢ Spectrum: Black lines shift LEFT (toward blue)",y:279},{text:"",y:289},{text:"NO DOPPLER SHIFT (Perpendicular motion):",y:299,bold:!0},{text:"  â€¢ Orbital View: Planet at LEFT or RIGHT sides",y:312},{text:"  â€¢ Side View: Both at center position",y:325},{text:"  â€¢ RV Curve: Red marker crosses BASELINE",y:338},{text:"  â€¢ Spectrum: Black lines align with dashed reference lines",y:351}],y=i<500?10:12,R=i<500?11:13;L.forEach(K=>{if(!K.text)return;const I=l.append("text").attr("x",i<500?15:20).attr("y",K.y).attr("text-anchor","start").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size",K.size?`${K.size*(y/10)}px`:`${y}px`).text(K.text);K.bold&&I.attr("font-weight","bold").attr("fill","rgba(255, 255, 255, 0.8)").attr("font-size",`${R}px`)})},[r,u,e]),m.useEffect(()=>{if(!u||a.length===0||!h.current||!_.current||D===0)return;const i=[e,...a].filter(R=>R.pl_rvamp!==null&&R.pl_rvamp>0).sort((R,K)=>K.pl_rvamp-R.pl_rvamp);if(i.length<=1)return;const l=D<500,f=D,v=Math.max(200,i.length*(l?35:45)),d={top:20,right:l?15:30,bottom:l?40:50,left:l?80:150},b=H(h.current);b.selectAll("*").remove(),b.attr("width",f).attr("height",v),b.append("rect").attr("width",f).attr("height",v).attr("fill","rgba(0, 0, 0, 0.2)");const $=nt(i,R=>R.pl_rvamp),P=kt().domain([.1,$*1.2]).range([d.left,f-d.right]),z=Rt().domain(i.map(R=>R.pl_name.split(" ").pop()||R.pl_name)).range([d.top,v-d.bottom]).padding(.2);b.selectAll(".rv-bar").data(i).join("rect").attr("class","rv-bar").attr("x",d.left).attr("y",R=>z(R.pl_name.split(" ").pop()||R.pl_name)).attr("width",R=>P(R.pl_rvamp)-d.left).attr("height",z.bandwidth()).attr("fill",R=>R.pl_name===e.pl_name?"#00ff88":"#00ccff").attr("opacity",R=>R.pl_name===e.pl_name?1:.6),P(1)>=d.left&&P(1)<=f-d.right&&(b.append("line").attr("x1",P(1)).attr("x2",P(1)).attr("y1",d.top).attr("y2",v-d.bottom).attr("stroke","#ff6b6b").attr("stroke-width",2).attr("stroke-dasharray","4,4"),b.append("text").attr("x",P(1)+5).attr("y",d.top+15).attr("fill","#ff6b6b").attr("font-size","10px").text("1 m/s"));const L=b.append("g").attr("transform",`translate(0,${v-d.bottom})`).call(tt(P).ticks(l?2:3).tickFormat(R=>`${R} m/s`));L.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),L.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)");const y=b.append("g").attr("transform",`translate(${d.left},0)`).call(et(z));y.selectAll("text").attr("font-size",l?"10px":"12px").attr("fill",R=>{var I;return((I=i.find(V=>(V.pl_name.split(" ").pop()||V.pl_name)===R))==null?void 0:I.pl_name)===e.pl_name?"#00ff88":"rgba(255, 255, 255, 0.7)"}).attr("font-weight",R=>{var I;return((I=i.find(V=>(V.pl_name.split(" ").pop()||V.pl_name)===R))==null?void 0:I.pl_name)===e.pl_name?"bold":"normal"}),y.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)")},[e,a,u,D,s]),!u)return t.jsxs("div",{className:"rv-no-data-container",children:[t.jsxs("div",{className:"rv-no-data-message",children:[t.jsx("h4",{className:"rv-no-data-title",children:s("pages.planet.rv.noData.title")}),t.jsx("p",{className:"rv-no-data-explanation",children:s("pages.planet.rv.noData.message",{method:e.discoverymethod||"unknown method"})})]}),c(),t.jsxs("div",{className:"rv-example",children:[t.jsx("p",{children:t.jsx("strong",{children:s("pages.planet.rv.noData.example")})}),t.jsxs("ul",{children:[t.jsx("li",{children:s("pages.planet.rv.noData.jupiterExample")}),t.jsx("li",{children:s("pages.planet.rv.noData.earthExample")}),t.jsx("li",{children:s("pages.planet.rv.noData.detectionLimit")})]})]})]});function c(){const i=[{key:"doppler",title:s("pages.planet.rv.explanation.dopplerTitle"),content:s("pages.planet.rv.explanation.dopplerContent")},{key:"wobble",title:s("pages.planet.rv.explanation.wobbleTitle"),content:s("pages.planet.rv.explanation.wobbleContent")},{key:"discovery",title:s("pages.planet.rv.explanation.discoveryTitle"),content:s("pages.planet.rv.explanation.discoveryContent")}];return t.jsx("div",{className:"rv-explanation-header",children:i.map(l=>t.jsxs("div",{className:"rv-explanation-section",children:[t.jsxs("button",{className:"rv-explanation-trigger",onClick:()=>o(n===l.key?null:l.key),children:[t.jsx("span",{children:l.title}),t.jsx("span",{className:`rv-explanation-icon ${n===l.key?"expanded":""}`,children:"â€º"})]}),n===l.key&&t.jsxs("div",{className:"rv-explanation-content",children:[l.content,l.key==="doppler"&&t.jsxs("div",{className:"rv-explanation-image",children:[t.jsx("img",{src:"/images/rv.png",alt:"Radial Velocity Detection Diagram",className:"rv-diagram-image"}),t.jsx("p",{className:"rv-image-caption",children:s("pages.planet.rv.explanation.dopplerImageCaption")})]})]})]},l.key))})}function g(){return t.jsxs("div",{className:"rv-technical-details",children:[t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.amplitude")}),t.jsx("div",{className:"rv-detail-value",children:Le(e.pl_rvamp)})]}),t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.period")}),t.jsx("div",{className:"rv-detail-value",children:Number(e.pl_orbper)<365?`${Number(e.pl_orbper).toFixed(1)} days`:`${(Number(e.pl_orbper)/365.25).toFixed(2)} years`})]}),e.st_radv!==null&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.baseline")}),t.jsxs("div",{className:"rv-detail-value",children:[Number(e.st_radv).toFixed(2)," km/s"]})]}),e.pl_orbeccen!==null&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.eccentricity")}),t.jsx("div",{className:"rv-detail-value",children:Number(e.pl_orbeccen).toFixed(3)})]}),e.st_vsin!==null&&e.st_vsin>0&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.stellarRotation")}),t.jsxs("div",{className:"rv-detail-value",children:[Number(e.st_vsin).toFixed(2)," km/s"]})]})]})}return t.jsxs("div",{className:"rv-section",children:[t.jsx("p",{className:"rv-intro",children:s("pages.planet.rv.intro")}),c(),t.jsxs("div",{className:"rv-curve-container",children:[t.jsx("h4",{className:"rv-curve-title",children:s("pages.planet.rv.curveTitle")}),t.jsx("div",{ref:N,className:"rv-curve-chart",children:t.jsx("svg",{ref:x})})]}),t.jsxs("div",{className:"rv-data-display",children:[t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.currentRV")}),t.jsxs("div",{className:"rv-data-value rv-data-current",children:[((e.st_radv||0)*1e3+(e.pl_rvamp||0)*Math.sin(r)).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]}),t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.amplitude")}),t.jsxs("div",{className:"rv-data-value",children:[Number(e.pl_rvamp||0).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]}),t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.baseline")}),t.jsxs("div",{className:"rv-data-value",children:[(Number(e.st_radv||0)*1e3).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]})]}),t.jsxs("div",{className:"rv-visualizations-grid",children:[t.jsxs("div",{className:"rv-orbital-views-card",children:[t.jsx("h4",{className:"rv-viz-subtitle",children:s("pages.planet.rv.visualizations.orbitalMotion")}),t.jsxs("div",{className:"rv-orbital-views",children:[t.jsx("div",{className:"rv-orbital-diagram-container",children:t.jsx("div",{ref:j,className:"rv-orbital-diagram",children:t.jsx("svg",{ref:w})})}),t.jsx("div",{className:"rv-side-view-container",children:t.jsx("div",{ref:C,className:"rv-side-view",children:t.jsx("svg",{ref:k})})})]})]}),t.jsxs("div",{className:"rv-spectrum-card",children:[t.jsx("h4",{className:"rv-viz-subtitle",children:s("pages.planet.rv.visualizations.spectralDoppler")}),t.jsx("div",{ref:M,className:"rv-spectrum",children:t.jsx("svg",{ref:F})})]})]}),(()=>{const i=a.filter(f=>f.pl_name!==e.pl_name);return[e,...i].filter(f=>f.pl_rvamp!==null&&f.pl_rvamp>0).length>1?t.jsxs("div",{className:"rv-comparison-container",children:[t.jsx("h4",{className:"rv-comparison-title",children:s("pages.planet.rv.comparisonTitle")}),t.jsx("p",{className:"rv-comparison-description",children:s("pages.planet.rv.comparisonDescription")}),t.jsx("div",{ref:_,className:"rv-comparison-chart",children:t.jsx("svg",{ref:h})}),t.jsxs("div",{className:"rv-comparison-legend",children:[t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot current"}),t.jsx("span",{children:e.pl_name})]}),t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot sibling"}),t.jsx("span",{children:"Sibling planets"})]}),t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot threshold"}),t.jsx("span",{children:s("pages.planet.rv.detectionThreshold")})]})]})]}):null})(),g()]})}function Ve(){let e=0,a=0;for(;e===0;)e=Math.random();for(;a===0;)a=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*a)}function Et(e){if(e.pl_trandep!==null&&e.pl_trandep>0)return e.pl_trandep/100;if(e.pl_ratror!==null&&e.pl_ratror>0)return e.pl_ratror*e.pl_ratror;if(e.pl_rade!==null&&e.st_rad!==null){const s=e.pl_rade/109.1/e.st_rad;return s*s}return .01}function Oe(e){if(e.pl_trandur!==null&&e.pl_orbper!==null&&e.pl_trandur>0)return e.pl_trandur/24/e.pl_orbper;if(e.pl_imppar!==null&&e.pl_ratdor!==null){const a=e.pl_imppar,s=e.pl_ratdor;if(s>0){const n=2/s,o=Math.sqrt(Math.max(0,1-a*a));return n*o*.1}}return .08}function He(e){return Math.min(.2,Math.max(.1,e*.15))}function _t(e,a=1500){const s=[];let n=Et(e);n<5e-4?n*=12:n<.002?n*=8:n<.01?n*=4:n<.05&&(n*=2),n=Math.min(n,.25);let o=Oe(e);o=Math.max(o,.05);const r=He(o),p=.5,x=p-o/2,N=p+o/2,h=x,_=x+r,w=N-r,j=N,k=Math.max(5e-5,n*.03);for(let C=0;C<a;C++){const F=C/(a-1);let M=1;if(F>=h&&F<=j)if(F<_){const u=(F-h)/(_-h);M=1-n*jt(u)}else if(F>w){const u=(F-w)/(j-w);M=1-n*(1-jt(u))}else M=1-n;const S=Ve()*k,D=zt(M+S,1-n-.01,1.01);s.push({phase:F,flux:Number(D.toFixed(6)),fluxClean:Number(M.toFixed(6))})}return s}function Be(e){const s=Et(e)*100;return s<.01?`${(s*1e3).toFixed(1)} ppm`:`${s.toFixed(3)}%`}function Ue(e){if(e.pl_trandur!==null){const a=e.pl_trandur;return a<1?`${(a*60).toFixed(0)} min`:a<24?`${a.toFixed(2)} h`:`${(a/24).toFixed(2)} days`}return"N/A"}function We(e){if(e.pl_orbper===null)return"N/A";const a=e.pl_orbper;return a<365?`${a.toFixed(2)} days`:`${(a/365.25).toFixed(2)} years`}function wt(e){if(e.pl_rade===null)return e.pl_ratror!==null?`${e.pl_ratror.toFixed(2)} Râ˜…`:"N/A";const a=e.pl_rade;return a<.5?`${a.toFixed(2)} RâŠ•`:a<1.5?`${a.toFixed(2)} RâŠ•`:a<10?`${a.toFixed(1)} RâŠ•`:`${(a/109.1).toFixed(2)} Râ˜‰`}function Ge(e){return e.pl_imppar===null?"N/A":e.pl_imppar.toFixed(2)}function qe(e){return e.pl_ratdor===null?"N/A":e.pl_ratdor.toFixed(2)}function Ye({planet:e,siblings:a=[]}){const{t:s}=O(),[n,o]=m.useState(null),[r,p]=m.useState(0),x=m.useRef(null),N=m.useRef(null),h=m.useRef(null),_=m.useRef(null),w=m.useRef(null),j=m.useRef(null),k=m.useRef(null),C=m.useRef(null),F=m.useRef(),M=e.is_transiting&&e.pl_trandep!==null&&e.pl_orbper!==null;if(m.useEffect(()=>{if(!M)return;const u=8e-4,c=()=>{p(g=>(g+u)%1),F.current=requestAnimationFrame(c)};return F.current=requestAnimationFrame(c),()=>{F.current&&cancelAnimationFrame(F.current)}},[M]),m.useEffect(()=>{if(!M||!x.current||!N.current)return;const u=N.current.clientWidth,c=u<500,g=Math.min(u-20,1200),i=380,l={top:20,right:30,bottom:c?100:70,left:70},f=H(x.current);f.selectAll("*").remove(),f.attr("width",g).attr("height",i);const v=_t(e),d=Math.min(...v.map(A=>A.fluxClean)),b=1-d,$=d-b*.5,P=1+b*1.2,z=lt().domain([0,1]).range([l.left,g-l.right]),L=lt().domain([$,P]).range([i-l.bottom,l.top]),y=f.append("g");f.append("rect").attr("width",g).attr("height",i).attr("fill","rgba(0, 0, 0, 0.2)"),y.append("g").attr("class","grid").attr("transform",`translate(0,${i-l.bottom})`).call(tt(z).ticks(5).tickSize(-(i-l.top-l.bottom)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)"),y.append("g").attr("class","grid").attr("transform",`translate(${l.left},0)`).call(et(L).ticks(5).tickSize(-(g-l.left-l.right)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)");const R=.5-(e.pl_trandur&&e.pl_orbper?e.pl_trandur/24/e.pl_orbper/2:.04),K=.5+(e.pl_trandur&&e.pl_orbper?e.pl_trandur/24/e.pl_orbper/2:.04);y.append("rect").attr("x",z(R)).attr("y",l.top).attr("width",z(K)-z(R)).attr("height",i-l.top-l.bottom).attr("fill","#00e5ff").attr("opacity",.05),y.append("line").attr("x1",l.left).attr("x2",g-l.right).attr("y1",L(1)).attr("y2",L(1)).attr("stroke","#ff9500").attr("stroke-width",2.5).attr("stroke-dasharray","4,4").attr("opacity",.8);const I=St().x(A=>z(A.phase)).y(A=>L(A.fluxClean)).curve(le);y.append("path").datum(v).attr("fill","none").attr("stroke","#00e5ff").attr("stroke-width",3).attr("opacity",1).attr("d",I),y.selectAll(".point").data(v.filter((A,rt)=>rt%4===0)).enter().append("circle").attr("class","point").attr("cx",A=>z(A.phase)).attr("cy",A=>L(A.flux)).attr("r",1.5).attr("fill","#00e5ff").attr("opacity",.15);const V=y.append("g").attr("class","marker");V.append("line").attr("class","marker-line").attr("y1",l.top).attr("y2",i-l.bottom).attr("stroke","#ff9500").attr("stroke-width",1.5).attr("opacity",.8),V.append("circle").attr("class","marker-dot").attr("r",6).attr("fill","#ff9500").attr("stroke","#fff").attr("stroke-width",2),mt(f,[{color:"#00e5ff",text:"Model",type:"line"},{color:"#ff9500",text:"Baseline",type:"line",lineStyle:"dashed"},{color:"#00e5ff",text:"Data",type:"circle",size:6}],{x:l.left,y:i-l.bottom+50,width:g-l.left-l.right,isMobile:c,itemPadding:10,forceHorizontal:!0});const B=y.append("g").attr("transform",`translate(0,${i-l.bottom})`).call(tt(z).ticks(5));B.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),B.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),f.append("text").attr("x",g/2).attr("y",i-l.bottom+30).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.transit.xAxisLabel"));const U=y.append("g").attr("transform",`translate(${l.left},0)`).call(et(L).ticks(6).tickFormat(A=>`${Number(A).toFixed(3)}`));U.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),U.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),f.append("text").attr("transform","rotate(-90)").attr("x",-190).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.transit.yAxisLabel"));const X=Math.floor(r*(v.length-1)),G=v[Math.min(X,v.length-1)];V.select(".marker-line").attr("x1",z(r)).attr("x2",z(r)),V.select(".marker-dot").attr("cx",z(r)).attr("cy",L(G.flux))},[r,M,e,s]),m.useEffect(()=>{if(!M||!w.current||!j.current)return;const u=250,c=u/2,g=u/2,i=u/2-20,l=H(w.current);l.selectAll("*").remove(),l.attr("width",u).attr("height",u),l.append("rect").attr("width",u).attr("height",u).attr("fill","rgba(0, 0, 0, 0.3)");const f=i*.7,v=r-.25,d=c+Math.cos(v*2*Math.PI)*f,b=g+Math.sin(v*2*Math.PI)*f;l.append("circle").attr("cx",c).attr("cy",g).attr("r",f).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.2)").attr("stroke-width",1).attr("stroke-dasharray","4,4");const $=35,P=[[c,g],[c-$/2,g+i],[c+$/2,g+i]],z=Math.abs(d-c)<$/2&&b>g;l.append("polygon").attr("points",P.map(R=>R.join(",")).join(" ")).attr("fill",z?"rgba(255, 100, 100, 0.1)":"rgba(0, 229, 255, 0.05)").attr("stroke",z?"rgba(255, 100, 100, 0.3)":"rgba(0, 229, 255, 0.15)").attr("stroke-width",1);const y=l.append("defs").append("radialGradient").attr("id","transitStarGlow");y.append("stop").attr("offset","0%").attr("stop-color","#fff"),y.append("stop").attr("offset","50%").attr("stop-color","#ffdd44"),y.append("stop").attr("offset","100%").attr("stop-color","#ff8800").attr("stop-opacity",0),l.append("circle").attr("cx",c).attr("cy",g).attr("r",18).attr("fill","url(#transitStarGlow)"),l.append("circle").attr("cx",c).attr("cy",g).attr("r",12).attr("fill","#ffdd44"),l.append("circle").attr("cx",d).attr("cy",b).attr("r",5).attr("fill","#00e5ff").attr("stroke","#fff").attr("stroke-width",1),l.append("line").attr("x1",c).attr("x2",c).attr("y1",g+i-5).attr("y2",g+i+5).attr("stroke","rgba(255, 255, 255, 0.5)").attr("stroke-width",1),l.append("text").attr("x",c).attr("y",u-2).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.5)").attr("font-size","9px").text("To Earth"),l.append("text").attr("x",u/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text(s("pages.planet.transit.visualizations.topView"))},[r,M,s]),m.useEffect(()=>{if(!M||!k.current||!C.current)return;const u=250,c=80,g=c/2,i=180,l=H(k.current);l.selectAll("*").remove(),l.attr("width",u).attr("height",c),l.append("rect").attr("width",u).attr("height",c).attr("fill","rgba(0, 0, 0, 0.3)"),l.append("line").attr("x1",35).attr("x2",35+i).attr("y1",g).attr("y2",g).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2);const v=l.append("defs").append("radialGradient").attr("id","transitStarGlowSide");v.append("stop").attr("offset","0%").attr("stop-color","#fff"),v.append("stop").attr("offset","50%").attr("stop-color","#ffdd44"),v.append("stop").attr("offset","100%").attr("stop-color","#ff8800").attr("stop-opacity",0),l.append("circle").attr("cx",u/2).attr("cy",g).attr("r",28).attr("fill","url(#transitStarGlowSide)"),l.append("circle").attr("cx",u/2).attr("cy",g).attr("r",22).attr("fill","#ffdd44");const d=r-.25,b=35+i/2+Math.cos(d*2*Math.PI)*70,$=e.pl_imppar||.3,P=g+$*10,z=Math.sin(d*2*Math.PI)>0;l.append("circle").attr("cx",b).attr("cy",P).attr("r",5).attr("fill",z?"#00e5ff":"#0088aa").attr("stroke","#fff").attr("stroke-width",1).attr("opacity",z?1:.5),l.append("text").attr("x",u/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text(s("pages.planet.transit.visualizations.sideView"))},[r,M,e,s]),m.useEffect(()=>{if(!M||a.length===0||!h.current||!_.current)return;const u=[e,...a].filter(y=>y.is_transiting&&y.pl_trandep!==null&&y.pl_trandep>0).sort((y,R)=>(R.pl_trandep||0)-(y.pl_trandep||0));if(u.length<=1)return;const c=_.current.clientWidth,g=c<500,i=Math.max(g?320:400,c-(g?20:40)),l=Math.max(200,u.length*(g?30:40)),f={top:20,right:g?15:20,bottom:g?60:80,left:g?80:120},v=H(h.current);v.selectAll("*").remove(),v.attr("width",i).attr("height",l),v.append("rect").attr("width",i).attr("height",l).attr("fill","rgba(0, 0, 0, 0.2)");const d=nt(u,y=>y.pl_trandep||.01),b=kt().domain([.001,d*1.2]).range([f.left,i-f.right]),$=Rt().domain(u.map(y=>y.pl_name.split(" ").pop()||y.pl_name)).range([f.top,l-f.bottom]).padding(.2);v.selectAll(".transit-bar").data(u).join("rect").attr("class","transit-bar").attr("x",f.left).attr("y",y=>$(y.pl_name.split(" ").pop()||y.pl_name)).attr("width",y=>b(y.pl_trandep||.01)-f.left).attr("height",$.bandwidth()).attr("fill",y=>y.pl_name===e.pl_name?"#4caf50":"#00ccff").attr("opacity",y=>y.pl_name===e.pl_name?1:.6),b(.01)>=f.left&&b(.01)<=i-f.right&&(v.append("line").attr("x1",b(.01)).attr("x2",b(.01)).attr("y1",f.top).attr("y2",l-f.bottom).attr("stroke","#ff6b6b").attr("stroke-width",2).attr("stroke-dasharray","4,4"),v.append("text").attr("x",b(.01)+5).attr("y",f.top+15).attr("fill","#ff6b6b").attr("font-size","10px").text("0.01%"));const P=v.append("g").attr("transform",`translate(0,${l-f.bottom})`).call(tt(b).ticks(Math.max(2,Math.floor(i/160))).tickFormat(y=>`${y}%`));P.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)").style("text-anchor","end").attr("transform","rotate(-45)").attr("dy","0.5em").attr("dx","-0.5em"),P.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)");const z=v.append("g").attr("transform",`translate(${f.left},0)`).call(et($));z.selectAll("text").attr("font-size",g?"10px":"12px").attr("fill",y=>{var K;return((K=u.find(I=>(I.pl_name.split(" ").pop()||I.pl_name)===y))==null?void 0:K.pl_name)===e.pl_name?"#4caf50":"rgba(255, 255, 255, 0.7)"}).attr("font-weight",y=>{var K;return((K=u.find(I=>(I.pl_name.split(" ").pop()||I.pl_name)===y))==null?void 0:K.pl_name)===e.pl_name?"bold":"normal"}),z.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),v.append("text").attr("x",i/2).attr("y",l-5).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text("Transit Depth (%)");const L=[{color:"#4caf50",text:e.pl_name,type:"rect"},{color:"#00ccff",text:"Sibling planets",type:"rect"},{color:"#ff6b6b",text:"Detection threshold",type:"line",lineStyle:"dashed"}];mt(v,L,{x:f.left,y:l+20,width:i-f.left-f.right,isMobile:g})},[e,a,M]),!M)return t.jsxs("div",{className:"transit-no-data-container",children:[t.jsxs("div",{className:"transit-no-data-message",children:[t.jsx("h4",{className:"transit-no-data-title",children:s("pages.planet.transit.noData.title")}),t.jsx("p",{className:"transit-no-data-explanation",children:s("pages.planet.transit.noData.message",{method:e.discoverymethod||"unknown method"})})]}),S(),t.jsxs("div",{className:"transit-example",children:[t.jsx("p",{children:t.jsx("strong",{children:s("pages.planet.transit.noData.example")})}),t.jsxs("ul",{children:[t.jsx("li",{children:s("pages.planet.transit.noData.jupiterExample")}),t.jsx("li",{children:s("pages.planet.transit.noData.earthExample")}),t.jsx("li",{children:s("pages.planet.transit.noData.detectionLimit")})]})]})]});function S(){const u=[{key:"geometry",title:s("pages.planet.transit.explanation.geometryTitle"),content:s("pages.planet.transit.explanation.geometryContent")},{key:"depth",title:s("pages.planet.transit.explanation.depthTitle"),content:s("pages.planet.transit.explanation.depthContent")},{key:"timing",title:s("pages.planet.transit.explanation.timingTitle"),content:s("pages.planet.transit.explanation.timingContent")}];return t.jsx("div",{className:"transit-explanation-header",children:u.map(c=>t.jsxs("div",{className:"transit-explanation-section",children:[t.jsxs("button",{className:"transit-explanation-trigger",onClick:()=>o(n===c.key?null:c.key),children:[t.jsx("span",{children:c.title}),t.jsx("span",{className:`transit-explanation-icon ${n===c.key?"expanded":""}`,children:"â€º"})]}),n===c.key&&t.jsx("div",{className:"transit-explanation-content",children:c.content})]},c.key))})}function D(){return t.jsxs("div",{className:"transit-technical-details",children:[t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.depth")}),t.jsx("div",{className:"transit-detail-value",children:Be(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.duration")}),t.jsx("div",{className:"transit-detail-value",children:Ue(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.period")}),t.jsx("div",{className:"transit-detail-value",children:We(e)})]}),e.pl_ratror!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.radiusRatio")}),t.jsx("div",{className:"transit-detail-value",children:e.pl_ratror.toFixed(3)})]}),e.pl_ratdor!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.semiMajorRatio")}),t.jsx("div",{className:"transit-detail-value",children:qe(e)})]}),e.pl_imppar!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.impactParameter")}),t.jsx("div",{className:"transit-detail-value",children:Ge(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.planetRadius")}),t.jsx("div",{className:"transit-detail-value",children:wt(e)})]})]})}return t.jsxs("div",{className:"transit-section",children:[t.jsx("p",{className:"transit-intro",children:s("pages.planet.transit.intro")}),S(),t.jsxs("div",{className:"transit-curve-container",children:[t.jsx("h4",{className:"transit-curve-title",children:s("pages.planet.transit.curveTitle")}),t.jsx("div",{ref:N,className:"transit-curve-chart",children:t.jsx("svg",{ref:x})})]}),t.jsxs("div",{className:"transit-data-display",children:[t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.currentFlux")}),t.jsx("div",{className:"transit-data-value",children:(()=>{const u=_t(e),c=Math.floor(r*(u.length-1));return u[Math.min(c,u.length-1)].flux.toFixed(4)})()})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.transitDepth")}),t.jsxs("div",{className:"transit-data-value",children:[((e.pl_trandep||(e.pl_ratror?e.pl_ratror*e.pl_ratror*100:.01))*100).toFixed(2),"%"]})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.planetRadius")}),t.jsx("div",{className:"transit-data-value",children:wt(e)})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.phase")}),t.jsx("div",{className:"transit-data-value",children:r.toFixed(2)})]})]}),t.jsxs("div",{className:"transit-visualizations-grid",children:[t.jsxs("div",{className:"transit-orbital-card",children:[t.jsx("h4",{className:"transit-viz-subtitle",children:s("pages.planet.transit.visualizations.orbitalGeometry")}),t.jsxs("div",{className:"transit-orbital-views",children:[t.jsx("div",{className:"transit-orbital-diagram-container",children:t.jsx("div",{ref:j,className:"transit-orbital-diagram",children:t.jsx("svg",{ref:w})})}),t.jsx("div",{className:"transit-side-view-container",children:t.jsx("div",{ref:C,className:"transit-side-view",children:t.jsx("svg",{ref:k})})})]})]}),t.jsxs("div",{className:"transit-legend-card",children:[t.jsx("h4",{className:"transit-viz-subtitle",children:s("pages.planet.transit.visualizations.whatWeLearn")}),t.jsxs("div",{className:"transit-legend-section",children:[t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.duringTransit")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem2")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem3")}),t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.outsideTransit")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.outsideTransitItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.outsideTransitItem2")}),t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.whatWeLearn")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem2")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem3")})]})]})]}),a.length>0&&t.jsxs("div",{className:"transit-comparison-container",children:[t.jsx("h4",{className:"transit-comparison-title",children:s("pages.planet.transit.comparisonTitle")}),t.jsx("p",{className:"transit-comparison-description",children:s("pages.planet.transit.comparisonDescription")}),t.jsx("div",{ref:_,className:"transit-comparison-chart",children:t.jsx("svg",{ref:h})})]}),D()]})}function Ze({isOpen:e,onClose:a}){const{t:s}=O();return e?t.jsx("div",{className:"viz-dialog-overlay",onClick:a,children:t.jsxs("div",{className:"viz-dialog",onClick:n=>n.stopPropagation(),children:[t.jsx("button",{className:"viz-dialog-close",onClick:a,children:"Ã—"}),t.jsx("h3",{className:"viz-dialog-title",children:s("pages.planet.visualization.title")}),t.jsxs("div",{className:"viz-dialog-content",children:[t.jsx("p",{children:s("pages.planet.visualization.intro")}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.density.title")}),t.jsx("p",{children:s("pages.planet.visualization.density.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.insolation.title")}),t.jsx("p",{children:s("pages.planet.visualization.insolation.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.starTemp.title")}),t.jsx("p",{children:s("pages.planet.visualization.starTemp.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.planetType.title")}),t.jsx("p",{children:s("pages.planet.visualization.planetType.description")})]}),t.jsx("p",{className:"viz-disclaimer",children:s("pages.planet.visualization.disclaimer")})]})]})}):null}function W({title:e,children:a,className:s=""}){return t.jsxs("section",{className:`planet-section ${s}`,children:[e&&t.jsx("h2",{className:"planet-section-title",children:e}),t.jsx("div",{className:"planet-section-content",children:a})]})}function ia(){const{t:e}=O(),{planetId:a}=Yt(),s=Zt(),{getPlanetBySlug:n,getPlanetsByHost:o,isLoading:r}=Xt(),[p,x]=m.useState(!1),N=m.useRef(null),h=a?n(a):void 0,_=m.useMemo(()=>h?o(h.hostname):[],[h,o]);m.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[a]);const w=()=>{if(N.current){const F=N.current.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:F,behavior:"smooth"})}};if(r)return t.jsx("div",{className:"planet-page",children:t.jsx(Jt,{message:e("pages.planet.loading")})});if(!h)return t.jsx("div",{className:"planet-page",children:t.jsxs("div",{className:"planet-not-found",children:[t.jsx("h1",{children:e("pages.planet.notFound.title")}),t.jsx("p",{children:e("pages.planet.notFound.message",{planetId:a||""})}),t.jsx(pt,{to:"/planets",className:"planet-back-link",children:e("pages.planet.notFound.browseAll")})]})});const j=h?oe(h):null;return t.jsxs(t.Fragment,{children:[j&&t.jsx(ce,{...j}),t.jsxs("div",{className:"planet-page",children:[t.jsx("button",{className:"planet-back-button",onClick:()=>s(-1),children:e("pages.planet.back")}),t.jsxs("div",{className:"planet-hero",children:[t.jsx("div",{className:"planet-canvas-container",children:t.jsx(he,{planet:h})}),t.jsx("button",{className:"viz-info-button",onClick:()=>x(!0),title:e("pages.planet.visualization.title"),children:t.jsx("span",{className:"viz-info-icon",children:"i"})}),t.jsx(Ze,{isOpen:p,onClose:()=>x(!1)}),t.jsxs("div",{className:"planet-hero-text",children:[t.jsx("h1",{className:"planet-hero-title",children:h.pl_name}),t.jsx("p",{className:"planet-hero-subtitle",children:h.planet_type||e("pages.planet.exoplanet")}),t.jsxs("div",{className:"planet-hero-links",children:[t.jsxs("button",{className:"planet-hero-link",onClick:w,children:[e("pages.planet.viewStats")," â†“"]}),h.hostname&&t.jsx(pt,{to:`/stars/${ht(h.hostname)}`,className:"planet-hero-link",children:e("pages.planet.viewSystem",{hostname:h.hostname})})]})]})]}),t.jsxs("div",{className:"planet-content",ref:N,children:[t.jsx(W,{title:e("pages.planet.sections.earthComparison"),className:"section-comparison",children:t.jsx(Me,{planet:h})}),h.has_rv_data?t.jsx(W,{title:e("pages.planet.sections.radialVelocity"),className:"section-rv",children:t.jsx(Ie,{planet:h,siblings:_})}):h.is_transiting||h.pl_trandep!==null&&h.pl_orbper!==null?t.jsx(W,{title:e("pages.planet.sections.transitDetection"),className:"section-transit",children:t.jsx(Ye,{planet:h,siblings:_})}):null,t.jsxs("div",{className:"planet-section-row",children:[t.jsx(W,{title:e("pages.planet.sections.habitability"),className:"section-habitability",children:t.jsx(Ee,{planet:h})}),t.jsx(W,{title:e("pages.planet.sections.temperature"),className:"section-temperature",children:t.jsx($e,{planet:h})})]}),t.jsx(W,{title:e("pages.planet.sections.orbitalPosition"),className:"section-orbital",children:t.jsx(Ke,{planet:h,siblings:_})}),h.distance_ly&&h.distance_ly>0&&t.jsx(W,{title:e("pages.planet.sections.travelTime"),className:"section-travel",children:t.jsx(se,{distanceLy:h.distance_ly})}),t.jsx(W,{className:"section-details",children:t.jsx(_e,{planet:h})}),_.length>1&&t.jsx(W,{className:"section-siblings",children:t.jsx(Pe,{currentPlanet:h,siblings:_})})]})]})]})}export{ia as default};
