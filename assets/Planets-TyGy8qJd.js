import{u as F,j as e,L as J,n as K,a as U,c as V,r as i}from"./index-C0GTMcbo.js";import{P as W}from"./PlanetVisualization-B2WVg5mO.js";function Z({planet:s}){const{t}=F();return e.jsx(J,{to:`/planets/${K(s.pl_name)}`,className:"planet-card-link",children:e.jsxs("div",{className:"planet-card",children:[e.jsx("div",{className:"planet-card-visualization",children:e.jsx(W,{planet:s,size:80})}),e.jsxs("div",{className:"planet-card-header",children:[e.jsxs("div",{className:"planet-card-title-group",children:[e.jsx("h3",{className:"planet-card-name",children:s.pl_name}),e.jsx("p",{className:"planet-card-host",children:s.hostname})]}),s.planet_type&&e.jsx("div",{className:"planet-type-badge",children:s.planet_type})]}),e.jsxs("div",{className:"planet-card-properties",children:[s.pl_rade!==null&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.radius")}),e.jsxs("span",{className:"property-value",children:[s.pl_rade.toFixed(2)," R⊕"]})]}),s.pl_bmasse!==null&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.mass")}),e.jsxs("span",{className:"property-value",children:[s.pl_bmasse.toFixed(2)," M⊕"]})]}),s.pl_orbper!==null&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.period")}),e.jsxs("span",{className:"property-value",children:[s.pl_orbper.toFixed(2)," d"]})]}),s.pl_eqt!==null&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.temp")}),e.jsxs("span",{className:"property-value",children:[Math.round(s.pl_eqt)," K"]})]}),s.distance_ly!==null&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.distance")}),e.jsx("span",{className:"property-value",children:s.distance_ly<1e3?`${s.distance_ly.toFixed(1)} ly`:`${(s.distance_ly/1e3).toFixed(1)} kly`})]}),s.disc_year&&e.jsxs("div",{className:"planet-property",children:[e.jsx("span",{className:"property-label",children:t("pages.planetCard.properties.discovered")}),e.jsx("span",{className:"property-value",children:s.disc_year})]})]}),e.jsxs("div",{className:"planet-card-flags",children:[s.is_habitable_zone&&e.jsx("span",{className:"flag-badge flag-habitable",children:t("pages.planetCard.flags.habitableZone")}),s.is_earth_like&&e.jsx("span",{className:"flag-badge flag-earth-like",children:t("pages.planetCard.flags.earthLike")}),s.is_top_habitable_candidate&&e.jsx("span",{className:"flag-badge flag-top-candidate",children:t("pages.planetCard.flags.topCandidate")}),s.is_potentially_rocky&&e.jsx("span",{className:"flag-badge flag-rocky",children:t("pages.planetCard.flags.potentiallyRocky")}),s.is_hot_jupiter&&e.jsx("span",{className:"flag-badge flag-hot-jupiter",children:t("pages.planetCard.flags.hotJupiter")}),s.is_hot_neptune&&e.jsx("span",{className:"flag-badge flag-hot-neptune",children:t("pages.planetCard.flags.hotNeptune")}),s.is_ultra_hot&&e.jsx("span",{className:"flag-badge flag-ultra-hot",children:t("pages.planetCard.flags.ultraHot")}),s.is_frozen_world&&e.jsx("span",{className:"flag-badge flag-frozen",children:t("pages.planetCard.flags.frozenWorld")}),s.is_ultra_dense&&e.jsx("span",{className:"flag-badge flag-ultra-dense",children:t("pages.planetCard.flags.ultraDense")}),s.is_puffy&&e.jsx("span",{className:"flag-badge flag-puffy",children:t("pages.planetCard.flags.puffy")}),s.is_ultra_short_period&&e.jsx("span",{className:"flag-badge flag-ultra-short",children:t("pages.planetCard.flags.ultraShortPeriod")}),s.is_eccentric_orbit&&e.jsx("span",{className:"flag-badge flag-eccentric",children:t("pages.planetCard.flags.eccentricOrbit")}),s.is_likely_tidally_locked&&e.jsx("span",{className:"flag-badge flag-tidally-locked",children:t("pages.planetCard.flags.tidallyLocked")}),s.cb_flag===1&&e.jsx("span",{className:"flag-badge flag-circumbinary",children:t("pages.planetCard.flags.circumbinary")}),s.is_rich_system&&e.jsx("span",{className:"flag-badge flag-rich-system",children:t("pages.planetCard.flags.richSystem")}),s.is_very_nearby&&e.jsx("span",{className:"flag-badge flag-very-nearby",children:t("pages.planetCard.flags.veryNearby")}),s.is_solar_analog&&e.jsx("span",{className:"flag-badge flag-solar-analog",children:t("pages.planetCard.flags.solarAnalog")}),s.is_red_dwarf_host&&e.jsx("span",{className:"flag-badge flag-red-dwarf",children:t("pages.planetCard.flags.redDwarfHost")}),s.is_controversial&&e.jsx("span",{className:"flag-badge flag-controversial",children:t("pages.planetCard.flags.controversial")})]}),e.jsx("div",{className:"planet-card-footer",children:e.jsx("span",{className:"planet-card-link-hint",children:t("pages.planetCard.viewDetails")})})]})})}const _=24;function ae(){const{t:s}=F(),{getAllPlanets:t,isLoading:z,error:v}=U(),[c,C]=V(),[u,k]=i.useState(c.get("sort")||"name"),[p,S]=i.useState(c.get("types")?c.get("types").split(","):[]),[g,P]=i.useState(c.get("classes")?c.get("classes").split(","):[]),[h,w]=i.useState(c.get("search")||""),[f,M]=i.useState(c.get("habitable")==="true"),[x,L]=i.useState(c.get("earthlike")==="true"),[O,b]=i.useState(parseInt(c.get("page")||"1",10)),m=i.useMemo(()=>t(),[t]),A=i.useMemo(()=>{const a=new Set;return m.forEach(r=>{r.planet_type&&a.add(r.planet_type)}),Array.from(a).sort()},[m]),I=i.useMemo(()=>{const a=new Set;return m.forEach(r=>{r.star_class&&a.add(r.star_class)}),Array.from(a).sort()},[m]),y=i.useMemo(()=>{let a=m;if(p.length>0&&(a=a.filter(l=>l.planet_type&&p.includes(l.planet_type))),g.length>0&&(a=a.filter(l=>l.star_class&&g.includes(l.star_class))),f&&(a=a.filter(l=>l.is_habitable_zone)),x&&(a=a.filter(l=>l.is_earth_like)),h){const l=h.toLowerCase();a=a.filter(o=>o.pl_name.toLowerCase().includes(l)||o.hostname.toLowerCase().includes(l))}return[...a].sort((l,o)=>{switch(u){case"distance":return(l.distance_ly??1/0)-(o.distance_ly??1/0);case"mass":return(o.pl_bmasse??0)-(l.pl_bmasse??0);case"radius":return(o.pl_rade??0)-(l.pl_rade??0);case"discoveryYear":return o.disc_year-l.disc_year;case"habitability":const G=l.habitability_score??0;return(o.habitability_score??0)-G;case"name":default:return l.pl_name.localeCompare(o.pl_name)}})},[m,p,g,f,x,h,u]),d=Math.ceil(y.length/_),n=Math.min(Math.max(1,O),d||1),N=(n-1)*_,T=N+_,E=y.slice(N,T);i.useEffect(()=>{const a=new URLSearchParams;u!=="name"&&a.set("sort",u),p.length>0&&a.set("types",p.join(",")),g.length>0&&a.set("classes",g.join(",")),h&&a.set("search",h),f&&a.set("habitable","true"),x&&a.set("earthlike","true"),n!==1&&a.set("page",String(n)),C(a,{replace:!0})},[u,p,g,h,f,x,n,C]);const j=()=>{b(1)},R=a=>{S(r=>r.includes(a)?r.filter(l=>l!==a):[...r,a]),j()},$=a=>{P(r=>r.includes(a)?r.filter(l=>l!==a):[...r,a]),j()},D=a=>{w(a),j()},H=a=>{k(a),j()},q=()=>{M(a=>!a),j()},B=()=>{L(a=>!a),j()},Y=()=>{S([]),P([]),w(""),M(!1),L(!1),k("name"),b(1)};if(z)return e.jsx("div",{className:"spinner-container",children:e.jsxs("div",{className:"spinner-content",children:[e.jsx("div",{className:"spinner-orbit",children:e.jsx("div",{className:"spinner-planet"})}),e.jsx("div",{className:"spinner-text",children:s("pages.planets.loading")})]})});if(v)return e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{className:"error-title",children:s("pages.planets.errorTitle")}),e.jsx("p",{className:"error-message",children:v})]})});const Q=p.length>0||g.length>0||h||f||x;return e.jsxs("div",{className:"page-container",children:[e.jsx("h1",{className:"page-title",children:s("pages.planets.title")}),e.jsxs("div",{className:"planets-controls",children:[e.jsx("div",{className:"search-bar",children:e.jsx("input",{type:"text",placeholder:s("pages.planets.searchPlaceholder"),value:h,onChange:a=>D(a.target.value),className:"search-input"})}),e.jsxs("div",{className:"controls-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.planetType")}),e.jsx("div",{className:"type-buttons",children:A.map(a=>e.jsx("button",{onClick:()=>R(a),className:`type-button ${p.includes(a)?"active":""}`,children:a},a))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.starClass")}),e.jsx("div",{className:"class-buttons",children:I.map(a=>e.jsx("button",{onClick:()=>$(a),className:`class-button ${g.includes(a)?"active":""}`,children:a},a))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",children:s("pages.planets.filters.sortBy")}),e.jsxs("select",{value:u,onChange:a=>H(a.target.value),className:"sort-select",children:[e.jsx("option",{value:"name",children:s("pages.planets.sort.name")}),e.jsx("option",{value:"distance",children:s("pages.planets.sort.distance")}),e.jsx("option",{value:"mass",children:s("pages.planets.sort.mass")}),e.jsx("option",{value:"radius",children:s("pages.planets.sort.radius")}),e.jsx("option",{value:"discoveryYear",children:s("pages.planets.sort.discoveryYear")}),e.jsx("option",{value:"habitability",children:s("pages.planets.sort.habitability")})]})]})]}),e.jsxs("div",{className:"toggle-filters",children:[e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:q,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.habitableOnly")})]}),e.jsxs("label",{className:"toggle-filter",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:B,className:"toggle-checkbox"}),e.jsx("span",{children:s("pages.planets.filters.earthLikeOnly")})]})]}),Q&&e.jsx("button",{onClick:Y,className:"clear-button",children:s("pages.planets.filters.clearFilters")}),e.jsxs("div",{className:"results-info",children:[s(y.length!==1?"pages.planets.results.showing_plural":"pages.planets.results.showing",{start:N+1,end:Math.min(T,y.length),filtered:y.length})," ",s("pages.planets.results.total",{total:m.length})]})]}),E.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"planets-grid",children:E.map(a=>e.jsx("div",{className:"planets-grid-item",children:e.jsx(Z,{planet:a})},a.pl_name))}),d>1&&e.jsxs("div",{className:"pagination-container",children:[e.jsx("button",{onClick:()=>b(Math.max(1,n-1)),disabled:n===1,className:"pagination-button",children:s("pages.planets.pagination.previous")}),e.jsx("div",{className:"pagination-info",children:s("pages.planets.pagination.pageOf",{current:n,total:d})}),e.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,d)},(a,r)=>{let l=r+1;return d>5&&(n<=3?l=r+1:n>=d-2?l=d-4+r:l=n-2+r),e.jsx("button",{onClick:()=>b(l),className:`pagination-number ${n===l?"active":""}`,children:l},l)})}),e.jsx("button",{onClick:()=>b(Math.min(d,n+1)),disabled:n===d,className:"pagination-button",children:s("pages.planets.pagination.next")})]})]}):e.jsx("div",{className:"placeholder",children:s("pages.planets.results.noResults")})]})}export{ae as default};
