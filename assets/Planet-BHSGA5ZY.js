import{r as c,j as t,k as Pt,l as Dt,t as Kt,i as It,E as Lt,G as Vt,H as Ht,I as Ot,s as ct,D as Bt,u as V,J as Wt,n as vt,K as at,N as Ut,O as Gt,R as qt,L as gt,P as Yt,z as Xt,d as Zt,c as Jt}from"./index-M6QGdIpB.js";import{C as Qt,a as te}from"./react-three-fiber.esm-DrqnEeAi.js";import{c as ee,T as ae}from"./TravelTimeCalculator-CbRvOgD7.js";import{O as se,s as q,d as pt,m as dt,e as it,f as nt,g as St,b as zt}from"./transform-zGpkAyxS.js";import{r as jt,u as yt}from"./reviewService-BRuZrJ5q.js";import{U as re}from"./UserPrompt-BD6shOAa.js";import{m as ie,l as Tt,a as Nt,b as ne}from"./monotone-CvAkBM_g.js";function _t(e,a,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+a)/6,(e._y0+4*e._y1+s)/6)}function At(e){this._context=e}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,a){switch(e=+e,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_t(this,e,a);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=a}};function xt(e){return new At(e)}function wt(e,a,s,r=.5){return e==null||isNaN(e)?r:Math.max(0,Math.min(1,(e-a)/(s-a)))}function $t(e,a,s){return Math.max(a,Math.min(s,e))}function kt(e){const a=$t(e,0,1);return a*a*(3-2*a)}function le({count:e=2e3}){const a=c.useMemo(()=>{const s=new Float32Array(e*3);for(let r=0;r<e;r++){const p=Math.random()*Math.PI*2,i=Math.acos(2*Math.random()-1),f=200;s[r*3]=f*Math.sin(i)*Math.cos(p),s[r*3+1]=f*Math.sin(i)*Math.sin(p),s[r*3+2]=f*Math.cos(i)}return s},[e]);return t.jsxs("points",{children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:a,itemSize:3})}),t.jsx("pointsMaterial",{size:1.2,color:16777215,transparent:!0,opacity:.5,sizeAttenuation:!1})]})}function oe(e){let a=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);a=(a<<5)-a+r,a=a&a}return Math.abs(a%1e3)/1e3}function ce({planet:e}){const a=c.useRef(null),s=c.useRef(null),r=c.useRef(null),p=c.useRef(null),i=c.useMemo(()=>Pt(e),[e]),f=c.useMemo(()=>Dt(i),[i]),x=c.useMemo(()=>Kt("v2"),[]),N=c.useMemo(()=>It({planet:e,detailLevel:"detailed",starTemp:e.st_teff??void 0}),[e]),m=c.useMemo(()=>Lt(e),[e]),_=c.useMemo(()=>Vt(e),[e]),w=e.is_likely_tidally_locked??!1,k=c.useMemo(()=>{const $=oe(e.pl_name),z=wt(e.pl_dens,.3,13,.5),A=wt(e.pl_insol,.01,1e4,.5),y=Ht(e).temperatureK,u=ee(y,$);return{uBaseColor:{value:u},uRingColor:{value:u},uTime:{value:0},uSeed:{value:$},uDensity:{value:z},uInsolation:{value:A},uInnerRadius:{value:2.5},uOuterRadius:{value:4}}},[e]);te(($,z)=>{a.current&&(a.current.rotation.x=_,w?a.current.rotation.y+=z*.02:a.current.rotation.y+=z*m);const A=$.clock.elapsedTime;r.current&&(r.current.uniforms.uTime.value=A),p.current&&(p.current.uniforms.uTime.value=A)});const R=c.useMemo(()=>Ot(e),[e]),E=c.useMemo(()=>Math.PI/2,[]);return t.jsx("group",{position:[0,.2,0],children:t.jsxs("group",{ref:a,children:[t.jsxs("mesh",{ref:s,children:[t.jsx("sphereGeometry",{args:[2,64,64]}),t.jsx("shaderMaterial",{ref:r,vertexShader:ct.get(x),fragmentShader:ct.get(f),uniforms:N})]}),R&&t.jsxs("mesh",{rotation:[E,0,0],children:[t.jsx("ringGeometry",{args:[2.5,4,128,1]}),t.jsx("shaderMaterial",{ref:p,vertexShader:ct.get("ringsVert"),fragmentShader:ct.get("ringsFrag"),uniforms:k,transparent:!0,side:Bt,depthWrite:!1})]})]})})}function de({planet:e}){return t.jsx(Qt,{camera:{position:[0,0,9],fov:50},style:{background:"transparent"},children:t.jsxs(c.Suspense,{fallback:null,children:[t.jsx("ambientLight",{intensity:.4}),t.jsx("hemisphereLight",{args:["#ffffff","#444444",.4]}),t.jsx("directionalLight",{position:[5,3,5],intensity:1}),t.jsx(le,{count:2e3}),t.jsx(ce,{planet:e}),t.jsx(se,{enablePan:!1,enableZoom:!1,autoRotate:!0,autoRotateSpeed:.5})]})})}const pe={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};function Et({rating:e,onChange:a,readonly:s=!1,size:r="md"}){const p=pe[r],i=x=>{!s&&a&&a(x)},f=(x,N)=>{!s&&a&&(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),a(x))};return t.jsx("div",{className:`star-rating ${s?"star-rating-readonly":"star-rating-interactive"}`,children:[1,2,3,4,5].map(x=>t.jsx("button",{type:"button",className:`star-rating-star ${e>=x?"filled":"empty"}`,onClick:()=>i(x),onKeyDown:N=>f(x,N),disabled:s,"aria-label":`${x} star${x!==1?"s":""}`,tabIndex:s?-1:0,children:t.jsx("svg",{className:p,fill:e>=x?"#faca15":"#4b5563",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},x))})}function me(e){const a=Date.now(),s=365.25*24*60*60*1e3,r=(a-e)/s;if(r>1e3){const i=Math.round(r);if(i>=1e6)return`~${(i/1e6).toFixed(1)}M years ago`;if(i>=1e3)return`~${(i/1e3).toFixed(1)}k years ago`}return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function he({review:e}){const a=e.author;return t.jsxs("article",{className:"review-card",children:[t.jsxs("header",{className:"review-header",children:[t.jsx("img",{className:"review-avatar",src:(a==null?void 0:a.avatar)||`https://api.dicebear.com/7.x/bottts-neutral/svg?seed=${e.userid}`,alt:`${(a==null?void 0:a.name)||"Unknown"}'s avatar`}),t.jsxs("div",{className:"review-author-info",children:[t.jsx("span",{className:"review-author-name",children:(a==null?void 0:a.name)||"Unknown Traveler"}),t.jsx("time",{className:"review-date",children:me(e.date)})]})]}),t.jsxs("div",{className:"review-rating-row",children:[t.jsx(Et,{rating:e.rate,readonly:!0,size:"sm"}),t.jsx("h3",{className:"review-title",children:e.title})]}),t.jsx("p",{className:"review-text",children:e.text})]})}function xe({reviews:e,loading:a}){const{t:s}=V();return a?t.jsxs("div",{className:"reviews-loading",children:[t.jsx("div",{className:"reviews-loading-spinner"}),t.jsx("span",{children:s("common.loading")})]}):e.length===0?t.jsx("div",{className:"reviews-empty",children:t.jsx("p",{children:s("pages.planet.info.reviews.empty")})}):t.jsx("div",{className:"reviews-list",children:e.map(r=>t.jsx(he,{review:r},r.id))})}function fe({user:e,onSubmit:a,onClose:s}){const{t:r}=V(),[p,i]=c.useState(4),[f,x]=c.useState(""),[N,m]=c.useState(""),[_,w]=c.useState(!1),[k,R]=c.useState({}),E=()=>{const A={};return f.trim().length<3&&(A.title=r("pages.planet.info.reviews.form.errorTitleMin")),N.trim().length<10&&(A.text=r("pages.planet.info.reviews.form.errorTextMin")),R(A),Object.keys(A).length===0},$=async A=>{if(A.preventDefault(),!!E()){w(!0);try{await a({rate:p,title:f.trim(),text:N.trim()})}finally{w(!1)}}},z=A=>{A.target===A.currentTarget&&!_&&s()};return t.jsx("div",{className:"review-form-overlay",onClick:z,children:t.jsxs("div",{className:"review-form-modal",children:[t.jsx("button",{className:"review-form-close",onClick:s,disabled:_,"aria-label":"Close",children:"√ó"}),t.jsx("h2",{className:"review-form-title",children:r("pages.planet.info.reviews.form.title")}),t.jsxs("div",{className:"review-form-user",children:[t.jsx("img",{src:e.avatar,alt:e.name,className:"review-form-avatar"}),t.jsx("span",{className:"review-form-username",children:e.name})]}),t.jsxs("form",{onSubmit:$,className:"review-form",children:[t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{className:"review-form-label",children:r("pages.planet.info.reviews.form.ratingLabel")}),t.jsx(Et,{rating:p,onChange:i,size:"lg"})]}),t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{htmlFor:"review-title",className:"review-form-label",children:r("pages.planet.info.reviews.form.titleLabel")}),t.jsx("input",{id:"review-title",type:"text",className:`review-form-input ${k.title?"error":""}`,placeholder:r("pages.planet.info.reviews.form.titlePlaceholder"),value:f,onChange:A=>{x(A.target.value),k.title&&R({...k,title:void 0})},disabled:_,maxLength:100}),k.title&&t.jsx("span",{className:"review-form-error",children:k.title})]}),t.jsxs("div",{className:"review-form-field",children:[t.jsx("label",{htmlFor:"review-text",className:"review-form-label",children:r("pages.planet.info.reviews.form.textLabel")}),t.jsx("textarea",{id:"review-text",className:`review-form-textarea ${k.text?"error":""}`,placeholder:r("pages.planet.info.reviews.form.textPlaceholder"),value:N,onChange:A=>{m(A.target.value),k.text&&R({...k,text:void 0})},disabled:_,rows:4,maxLength:1e3}),k.text&&t.jsx("span",{className:"review-form-error",children:k.text})]}),t.jsx("button",{type:"submit",className:"review-form-submit",disabled:_,children:r(_?"common.loading":"pages.planet.info.reviews.form.submit")})]})]})})}function ue({planetId:e}){const{t:a}=V(),{profile:s,loading:r}=Wt(),[p,i]=c.useState([]),[f,x]=c.useState(!0),[N,m]=c.useState(!1),[_,w]=c.useState(!1),[k,R]=c.useState(null),E=s||k,$=c.useCallback(async()=>{x(!0);try{const u=await jt.getReviews(e);i(u)}finally{x(!1)}},[e]);c.useEffect(()=>{$()},[$]),c.useEffect(()=>{const u=yt.getUser();u&&R(u)},[]);const z=()=>{E?m(!0):w(!0)},A=u=>{const o=yt.createUser(u);R(o),w(!1),m(!0)},F=()=>{w(!1),s&&m(!0)},y=async u=>{E&&(await jt.createReview({planet:e,userid:E.uid,rate:u.rate,title:u.title,text:u.text},E),m(!1),await $())};return r?t.jsx("div",{className:"reviews-section",children:t.jsx("div",{className:"reviews-loading",children:"Loading..."})}):t.jsxs("div",{className:"reviews-section",children:[t.jsx("div",{className:"reviews-header",children:t.jsx("button",{className:"reviews-write-button",onClick:z,children:a("pages.planet.info.reviews.writeReview")})}),t.jsx(xe,{reviews:p,loading:f}),_&&t.jsx(re,{onSubmit:A,onClose:F}),N&&E&&t.jsx(fe,{user:E,onSubmit:y,onClose:()=>m(!1)})]})}const ge={pl_rade:{value:1,unit:"R‚äï",labelKey:"earthRadius"},pl_bmasse:{value:1,unit:"M‚äï",labelKey:"earthMass"},pl_dens:{value:5.51,unit:"g/cm¬≥",labelKey:"earthDensity"},pl_eqt:{value:255,unit:"K",labelKey:"earthEqTemp"},pl_insol:{value:1,unit:"S‚äï",labelKey:"earthInsolation"},pl_orbper:{value:365.25,unit:"days",labelKey:"earthOrbitalPeriod"},pl_orbsmax:{value:1,unit:"AU",labelKey:"earthSemiMajorAxis"},pl_orbeccen:{value:.017,unit:"",labelKey:"earthOrbitalEccentricity"},st_teff:{value:5778,unit:"K",labelKey:"sunTemperature"},st_met:{value:0,unit:"dex",labelKey:"sunMetallicity"},st_age:{value:4.6,unit:"Gyr",labelKey:"sunAge"}},ve=[{id:"hostname",labelKey:"hostStar",format:e=>e.hostname},{id:"planet_type",labelKey:"planetType",format:(e,a)=>e.planet_type||a},{id:"pl_rade",labelKey:"radius",format:(e,a)=>e.pl_rade?`${e.pl_rade.toFixed(2)} R‚äï`:a,earthRef:"pl_rade"},{id:"pl_bmasse",labelKey:"mass",format:(e,a)=>e.pl_bmasse?`${e.pl_bmasse.toFixed(2)} M‚äï`:a,earthRef:"pl_bmasse"},{id:"pl_dens",labelKey:"density",format:(e,a)=>e.pl_dens?`${e.pl_dens.toFixed(2)} g/cm¬≥`:a,earthRef:"pl_dens"},{id:"pl_insol",labelKey:"insolationFlux",format:(e,a)=>e.pl_insol?`${e.pl_insol.toFixed(2)} S‚äï`:a,earthRef:"pl_insol"},{id:"pl_eqt",labelKey:"eqTemperature",format:(e,a)=>e.pl_eqt?`${e.pl_eqt.toFixed(0)} K`:a,earthRef:"pl_eqt"},{id:"pl_orbper",labelKey:"orbitalPeriod",format:(e,a)=>e.pl_orbper?`${e.pl_orbper.toFixed(2)} days`:a,earthRef:"pl_orbper"},{id:"pl_orbsmax",labelKey:"semiMajorAxis",format:(e,a)=>e.pl_orbsmax?`${e.pl_orbsmax.toFixed(3)} AU`:a,earthRef:"pl_orbsmax"},{id:"pl_orbeccen",labelKey:"orbitalEccentricity",format:(e,a)=>e.pl_orbeccen!==null?e.pl_orbeccen.toFixed(3):a,earthRef:"pl_orbeccen"}],be=[{id:"st_teff",labelKey:"starTemperature",format:(e,a)=>e.st_teff?`${e.st_teff.toFixed(0)} K`:a,earthRef:"st_teff"},{id:"st_met",labelKey:"starMetallicity",format:(e,a)=>e.st_met!==null?`${e.st_met.toFixed(2)} dex`:a,earthRef:"st_met"},{id:"st_age",labelKey:"starAge",format:(e,a)=>e.st_age?`${e.st_age.toFixed(2)} Gyr`:a,earthRef:"st_age"}],je=[{id:"disc_year",labelKey:"discoveryYear",format:(e,a)=>{var s;return((s=e.disc_year)==null?void 0:s.toString())||a}},{id:"discoverymethod",labelKey:"discoveryMethod",format:(e,a)=>e.discoverymethod||a},{id:"disc_facility",labelKey:"facility",format:(e,a)=>e.disc_facility||a}];function T({flagKey:e,className:a}){const{t:s}=V(),r=s(`pages.planet.info.flags.${e}`),p=s(`pages.planet.info.flagDescriptions.${e}`);return t.jsx("span",{className:`planet-flag ${a}`,title:p,children:r})}function ft({field:e,planet:a}){const{t:s}=V(),r=e.earthRef?ge[e.earthRef]:null,p=s("pages.planet.info.unknown"),i=e.format(a,p),f=s(`pages.planet.info.fields.${e.labelKey}`),x=r?s(`pages.planet.info.earthRef.${r.labelKey}`):null;return t.jsxs("div",{className:"planet-property-row",title:r&&x?`${x}: ${r.value} ${r.unit}`:void 0,children:[t.jsxs("span",{className:"planet-property-label",children:[f,r&&x&&t.jsx("span",{className:"earth-indicator",title:`${x}: ${r.value} ${r.unit}`,children:"üåç"})]}),t.jsx("span",{className:"planet-property-value",children:i})]})}function ye({planet:e}){const{t:a}=V();return t.jsxs("div",{className:"planet-info-container",children:[t.jsx("section",{className:"planet-info-section",children:t.jsxs("div",{className:"planet-flags",children:[e.is_habitable_zone&&t.jsx(T,{flagKey:"habitableZone",className:"flag-habitable"}),e.is_earth_like&&t.jsx(T,{flagKey:"earthLike",className:"flag-earth-like"}),e.is_top_habitable_candidate&&t.jsx(T,{flagKey:"topCandidate",className:"flag-top-candidate"}),e.is_potentially_rocky&&t.jsx(T,{flagKey:"potentiallyRocky",className:"flag-rocky"}),e.has_earth_like_insolation&&t.jsx(T,{flagKey:"earthLikeInsolation",className:"flag-habitable"}),e.is_hot_jupiter&&t.jsx(T,{flagKey:"hotJupiter",className:"flag-hot-jupiter"}),e.is_hot_neptune&&t.jsx(T,{flagKey:"hotNeptune",className:"flag-hot-neptune"}),e.is_ultra_hot&&t.jsx(T,{flagKey:"ultraHot",className:"flag-ultra-hot"}),e.is_frozen_world&&t.jsx(T,{flagKey:"frozenWorld",className:"flag-frozen"}),e.is_ultra_dense&&t.jsx(T,{flagKey:"ultraDense",className:"flag-ultra-dense"}),e.is_puffy&&t.jsx(T,{flagKey:"puffy",className:"flag-puffy"}),e.is_super_massive&&t.jsx(T,{flagKey:"superMassive",className:"flag-super-massive"}),e.is_lightweight&&t.jsx(T,{flagKey:"lightweight",className:"flag-lightweight"}),e.is_ultra_short_period&&t.jsx(T,{flagKey:"ultraShortPeriod",className:"flag-ultra-short"}),e.is_long_period&&t.jsx(T,{flagKey:"longPeriod",className:"flag-long-period"}),e.is_eccentric_orbit&&t.jsx(T,{flagKey:"eccentricOrbit",className:"flag-eccentric"}),e.is_circular_orbit&&t.jsx(T,{flagKey:"circularOrbit",className:"flag-circular"}),e.is_likely_tidally_locked&&t.jsx(T,{flagKey:"tidallyLocked",className:"flag-tidally-locked"}),e.is_circumbinary&&t.jsx(T,{flagKey:"circumbinary",className:"flag-circumbinary"}),e.is_multi_planet_system&&t.jsx(T,{flagKey:"multiPlanet",className:"flag-multi-planet"}),e.is_rich_system&&t.jsx(T,{flagKey:"richSystem",className:"flag-rich-system"}),e.is_multi_star_system&&t.jsx(T,{flagKey:"multiStar",className:"flag-multi-star"}),e.is_very_nearby&&t.jsx(T,{flagKey:"veryNearby",className:"flag-very-nearby"}),e.is_nearby&&!e.is_very_nearby&&t.jsx(T,{flagKey:"nearby",className:"flag-nearby"}),e.is_solar_analog&&t.jsx(T,{flagKey:"solarAnalog",className:"flag-solar-analog"}),e.is_red_dwarf_host&&t.jsx(T,{flagKey:"redDwarfHost",className:"flag-red-dwarf"}),e.is_young_system&&t.jsx(T,{flagKey:"youngSystem",className:"flag-young"}),e.is_ancient_system&&t.jsx(T,{flagKey:"ancientSystem",className:"flag-ancient"}),e.is_metal_rich_star&&t.jsx(T,{flagKey:"metalRich",className:"flag-metal-rich"}),e.is_metal_poor_star&&t.jsx(T,{flagKey:"metalPoor",className:"flag-metal-poor"}),e.is_transiting&&t.jsx(T,{flagKey:"transiting",className:"flag-transiting"}),e.has_rv_data&&t.jsx(T,{flagKey:"hasRvData",className:"flag-rv"}),e.has_ttv&&t.jsx(T,{flagKey:"hasTtv",className:"flag-ttv"}),e.is_controversial&&t.jsx(T,{flagKey:"controversial",className:"flag-controversial"})]})}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.properties")}),t.jsx("p",{className:"earth-comparison-hint",children:a("pages.planet.info.earthComparison")}),t.jsx("div",{className:"planet-properties-table",children:ve.map(s=>t.jsx(ft,{field:s,planet:e},s.id))})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.hostStar")}),t.jsx("div",{className:"planet-properties-table",children:be.map(s=>t.jsx(ft,{field:s,planet:e},s.id))})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.discovery")}),t.jsx("div",{className:"planet-properties-table",children:je.map(s=>t.jsx(ft,{field:s,planet:e},s.id))})]}),t.jsxs("section",{className:"planet-info-section",children:[t.jsx("h2",{className:"planet-info-section-title",children:a("pages.planet.info.sections.reviews")}),t.jsx(ue,{planetId:vt(e.pl_name)})]})]})}const ut={"Sub-Earth":"#a0a0a0","Earth-sized":"#4a90d9","Super-Earth":"#6bb86b","Sub-Neptune":"#7ec8e3","Neptune-like":"#4169e1","Gas Giant":"#d4a574",unknown:"#888888"};function Ft(e){return e?ut[e]??ut.unknown:ut.unknown}function Ne(e){return e.is_habitable_zone?"#00ff88":e.is_earth_like?"#4a90d9":Ft(e.planet_type??null)}function _e(e){const a=at.COMPARISON_MAX_SIZE,s=at.COMPARISON_MIN_SIZE,r=at.COMPARISON_MAX_RADIUS_FACTOR,p=e>=1?a/Math.min(e,r):a,i=e>=1?a:a*e,f=Math.max(p,s),x=Math.max(i,s);return{earthDisplaySize:f,planetDisplaySize:x}}function we(e){return`radial-gradient(circle at 30% 30%, #fff, ${e}, ${e}dd)`}const Q={radius:at.EARTH_RADIUS_RELATIVE,mass:at.EARTH_MASS_RELATIVE,density:at.EARTH_DENSITY,temperature:at.EARTH_EQUILIBRIUM_TEMP},ke="radial-gradient(circle at 30% 30%, #87ceeb, #4a90d9, #1e4d7b)";function Re({planet:e}){const{t:a}=V(),s=e.pl_rade||1,r=e.pl_bmasse||null,p=e.pl_dens||null,i=e.pl_eqt||null,{earthDisplaySize:f,planetDisplaySize:x}=_e(s),N=Ut(r,s),m=(N==null?void 0:N.gravityEarth)??null,_=Ft(e.planet_type),w=[{key:"radius",label:a("pages.planet.comparison.radius"),earthValue:`${Q.radius.toFixed(1)} R‚äï`,planetValue:e.pl_rade?`${e.pl_rade.toFixed(2)} R‚äï`:"‚Äî",ratio:e.pl_rade?e.pl_rade/Q.radius:null},{key:"mass",label:a("pages.planet.comparison.mass"),earthValue:`${Q.mass.toFixed(1)} M‚äï`,planetValue:r?`${r.toFixed(2)} M‚äï`:"‚Äî",ratio:r?r/Q.mass:null},{key:"density",label:a("pages.planet.comparison.density"),earthValue:`${Q.density.toFixed(2)} g/cm¬≥`,planetValue:p?`${p.toFixed(2)} g/cm¬≥`:"‚Äî",ratio:p?p/Q.density:null},{key:"gravity",label:a("pages.planet.comparison.gravity"),earthValue:"1.0 g",planetValue:m?`${m.toFixed(2)} g`:"‚Äî",ratio:m},{key:"temperature",label:a("pages.planet.comparison.temperature"),earthValue:`${Q.temperature} K`,planetValue:i?`${i.toFixed(0)} K`:"‚Äî",ratio:i?i/Q.temperature:null}],k=R=>R===null?"":R>1?a("pages.planet.comparison.timesLarger",{times:R.toFixed(1)}):R<1?a("pages.planet.comparison.timesSmaller",{times:(1/R).toFixed(1)}):a("pages.planet.comparison.similar");return t.jsxs("div",{className:"planet-earth-comparison",children:[t.jsxs("div",{className:"comparison-visual",children:[t.jsxs("div",{className:"comparison-body",children:[t.jsx("div",{className:"comparison-sphere earth",style:{width:f,height:f,background:ke},children:t.jsx("div",{className:"sphere-highlight"})}),t.jsx("span",{className:"comparison-label",children:a("pages.planet.comparison.earth")}),t.jsx("span",{className:"comparison-stats",children:"1.0 R‚äï ‚Ä¢ 1.0 M‚äï"})]}),t.jsx("div",{className:"comparison-vs",children:"vs"}),t.jsxs("div",{className:"comparison-body",children:[t.jsx("div",{className:"comparison-sphere planet",style:{width:x,height:x,background:we(_)},children:t.jsx("div",{className:"sphere-highlight"})}),t.jsx("span",{className:"comparison-label",children:e.pl_name}),t.jsxs("span",{className:"comparison-stats",children:[e.pl_rade?`${e.pl_rade.toFixed(2)} R‚äï`:"‚Äî"," ‚Ä¢ ",r?`${r.toFixed(1)} M‚äï`:"‚Äî"]})]})]}),t.jsx("div",{className:"comparison-summary",children:s>1?t.jsx("p",{children:a("pages.planet.comparison.largerThanEarth",{times:s.toFixed(1)})}):s<1?t.jsx("p",{children:a("pages.planet.comparison.smallerThanEarth",{pct:((1-s)*100).toFixed(0)})}):t.jsx("p",{children:a("pages.planet.comparison.similarToEarth")})}),t.jsx("div",{className:"comparison-metrics",children:w.map(R=>t.jsxs("div",{className:"comparison-metric-row",children:[t.jsx("span",{className:"metric-label",children:R.label}),t.jsx("span",{className:"metric-earth",children:R.earthValue}),t.jsx("span",{className:"metric-planet",children:R.planetValue}),t.jsx("span",{className:"metric-ratio",children:k(R.ratio)})]},R.key))})]})}function Me(e){let a=0;if(e.pl_eqt){const i=e.pl_eqt;if(i>=200&&i<=320){const f=Math.abs(i-255);a=Math.max(0,40-f*.5)}else i<200?a=Math.max(0,20-(200-i)*.2):a=Math.max(0,20-(i-320)*.1)}let s=0;if(e.pl_rade){const i=e.pl_rade;i>=.8&&i<=1.5?s=30:i>=.5&&i<=2?s=25:i>=.3&&i<=2.5?s=15:i<=4?s=8:s=2}let r=0;switch(e.star_class){case"G":r=20;break;case"K":r=18;break;case"F":r=15;break;case"M":r=12;break;case"A":r=8;break;default:r=5}let p=0;if(e.pl_insol){const i=e.pl_insol;i>=.5&&i<=2?p=10:i>=.25&&i<=4?p=6:p=2}return{temperature:Math.round(a),size:Math.round(s),starType:r,insolation:p}}function Se(e){return e>=80?"#00ff88":e>=60?"#88ff00":e>=40?"#ffcc00":e>=20?"#ff8800":"#ff4444"}function ze(e,a){return e>=80?"excellent":e>=60?"good":e>=40?"moderate":e>=20?"low":"minimal"}function Te({planet:e}){const{t:a}=V(),s=e.habitability_score||0,r=c.useMemo(()=>Me(e),[e]),p=Se(s),i=ze(s),f=160,x=12,N=(f-x)/2,m=2*Math.PI*N,_=s/100*m,w=m-_,k=[{key:"temperature",label:a("pages.planet.habitability.temperature"),value:r.temperature,max:40,color:"#ff6b6b"},{key:"size",label:a("pages.planet.habitability.size"),value:r.size,max:30,color:"#4ecdc4"},{key:"starType",label:a("pages.planet.habitability.starType"),value:r.starType,max:20,color:"#ffe66d"},{key:"insolation",label:a("pages.planet.habitability.insolation"),value:r.insolation,max:10,color:"#a8e6cf"}];return t.jsxs("div",{className:"habitability-gauge",children:[t.jsxs("div",{className:"gauge-container",children:[t.jsxs("svg",{className:"gauge-svg",width:f,height:f,viewBox:`0 0 ${f} ${f}`,children:[t.jsx("circle",{className:"gauge-background",cx:f/2,cy:f/2,r:N,fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:x}),t.jsx("circle",{className:"gauge-progress",cx:f/2,cy:f/2,r:N,fill:"none",stroke:p,strokeWidth:x,strokeLinecap:"round",strokeDasharray:m,strokeDashoffset:w,transform:`rotate(-90 ${f/2} ${f/2})`,style:{transition:"stroke-dashoffset 1s ease-out, stroke 0.3s ease",filter:`drop-shadow(0 0 6px ${p}80)`}})]}),t.jsxs("div",{className:"gauge-center",children:[t.jsx("span",{className:"gauge-score",style:{color:p},children:s.toFixed(0)}),t.jsx("span",{className:"gauge-label",children:"/100"})]})]}),t.jsx("div",{className:"gauge-tier",style:{color:p},children:a(`pages.planet.habitability.tiers.${i}`)}),t.jsxs("div",{className:"habitability-breakdown",children:[t.jsx("h4",{className:"breakdown-title",children:a("pages.planet.habitability.breakdown")}),k.map(R=>t.jsxs("div",{className:"breakdown-item",children:[t.jsxs("div",{className:"breakdown-header",children:[t.jsx("span",{className:"breakdown-label",children:R.label}),t.jsxs("span",{className:"breakdown-value",children:[R.value,"/",R.max]})]}),t.jsx("div",{className:"breakdown-bar-track",children:t.jsx("div",{className:"breakdown-bar-fill",style:{width:`${R.value/R.max*100}%`,backgroundColor:R.color}})})]},R.key))]}),t.jsxs("div",{className:"habitability-indicators",children:[e.is_habitable_zone&&t.jsxs("span",{className:"indicator positive",children:["‚úì ",a("pages.planet.habitability.inHabitableZone")]}),e.is_earth_like&&t.jsxs("span",{className:"indicator positive",children:["‚úì ",a("pages.planet.habitability.earthLikeSize")]}),e.is_potentially_rocky&&t.jsxs("span",{className:"indicator positive",children:["‚úì ",a("pages.planet.habitability.potentiallyRocky")]}),e.is_top_habitable_candidate&&t.jsxs("span",{className:"indicator highlight",children:["‚òÖ ",a("pages.planet.habitability.topCandidate")]})]})]})}const tt={SCORCHING:1500,HOT:500,WARM:320,HABITABLE_UPPER:320,HABITABLE_LOWER:200,COLD:150,FROZEN:100},st={VENUS:737,EARTH:255,MARS:210};function Ae(e){return e===null?{zone:"unknown",color:"#666666",description:"Temperature unknown"}:e>tt.SCORCHING?{zone:"scorching",color:"#ff2200",description:"Extreme heat - metals may vaporize"}:e>tt.HOT?{zone:"hot",color:"#ff6600",description:"Very hot - surface would be molten"}:e>tt.WARM?{zone:"warm",color:"#ffaa00",description:"Too warm for liquid water"}:e>=tt.HABITABLE_LOWER?{zone:"habitable",color:"#00ff88",description:"Potential for liquid water"}:e>=tt.COLD?{zone:"cool",color:"#00ccff",description:"Cool - water would be frozen"}:e>=tt.FROZEN?{zone:"cold",color:"#0088ff",description:"Cold - likely frozen surface"}:{zone:"frozen",color:"#4444ff",description:"Extreme cold - cryogenic conditions"}}function rt(e){const r=Math.max(50,Math.min(2e3,e)),p=Math.log(50),i=Math.log(2e3);return(Math.log(r)-p)/(i-p)*100}function $e({planet:e}){const{t:a}=V(),s=e.pl_eqt,r=s?null:Gt(e.st_teff??null,e.st_rad??null,e.pl_orbsmax??null),p=s||(r==null?void 0:r.temperatureK)||null,i=!s&&r!==null,f=Ae(p),x=p?rt(p):50,N=[{name:"Venus",temp:st.VENUS,position:rt(st.VENUS),emoji:"ü™ê"},{name:"Earth",temp:st.EARTH,position:rt(st.EARTH),emoji:"üåç"},{name:"Mars",temp:st.MARS,position:rt(st.MARS),emoji:"üî¥"}],m=rt(tt.HABITABLE_LOWER),_=rt(tt.HABITABLE_UPPER);return t.jsxs("div",{className:"temperature-zone-indicator",children:[t.jsx("h4",{className:"temp-zone-title",children:a("pages.planet.temperature.title")}),t.jsx("div",{className:"temp-value-display",children:p?t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"temp-value",style:{color:f.color},children:[p.toFixed(0)," K"]}),t.jsxs("span",{className:"temp-celsius",children:["(",(p-273.15).toFixed(0),"¬∞C)"]}),i&&t.jsxs("span",{className:"temp-approximate",title:"Calculated using Stefan-Boltzmann law from stellar and orbital parameters",children:[" ","~"]})]}):t.jsx("span",{className:"temp-unknown",children:a("pages.planet.temperature.unknown")})}),t.jsx("div",{className:"temp-zone-label",style:{color:f.color},children:a(`pages.planet.temperature.zones.${f.zone}`)}),t.jsxs("div",{className:"temp-scale-container",children:[t.jsxs("div",{className:"temp-scale-bar",children:[t.jsx("div",{className:"temp-habitable-zone",style:{left:`${m}%`,width:`${_-m}%`}}),t.jsx("div",{className:"temp-scale-gradient"}),N.map(w=>t.jsxs("div",{className:"temp-reference-marker",style:{left:`${w.position}%`},title:`${w.name}: ${w.temp}K`,children:[t.jsx("span",{className:"reference-emoji",children:w.emoji}),t.jsx("span",{className:"reference-line"})]},w.name)),p&&t.jsxs("div",{className:"temp-planet-marker",style:{left:`${x}%`,borderColor:f.color},children:[t.jsx("div",{className:"marker-dot",style:{backgroundColor:f.color}}),t.jsx("div",{className:"marker-label",children:e.pl_letter||"‚óè"})]})]}),t.jsxs("div",{className:"temp-scale-labels",children:[t.jsx("span",{className:"scale-label cold",children:a("pages.planet.temperature.frozen")}),t.jsx("span",{className:"scale-label habitable",children:a("pages.planet.temperature.habitable")}),t.jsx("span",{className:"scale-label hot",children:a("pages.planet.temperature.scorching")})]})]}),t.jsx("p",{className:"temp-zone-description",children:a(`pages.planet.temperature.descriptions.${f.zone}`)}),i&&t.jsx("p",{className:"temp-approximation-notice",children:"‚ìò Temperature estimated using Stefan-Boltzmann law (T = T‚òÖ √ó ‚àö(R‚òÖ/2a)) from stellar temperature, radius, and orbital distance. NASA data not available."}),t.jsxs("div",{className:"temp-legend",children:[t.jsxs("div",{className:"legend-item",children:[t.jsx("span",{className:"legend-marker earth",children:"üåç"}),t.jsx("span",{className:"legend-text",children:"Earth (255K)"})]}),t.jsxs("div",{className:"legend-item",children:[t.jsx("span",{className:"legend-marker habitable-zone"}),t.jsx("span",{className:"legend-text",children:a("pages.planet.temperature.habitableZone")})]})]})]})}function Ee({planet:e,siblings:a}){var i;const{t:s}=V(),r=c.useRef(null),p=c.useRef(null);return c.useEffect(()=>{if(!r.current||!p.current)return;const f=p.current.clientWidth,x=Math.min(f,350),N=40,m=(x-N*2)/2,_=x/2,w=x/2,k=q(r.current);k.selectAll("*").remove(),k.attr("width",x).attr("height",x);const E=(a.length>0?a:[e]).filter(n=>n.pl_orbsmax&&n.pl_orbsmax>0).map(n=>({name:n.pl_name.split(" ").pop()||n.pl_name,fullName:n.pl_name,semiMajorAxis:n.pl_orbsmax,eccentricity:n.pl_orbeccen||0,habitable:n.is_habitable_zone||!1,isCurrent:n.pl_name===e.pl_name,color:Ne(n),planetType:n.planet_type})).sort((n,l)=>n.semiMajorAxis-l.semiMajorAxis);if(E.length===0)return;const $=Math.max(...E.map(n=>n.semiMajorAxis)),z=qt(e.st_lum),A=Math.max($*1.3,z.outer*1.2),F=m/A;k.append("circle").attr("cx",_).attr("cy",w).attr("r",m+N/2).attr("fill","rgba(0, 0, 0, 0.3)");const y=z.inner*F,u=z.outer*F;u>0&&u<=m+20&&(k.append("circle").attr("cx",_).attr("cy",w).attr("r",Math.min(u,m)).attr("fill","rgba(0, 255, 136, 0.1)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1),y>0&&k.append("circle").attr("cx",_).attr("cy",w).attr("r",y).attr("fill","rgba(0, 0, 0, 0.3)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","4,4")),[.1,.5,1,2,5,10,20,50].filter(n=>n*F<m&&n<A).forEach(n=>{k.append("circle").attr("cx",_).attr("cy",w).attr("r",n*F).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.1)").attr("stroke-width",.5),k.append("text").attr("x",_+n*F+3).attr("y",w-3).attr("fill","rgba(255, 255, 255, 0.3)").attr("font-size","8px").text(`${n} AU`)}),k.append("circle").attr("cx",_).attr("cy",w).attr("r",10).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 10px rgba(255, 200, 0, 0.5))"),E.forEach((n,l)=>{const b=n.semiMajorAxis*F,d=l/E.length*Math.PI*2-Math.PI/2,h=_+Math.cos(d)*b,S=w+Math.sin(d)*b;k.append("circle").attr("cx",_).attr("cy",w).attr("r",b).attr("fill","none").attr("stroke",n.isCurrent?"rgba(255, 255, 255, 0.6)":n.habitable?"rgba(0, 255, 136, 0.4)":"rgba(0, 204, 255, 0.2)").attr("stroke-width",n.isCurrent?2:1).attr("stroke-dasharray",n.isCurrent?"none":"4,4");const P=n.isCurrent?10:6;k.append("circle").attr("cx",h).attr("cy",S).attr("r",P).attr("fill",n.color).attr("stroke",n.isCurrent?"#fff":"rgba(255,255,255,0.5)").attr("stroke-width",n.isCurrent?2:1).attr("filter",n.isCurrent?"drop-shadow(0 0 8px rgba(255,255,255,0.5))":"none"),k.append("text").attr("x",h).attr("y",S-P-5).attr("text-anchor","middle").attr("fill",n.isCurrent?"#fff":"rgba(255, 255, 255, 0.7)").attr("font-size",n.isCurrent?"11px":"9px").attr("font-weight",n.isCurrent?"bold":"normal").text(n.name)})},[e,a]),e.pl_orbsmax?t.jsxs("div",{className:"orbital-position-container",children:[t.jsx("h4",{className:"orbital-title",children:s("pages.planet.orbital.title")}),t.jsx("div",{ref:p,className:"orbital-chart",children:t.jsx("svg",{ref:r})}),t.jsxs("div",{className:"orbital-legend",children:[t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot star"}),t.jsx("span",{children:e.hostname})]}),t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot current"}),t.jsx("span",{children:e.pl_name})]}),t.jsxs("div",{className:"orbital-legend-item",children:[t.jsx("div",{className:"orbital-legend-dot hz"}),t.jsx("span",{children:s("pages.planet.orbital.habitableZone")})]})]}),t.jsxs("div",{className:"orbital-info",children:[t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.distance")}),t.jsxs("span",{className:"info-value",children:[(i=e.pl_orbsmax)==null?void 0:i.toFixed(3)," AU"]})]}),e.pl_orbper&&t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.period")}),t.jsx("span",{className:"info-value",children:e.pl_orbper<365?`${e.pl_orbper.toFixed(1)} days`:`${(e.pl_orbper/365.25).toFixed(2)} years`})]}),e.pl_orbeccen!==null&&t.jsxs("div",{className:"orbital-info-item",children:[t.jsx("span",{className:"info-label",children:s("pages.planet.orbital.eccentricity")}),t.jsx("span",{className:"info-value",children:e.pl_orbeccen.toFixed(3)})]})]})]}):t.jsx("div",{className:"orbital-position-container",children:t.jsx("div",{className:"orbital-no-data",children:s("pages.planet.orbital.noData")})})}function Fe(e,a){return e.is_earth_like&&e.is_habitable_zone?a("pages.planet.siblings.earthLikeHabitable"):e.is_habitable_zone?a("pages.planet.siblings.habitable"):e.is_hot_jupiter?a("pages.planet.siblings.hotJupiter"):e.is_frozen_world?a("pages.planet.siblings.frozen"):e.planet_type||a("pages.planet.siblings.exoplanet")}function Ce({currentPlanet:e,siblings:a}){const{t:s}=V(),r=a.filter(i=>i.pl_name!==e.pl_name);if(r.length===0)return null;const p=[...r].sort((i,f)=>(i.pl_orbsmax||999)-(f.pl_orbsmax||999));return t.jsxs("div",{className:"sibling-planets-section",children:[t.jsx("h3",{className:"sibling-planets-title",children:s("pages.planet.siblings.title",{system:e.hostname})}),t.jsx("p",{className:"sibling-planets-subtitle",children:s("pages.planet.siblings.count",{count:r.length})}),t.jsx("div",{className:"sibling-planets-grid",children:p.map(i=>t.jsxs(gt,{to:`/planets/${vt(i.pl_name)}`,className:"sibling-planet-card",children:[t.jsx("div",{className:"sibling-thumbnail",children:t.jsx(Yt,{planet:i,size:64})}),t.jsxs("div",{className:"sibling-info",children:[t.jsx("span",{className:"sibling-name",children:i.pl_name.replace(e.hostname,"").trim()||i.pl_letter||i.pl_name}),t.jsx("span",{className:"sibling-type",children:Fe(i,s)})]}),t.jsxs("div",{className:"sibling-stats",children:[i.pl_rade&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:i.pl_rade.toFixed(1)}),t.jsx("span",{className:"stat-unit",children:"R‚äï"})]}),i.pl_eqt&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:i.pl_eqt.toFixed(0)}),t.jsx("span",{className:"stat-unit",children:"K"})]}),i.pl_orbsmax&&t.jsxs("div",{className:"sibling-stat",children:[t.jsx("span",{className:"stat-value",children:i.pl_orbsmax.toFixed(2)}),t.jsx("span",{className:"stat-unit",children:"AU"})]})]}),t.jsxs("div",{className:"sibling-badges",children:[i.is_habitable_zone&&t.jsx("span",{className:"sibling-badge habitable",children:"HZ"}),i.is_earth_like&&t.jsx("span",{className:"sibling-badge earth-like",children:"üåç"}),i.is_hot_jupiter&&t.jsx("span",{className:"sibling-badge hot",children:"üî•"})]})]},i.pl_name))})]})}function Pe(e,a=1){const s=e.pl_rvamp,r=e.pl_orbper,p=(e.st_radv||0)*1e3,i=[],f=Math.floor(a*100);for(let x=0;x<=f;x++){const N=x/100*2*Math.PI,m=x/100*r,_=p+s*Math.sin(N);i.push({time:m,velocity:_,phase:N})}return i}function De(e){if(e==null||isNaN(e))return"N/A";const a=Number(e);return Math.abs(a)<1?`${(a*1e3).toFixed(0)} cm/s`:`${a.toFixed(2)} m/s`}function Ke({planet:e,siblings:a=[]}){const{t:s}=V(),[r,p]=c.useState(null),[i,f]=c.useState(0),x=c.useRef(null),N=c.useRef(null),m=c.useRef(null),_=c.useRef(null),w=c.useRef(null),k=c.useRef(null),R=c.useRef(null),E=c.useRef(null),$=c.useRef(null),z=c.useRef(null),A=c.useRef(),F=e.pl_rvamp!==null&&e.pl_orbper!==null;if(c.useEffect(()=>{if(!F)return;const o=15,n=.01,l=o/e.pl_orbper,b=n*Math.min(Math.max(l,.2),8),d=()=>{f(h=>(h+b)%(Math.PI*2)),A.current=requestAnimationFrame(d)};return A.current=requestAnimationFrame(d),()=>{A.current&&cancelAnimationFrame(A.current)}},[F,e.pl_orbper]),c.useEffect(()=>{if(!F||!x.current||!N.current)return;const o=N.current.clientWidth,n=o<500,l=Math.min(o-20,1200),b=380,d={top:20,right:30,bottom:n?120:90,left:70},h=q(x.current);h.selectAll("*").remove(),h.attr("width",l).attr("height",b);const S=Pe(e),P=pt().domain([0,dt(S,v=>v.time)]).range([d.left,l-d.right]),M=pt().domain([ie(S,v=>v.velocity)-e.pl_rvamp*.2,dt(S,v=>v.velocity)+e.pl_rvamp*.2]).range([b-d.bottom,d.top]),j=Tt().x(v=>P(v.time)).y(v=>M(v.velocity)).curve(xt);h.append("rect").attr("width",l).attr("height",b).attr("fill","rgba(0, 0, 0, 0.2)"),h.append("g").attr("class","grid").attr("transform",`translate(0,${b-d.bottom})`).call(it(P).ticks(5).tickSize(-(b-d.top-d.bottom)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)"),h.append("g").attr("class","grid").attr("transform",`translate(${d.left},0)`).call(nt(M).ticks(5).tickSize(-(l-d.left-d.right)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)");const C=e.pl_rvamp,D=e.pl_orbper,g=(e.st_radv||0)*1e3;h.append("line").attr("x1",d.left).attr("x2",l-d.right).attr("y1",M(g)).attr("y2",M(g)).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2).attr("stroke-dasharray","5,5");const O=Nt().x(v=>P(v.time)).y0(M(g)).y1(v=>M(Math.max(v.velocity,g))).curve(xt);h.append("path").datum(S).attr("d",O).attr("fill","rgba(255, 100, 100, 0.15)").attr("opacity",.8);const K=Nt().x(v=>P(v.time)).y0(M(g)).y1(v=>M(Math.min(v.velocity,g))).curve(xt);h.append("path").datum(S).attr("d",K).attr("fill","rgba(100, 150, 255, 0.15)").attr("opacity",.8),h.append("path").datum(S).attr("id","rv-curve-path").attr("d",j).attr("fill","none").attr("stroke","#00ccff").attr("stroke-width",2).attr("opacity",.9);const H=h.append("g").attr("class","rv-curve-legend"),B=[{color:"rgba(255, 100, 100, 0.4)",text:s("pages.planet.rv.legendRedshift"),type:"rect"},{color:"rgba(100, 150, 255, 0.4)",text:s("pages.planet.rv.legendBlueshift"),type:"rect"},{color:"rgba(255, 255, 255, 0.5)",text:s("pages.planet.rv.legendBaseline"),type:"line"}],I=25,U=20,G=B.map(v=>{var Y;const L=H.append("g");let W=0;v.type==="rect"?(L.append("rect").attr("width",20).attr("height",12).attr("fill",v.color),W+=20):(L.append("line").attr("x1",0).attr("x2",20).attr("y1",6).attr("y2",6).attr("stroke",v.color).attr("stroke-width",2).attr("stroke-dasharray","4,2"),W+=20);const et=L.append("text").attr("x",25).attr("y",9).attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size","10px").text(v.text);return W+=((Y=et.node())==null?void 0:Y.getBBox().width)||0,{g:L,width:W+I}});if(n){let v=0;G.forEach((Y,mt)=>{Y.g.attr("transform",`translate(0, ${mt*U})`),Y.width>v&&(v=Y.width)});const L=v-I,W=G.length*U,et=d.left;H.attr("transform",`translate(${et}, ${b-d.bottom+50})`),h.insert("rect",".rv-curve-legend").attr("x",et-10).attr("y",b-d.bottom+45).attr("width",L+20).attr("height",W+5).attr("fill","rgba(0, 0, 0, 0.6)").attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",1).attr("rx",4)}else{let v=0,L=0,W=0,et=0;G.forEach(ht=>{v>0&&v+ht.width>l-d.left-d.right&&(v=0,L+=U),ht.g.attr("transform",`translate(${v}, ${L})`),v+=ht.width,v>W&&(W=v),et=L});const Y=W-I,mt=et+U,bt=(l-Y)/2;H.attr("transform",`translate(${bt}, ${b-d.bottom+50})`),h.insert("rect",".rv-curve-legend").attr("x",bt-10).attr("y",b-d.bottom+45).attr("width",Y+20).attr("height",mt+5).attr("fill","rgba(0, 0, 0, 0.6)").attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",1).attr("rx",4)}h.append("circle").attr("cx",0).attr("cy",0).attr("r",6).attr("fill","#ff6b6b").attr("stroke","#fff").attr("stroke-width",2).attr("class","rv-animated-marker");const Z=h.append("g").attr("transform",`translate(0,${b-d.bottom})`).call(it(P).ticks(5));Z.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),Z.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),h.append("text").attr("x",l/2).attr("y",b-d.bottom+30).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.rv.xAxisLabel"));const J=h.append("g").attr("transform",`translate(${d.left},0)`).call(nt(M).ticks(5).tickFormat(v=>`${v}`));J.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),J.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),h.append("text").attr("transform","rotate(-90)").attr("x",-190).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.rv.yAxisLabel"));const lt=i/(Math.PI*2)*D,ot=g+C*Math.sin(i);h.select(".rv-animated-marker").attr("cx",P(lt)).attr("cy",M(ot))},[i,F,e,s]),c.useEffect(()=>{if(!F||!w.current||!k.current)return;const o=250,n=o/2,l=o/2,b=o/2-20,d=q(w.current);d.selectAll("*").remove(),d.attr("width",o).attr("height",o),d.append("rect").attr("width",o).attr("height",o).attr("fill","rgba(0, 0, 0, 0.3)");const h=b*.7,S=b*.15,P=n+Math.cos(i)*h,M=l+Math.sin(i)*h,j=n-Math.cos(i)*S,C=l-Math.sin(i)*S;d.append("circle").attr("cx",n).attr("cy",l).attr("r",h).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.2)").attr("stroke-width",1).attr("stroke-dasharray","4,4"),d.append("circle").attr("cx",n).attr("cy",l).attr("r",S).attr("fill","none").attr("stroke","rgba(255, 200, 0, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","2,2");const D=90,g=D*Math.PI/180,O=Math.cos(g),K=Math.sin(g),B=-(Math.cos(i)*O+Math.sin(i)*K);let I;if(B>.05){const v=Math.abs(B);I=`rgba(0, ${Math.floor(150+v*105)}, 255, ${.4+v*.3})`}else if(B<-.05){const v=Math.abs(B),L=255,W=Math.floor(200-v*200);I=`rgba(${L}, ${W}, 0, ${.4+v*.3})`}else I="rgba(255, 255, 200, 0.25)";const U=40,G=60,Z=(D-U/2)*Math.PI/180,J=(D+U/2)*Math.PI/180,lt=`${j+Math.cos(Z)*G},${C+Math.sin(Z)*G}`,ot=`${j+Math.cos(J)*G},${C+Math.sin(J)*G}`;d.append("path").attr("d",`M ${j},${C} L ${lt} L ${ot} Z`).attr("fill",I).attr("opacity",.6),d.append("circle").attr("cx",j).attr("cy",C).attr("r",15).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 8px rgba(255, 200, 0, 0.6))"),d.append("circle").attr("cx",P).attr("cy",M).attr("r",8).attr("fill","#00ccff").attr("stroke","#fff").attr("stroke-width",1),d.append("circle").attr("cx",n).attr("cy",l).attr("r",3).attr("fill","#ff6b6b").attr("opacity",.5),d.append("text").attr("x",o/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text("Orbital Motion")},[i,F]),c.useEffect(()=>{if(!F||!R.current||!E.current)return;const o=250,n=80,l=n/2,b=180,d=q(R.current);d.selectAll("*").remove(),d.attr("width",o).attr("height",n),d.append("rect").attr("width",o).attr("height",n).attr("fill","rgba(0, 0, 0, 0.3)"),d.append("line").attr("x1",35).attr("x2",35+b).attr("y1",l).attr("y2",l).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2);const h=35+b/2+Math.cos(i)*8,S=35+b/2+Math.cos(i)*60;d.append("circle").attr("cx",h).attr("cy",l).attr("r",12).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 6px rgba(255, 200, 0, 0.5))"),d.append("circle").attr("cx",S).attr("cy",l).attr("r",6).attr("fill","#00ccff").attr("stroke","#fff").attr("stroke-width",1),d.append("text").attr("x",o/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text("Side View")},[i,F]),c.useEffect(()=>{if(!F||!$.current||!z.current)return;const o=Math.min(z.current.clientWidth,600),n=q($.current);n.selectAll("*").remove(),n.attr("width",o).attr("height",380),n.append("rect").attr("width",o).attr("height",380).attr("fill","rgba(0, 0, 0, 0.3)");const l=n.append("defs").append("linearGradient").attr("id","spectrum-gradient").attr("x1","0%").attr("x2","100%");l.append("stop").attr("offset","0%").attr("stop-color","#4169e1"),l.append("stop").attr("offset","25%").attr("stop-color","#00bfff"),l.append("stop").attr("offset","50%").attr("stop-color","#90ee90"),l.append("stop").attr("offset","75%").attr("stop-color","#ffff00"),l.append("stop").attr("offset","100%").attr("stop-color","#ff4500"),n.append("rect").attr("x",20).attr("y",20).attr("width",o-40).attr("height",40).attr("fill","url(#spectrum-gradient)");const b=e.pl_rvamp,d=b*Math.sin(i),S=d/b*20;[{pos:.05,label:"Ca K"},{pos:.08,label:"Ca H"},{pos:.25,label:"H-Œ¥"},{pos:.35,label:"H-Œ≥"},{pos:.45,label:"H-Œ≤"},{pos:.55,label:"Mg"},{pos:.59,label:"Na D"},{pos:.61,label:"Na D"},{pos:.75,label:"H-Œ±"},{pos:.88,label:"Ca II"}].forEach((g,O)=>{const K=20+(o-40)*g.pos;n.append("line").attr("x1",K).attr("x2",K).attr("y1",10).attr("y2",70).attr("stroke","#000").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("opacity",.6),n.append("line").attr("x1",K+S).attr("x2",K+S).attr("y1",20).attr("y2",60).attr("stroke","#000").attr("stroke-width",3).attr("opacity",.9);const H=80+O%3*10;n.append("text").attr("x",K).attr("y",H).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size",o<500?"6px":"8px").text(g.label)});const M=Math.abs(d)>.1?`${d>0?"Redshift":"Blueshift"} (${Math.abs(d).toFixed(1)} m/s)`:"No shift (perpendicular motion)";n.append("text").attr("x",o/2).attr("y",110).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size",o<500?"8px":"10px").text(M);const j=[{text:"How to Read These Visualizations:",y:135,bold:!0,size:11},{text:"",y:145},{text:"REDSHIFT (Star moving away from us):",y:155,bold:!0},{text:"  ‚Ä¢ Orbital View: Planet at BOTTOM position",y:168},{text:"  ‚Ä¢ Side View: Both star & planet on RIGHT (far side)",y:181},{text:"  ‚Ä¢ RV Curve: Red marker at PEAK (maximum velocity)",y:194},{text:"  ‚Ä¢ Spectrum: Black lines shift RIGHT (toward red)",y:207},{text:"",y:217},{text:"BLUESHIFT (Star moving toward us):",y:227,bold:!0},{text:"  ‚Ä¢ Orbital View: Planet at TOP position",y:240},{text:"  ‚Ä¢ Side View: Both star & planet on LEFT (near side)",y:253},{text:"  ‚Ä¢ RV Curve: Red marker at VALLEY (minimum velocity)",y:266},{text:"  ‚Ä¢ Spectrum: Black lines shift LEFT (toward blue)",y:279},{text:"",y:289},{text:"NO DOPPLER SHIFT (Perpendicular motion):",y:299,bold:!0},{text:"  ‚Ä¢ Orbital View: Planet at LEFT or RIGHT sides",y:312},{text:"  ‚Ä¢ Side View: Both at center position",y:325},{text:"  ‚Ä¢ RV Curve: Red marker crosses BASELINE",y:338},{text:"  ‚Ä¢ Spectrum: Black lines align with dashed reference lines",y:351}],C=o<500?10:12,D=o<500?11:13;j.forEach(g=>{if(!g.text)return;const O=n.append("text").attr("x",o<500?15:20).attr("y",g.y).attr("text-anchor","start").attr("fill","rgba(255, 255, 255, 0.6)").attr("font-size",g.size?`${g.size*(C/10)}px`:`${C}px`).text(g.text);g.bold&&O.attr("font-weight","bold").attr("fill","rgba(255, 255, 255, 0.8)").attr("font-size",`${D}px`)})},[i,F,e]),c.useEffect(()=>{if(!F||a.length===0||!m.current||!_.current)return;const o=[e,...a].filter(g=>g.pl_rvamp!==null&&g.pl_rvamp>0).sort((g,O)=>O.pl_rvamp-g.pl_rvamp);if(o.length<=1)return;const n=_.current.clientWidth,l=n<500,b=Math.max(l?320:400,n-(l?20:40)),d=Math.max(200,o.length*(l?30:40)),h={top:20,right:l?15:30,bottom:l?30:40,left:l?80:150},S=q(m.current);S.selectAll("*").remove(),S.attr("width",b).attr("height",d),S.append("rect").attr("width",b).attr("height",d).attr("fill","rgba(0, 0, 0, 0.2)");const P=dt(o,g=>g.pl_rvamp),M=St().domain([.1,P*1.2]).range([h.left,b-h.right]),j=zt().domain(o.map(g=>g.pl_name.split(" ").pop()||g.pl_name)).range([h.top,d-h.bottom]).padding(.2);S.selectAll(".rv-bar").data(o).join("rect").attr("class","rv-bar").attr("x",h.left).attr("y",g=>j(g.pl_name.split(" ").pop()||g.pl_name)).attr("width",g=>M(g.pl_rvamp)-h.left).attr("height",j.bandwidth()).attr("fill",g=>g.pl_name===e.pl_name?"#00ff88":"#00ccff").attr("opacity",g=>g.pl_name===e.pl_name?1:.6),M(1)>=h.left&&M(1)<=b-h.right&&(S.append("line").attr("x1",M(1)).attr("x2",M(1)).attr("y1",h.top).attr("y2",d-h.bottom).attr("stroke","#ff6b6b").attr("stroke-width",2).attr("stroke-dasharray","4,4"),S.append("text").attr("x",M(1)+5).attr("y",h.top+15).attr("fill","#ff6b6b").attr("font-size","10px").text("1 m/s"));const C=S.append("g").attr("transform",`translate(0,${d-h.bottom})`).call(it(M).ticks(l?3:5,"~s").tickFormat(g=>`${g} m/s`));C.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),C.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)");const D=S.append("g").attr("transform",`translate(${h.left},0)`).call(nt(j));D.selectAll("text").attr("font-size",l?"10px":"12px").attr("fill",g=>{var K;return((K=o.find(H=>(H.pl_name.split(" ").pop()||H.pl_name)===g))==null?void 0:K.pl_name)===e.pl_name?"#00ff88":"rgba(255, 255, 255, 0.7)"}).attr("font-weight",g=>{var K;return((K=o.find(H=>(H.pl_name.split(" ").pop()||H.pl_name)===g))==null?void 0:K.pl_name)===e.pl_name?"bold":"normal"}),D.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)")},[e,a,F,s]),!F)return t.jsxs("div",{className:"rv-no-data-container",children:[t.jsxs("div",{className:"rv-no-data-message",children:[t.jsx("h4",{className:"rv-no-data-title",children:s("pages.planet.rv.noData.title")}),t.jsx("p",{className:"rv-no-data-explanation",children:s("pages.planet.rv.noData.message",{method:e.discoverymethod||"unknown method"})})]}),y(),t.jsxs("div",{className:"rv-example",children:[t.jsx("p",{children:t.jsx("strong",{children:s("pages.planet.rv.noData.example")})}),t.jsxs("ul",{children:[t.jsx("li",{children:s("pages.planet.rv.noData.jupiterExample")}),t.jsx("li",{children:s("pages.planet.rv.noData.earthExample")}),t.jsx("li",{children:s("pages.planet.rv.noData.detectionLimit")})]})]})]});function y(){const o=[{key:"doppler",title:s("pages.planet.rv.explanation.dopplerTitle"),content:s("pages.planet.rv.explanation.dopplerContent")},{key:"wobble",title:s("pages.planet.rv.explanation.wobbleTitle"),content:s("pages.planet.rv.explanation.wobbleContent")},{key:"discovery",title:s("pages.planet.rv.explanation.discoveryTitle"),content:s("pages.planet.rv.explanation.discoveryContent")}];return t.jsx("div",{className:"rv-explanation-header",children:o.map(n=>t.jsxs("div",{className:"rv-explanation-section",children:[t.jsxs("button",{className:"rv-explanation-trigger",onClick:()=>p(r===n.key?null:n.key),children:[t.jsx("span",{children:n.title}),t.jsx("span",{className:`rv-explanation-icon ${r===n.key?"expanded":""}`,children:"‚Ä∫"})]}),r===n.key&&t.jsxs("div",{className:"rv-explanation-content",children:[n.content,n.key==="doppler"&&t.jsxs("div",{className:"rv-explanation-image",children:[t.jsx("img",{src:"/images/rv.png",alt:"Radial Velocity Detection Diagram",className:"rv-diagram-image"}),t.jsx("p",{className:"rv-image-caption",children:s("pages.planet.rv.explanation.dopplerImageCaption")})]})]})]},n.key))})}function u(){return t.jsxs("div",{className:"rv-technical-details",children:[t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.amplitude")}),t.jsx("div",{className:"rv-detail-value",children:De(e.pl_rvamp)})]}),t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.period")}),t.jsx("div",{className:"rv-detail-value",children:Number(e.pl_orbper)<365?`${Number(e.pl_orbper).toFixed(1)} days`:`${(Number(e.pl_orbper)/365.25).toFixed(2)} years`})]}),e.st_radv!==null&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.baseline")}),t.jsxs("div",{className:"rv-detail-value",children:[Number(e.st_radv).toFixed(2)," km/s"]})]}),e.pl_orbeccen!==null&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.eccentricity")}),t.jsx("div",{className:"rv-detail-value",children:Number(e.pl_orbeccen).toFixed(3)})]}),e.st_vsin!==null&&e.st_vsin>0&&t.jsxs("div",{className:"rv-detail-item",children:[t.jsx("div",{className:"rv-detail-label",children:s("pages.planet.rv.technical.stellarRotation")}),t.jsxs("div",{className:"rv-detail-value",children:[Number(e.st_vsin).toFixed(2)," km/s"]})]})]})}return t.jsxs("div",{className:"rv-section",children:[t.jsx("p",{className:"rv-intro",children:s("pages.planet.rv.intro")}),y(),t.jsxs("div",{className:"rv-curve-container",children:[t.jsx("h4",{className:"rv-curve-title",children:s("pages.planet.rv.curveTitle")}),t.jsx("div",{ref:N,className:"rv-curve-chart",children:t.jsx("svg",{ref:x})})]}),t.jsxs("div",{className:"rv-data-display",children:[t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.currentRV")}),t.jsxs("div",{className:"rv-data-value rv-data-current",children:[((e.st_radv||0)*1e3+(e.pl_rvamp||0)*Math.sin(i)).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]}),t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.amplitude")}),t.jsxs("div",{className:"rv-data-value",children:[Number(e.pl_rvamp||0).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]}),t.jsxs("div",{className:"rv-data-item",children:[t.jsx("div",{className:"rv-data-label",children:s("pages.planet.rv.dataDisplay.baseline")}),t.jsxs("div",{className:"rv-data-value",children:[(Number(e.st_radv||0)*1e3).toFixed(2),t.jsx("span",{className:"rv-data-unit",children:"m/s"})]})]})]}),t.jsxs("div",{className:"rv-visualizations-grid",children:[t.jsxs("div",{className:"rv-orbital-views-card",children:[t.jsx("h4",{className:"rv-viz-subtitle",children:s("pages.planet.rv.visualizations.orbitalMotion")}),t.jsxs("div",{className:"rv-orbital-views",children:[t.jsx("div",{className:"rv-orbital-diagram-container",children:t.jsx("div",{ref:k,className:"rv-orbital-diagram",children:t.jsx("svg",{ref:w})})}),t.jsx("div",{className:"rv-side-view-container",children:t.jsx("div",{ref:E,className:"rv-side-view",children:t.jsx("svg",{ref:R})})})]})]}),t.jsxs("div",{className:"rv-spectrum-card",children:[t.jsx("h4",{className:"rv-viz-subtitle",children:s("pages.planet.rv.visualizations.spectralDoppler")}),t.jsx("div",{ref:z,className:"rv-spectrum",children:t.jsx("svg",{ref:$})})]})]}),a.length>0&&t.jsxs("div",{className:"rv-comparison-container",children:[t.jsx("h4",{className:"rv-comparison-title",children:s("pages.planet.rv.comparisonTitle")}),t.jsx("p",{className:"rv-comparison-description",children:s("pages.planet.rv.comparisonDescription")}),t.jsx("div",{ref:_,className:"rv-comparison-chart",children:t.jsx("svg",{ref:m})}),t.jsxs("div",{className:"rv-comparison-legend",children:[t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot current"}),t.jsx("span",{children:e.pl_name})]}),t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot sibling"}),t.jsx("span",{children:"Sibling planets"})]}),t.jsxs("div",{className:"rv-comparison-legend-item",children:[t.jsx("div",{className:"rv-legend-dot threshold"}),t.jsx("span",{children:s("pages.planet.rv.detectionThreshold")})]})]})]}),u()]})}function Ie(){let e=0,a=0;for(;e===0;)e=Math.random();for(;a===0;)a=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*a)}function Ct(e){if(e.pl_trandep!==null&&e.pl_trandep>0)return e.pl_trandep/100;if(e.pl_ratror!==null&&e.pl_ratror>0)return e.pl_ratror*e.pl_ratror;if(e.pl_rade!==null&&e.st_rad!==null){const s=e.pl_rade/109.1/e.st_rad;return s*s}return .01}function Le(e){if(e.pl_trandur!==null&&e.pl_orbper!==null&&e.pl_trandur>0)return e.pl_trandur/24/e.pl_orbper;if(e.pl_imppar!==null&&e.pl_ratdor!==null){const a=e.pl_imppar,s=e.pl_ratdor;if(s>0){const r=2/s,p=Math.sqrt(Math.max(0,1-a*a));return r*p*.1}}return .08}function Ve(e){return Math.min(.2,Math.max(.1,e*.15))}function Rt(e,a=1500){const s=[];let r=Ct(e);r<5e-4?r*=12:r<.002?r*=8:r<.01?r*=4:r<.05&&(r*=2),r=Math.min(r,.25);let p=Le(e);p=Math.max(p,.05);const i=Ve(p),f=.5,x=f-p/2,N=f+p/2,m=x,_=x+i,w=N-i,k=N,R=Math.max(5e-5,r*.03);for(let E=0;E<a;E++){const $=E/(a-1);let z=1;if($>=m&&$<=k)if($<_){const y=($-m)/(_-m);z=1-r*kt(y)}else if($>w){const y=($-w)/(k-w);z=1-r*(1-kt(y))}else z=1-r;const A=Ie()*R,F=$t(z+A,1-r-.01,1.01);s.push({phase:$,flux:Number(F.toFixed(6)),fluxClean:Number(z.toFixed(6))})}return s}function He(e){const s=Ct(e)*100;return s<.01?`${(s*1e3).toFixed(1)} ppm`:`${s.toFixed(3)}%`}function Oe(e){if(e.pl_trandur!==null){const a=e.pl_trandur;return a<1?`${(a*60).toFixed(0)} min`:a<24?`${a.toFixed(2)} h`:`${(a/24).toFixed(2)} days`}return"N/A"}function Be(e){if(e.pl_orbper===null)return"N/A";const a=e.pl_orbper;return a<365?`${a.toFixed(2)} days`:`${(a/365.25).toFixed(2)} years`}function Mt(e){if(e.pl_rade===null)return e.pl_ratror!==null?`${e.pl_ratror.toFixed(2)} R‚òÖ`:"N/A";const a=e.pl_rade;return a<.5?`${a.toFixed(2)} R‚äï`:a<1.5?`${a.toFixed(2)} R‚äï`:a<10?`${a.toFixed(1)} R‚äï`:`${(a/109.1).toFixed(2)} R‚òâ`}function We(e){return e.pl_imppar===null?"N/A":e.pl_imppar.toFixed(2)}function Ue(e){return e.pl_ratdor===null?"N/A":e.pl_ratdor.toFixed(2)}function Ge({planet:e,siblings:a=[]}){const{t:s}=V(),[r,p]=c.useState(null),[i,f]=c.useState(0),x=c.useRef(null),N=c.useRef(null),m=c.useRef(null),_=c.useRef(null),w=c.useRef(null),k=c.useRef(null),R=c.useRef(null),E=c.useRef(null),$=c.useRef(),z=e.is_transiting&&e.pl_trandep!==null&&e.pl_orbper!==null;if(c.useEffect(()=>{if(!z)return;const y=8e-4,u=()=>{f(o=>(o+y)%1),$.current=requestAnimationFrame(u)};return $.current=requestAnimationFrame(u),()=>{$.current&&cancelAnimationFrame($.current)}},[z]),c.useEffect(()=>{if(!z||!x.current||!N.current)return;const y=N.current.clientWidth,u=Math.min(y-20,1200),o=380,n={top:20,right:30,bottom:80,left:70},l=q(x.current);l.selectAll("*").remove(),l.attr("width",u).attr("height",o);const b=Rt(e),d=Math.min(...b.map(v=>v.fluxClean)),h=1-d,S=d-h*.5,P=1+h*1.2,M=pt().domain([0,1]).range([n.left,u-n.right]),j=pt().domain([S,P]).range([o-n.bottom,n.top]),C=l.append("g");l.append("rect").attr("width",u).attr("height",o).attr("fill","rgba(0, 0, 0, 0.2)"),C.append("g").attr("class","grid").attr("transform",`translate(0,${o-n.bottom})`).call(it(M).ticks(5).tickSize(-280).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)"),C.append("g").attr("class","grid").attr("transform",`translate(${n.left},0)`).call(nt(j).ticks(5).tickSize(-(u-n.left-n.right)).tickFormat(()=>"")).selectAll("line").attr("stroke","rgba(255, 255, 255, 0.05)");const D=.5-(e.pl_trandur&&e.pl_orbper?e.pl_trandur/24/e.pl_orbper/2:.04),g=.5+(e.pl_trandur&&e.pl_orbper?e.pl_trandur/24/e.pl_orbper/2:.04);C.append("rect").attr("x",M(D)).attr("y",n.top).attr("width",M(g)-M(D)).attr("height",o-n.top-n.bottom).attr("fill","#00e5ff").attr("opacity",.05),C.append("line").attr("x1",n.left).attr("x2",u-n.right).attr("y1",j(1)).attr("y2",j(1)).attr("stroke","#ff9500").attr("stroke-width",2.5).attr("stroke-dasharray","4,4").attr("opacity",.8);const O=Tt().x(v=>M(v.phase)).y(v=>j(v.fluxClean)).curve(ne);C.append("path").datum(b).attr("fill","none").attr("stroke","#00e5ff").attr("stroke-width",3).attr("opacity",1).attr("d",O),C.selectAll(".point").data(b.filter((v,L)=>L%4===0)).enter().append("circle").attr("class","point").attr("cx",v=>M(v.phase)).attr("cy",v=>j(v.flux)).attr("r",1.5).attr("fill","#00e5ff").attr("opacity",.15);const K=C.append("g").attr("class","marker");K.append("line").attr("class","marker-line").attr("y1",n.top).attr("y2",o-n.bottom).attr("stroke","#ff9500").attr("stroke-width",1.5).attr("opacity",.8),K.append("circle").attr("class","marker-dot").attr("r",6).attr("fill","#ff9500").attr("stroke","#fff").attr("stroke-width",2);const H=16,B=n.left,I=o-n.bottom+10;l.append("rect").attr("x",B-5).attr("y",I-5).attr("width",340).attr("height",H+10).attr("fill","rgba(0, 0, 0, 0.6)").attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",1).attr("rx",4),l.append("line").attr("x1",B).attr("x2",B+20).attr("y1",I+6).attr("y2",I+6).attr("stroke","#00e5ff").attr("stroke-width",2),l.append("text").attr("x",B+25).attr("y",I+9).attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size","10px").text("Model");const U=B+100;l.append("line").attr("x1",U).attr("x2",U+20).attr("y1",I+6).attr("y2",I+6).attr("stroke","#ff9500").attr("stroke-width",2).attr("stroke-dasharray","4,2"),l.append("text").attr("x",U+25).attr("y",I+9).attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size","10px").text("Baseline");const G=B+210;l.append("circle").attr("cx",G+10).attr("cy",I+6).attr("r",2).attr("fill","#00e5ff").attr("opacity",.25),l.append("text").attr("x",G+25).attr("y",I+9).attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size","10px").text("Data");const Z=C.append("g").attr("transform",`translate(0,${o-n.bottom})`).call(it(M).ticks(5));Z.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),Z.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),l.append("text").attr("x",u/2).attr("y",o-5).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.transit.xAxisLabel"));const J=C.append("g").attr("transform",`translate(${n.left},0)`).call(nt(j).ticks(6).tickFormat(v=>`${Number(v).toFixed(3)}`));J.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),J.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)"),l.append("text").attr("transform","rotate(-90)").attr("x",-190).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","12px").text(s("pages.planet.transit.yAxisLabel"));const lt=Math.floor(i*(b.length-1)),ot=b[Math.min(lt,b.length-1)];K.select(".marker-line").attr("x1",M(i)).attr("x2",M(i)),K.select(".marker-dot").attr("cx",M(i)).attr("cy",j(ot.flux))},[i,z,e,s]),c.useEffect(()=>{if(!z||!w.current||!k.current)return;const y=250,u=y/2,o=y/2,n=y/2-20,l=q(w.current);l.selectAll("*").remove(),l.attr("width",y).attr("height",y),l.append("rect").attr("width",y).attr("height",y).attr("fill","rgba(0, 0, 0, 0.3)");const b=n*.7,d=i-.25,h=u+Math.cos(d*2*Math.PI)*b,S=o+Math.sin(d*2*Math.PI)*b;l.append("circle").attr("cx",u).attr("cy",o).attr("r",b).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.2)").attr("stroke-width",1).attr("stroke-dasharray","4,4");const P=35,M=[[u,o],[u-P/2,o+n],[u+P/2,o+n]],j=Math.abs(h-u)<P/2&&S>o;l.append("polygon").attr("points",M.map(g=>g.join(",")).join(" ")).attr("fill",j?"rgba(255, 100, 100, 0.1)":"rgba(0, 229, 255, 0.05)").attr("stroke",j?"rgba(255, 100, 100, 0.3)":"rgba(0, 229, 255, 0.15)").attr("stroke-width",1);const D=l.append("defs").append("radialGradient").attr("id","transitStarGlow");D.append("stop").attr("offset","0%").attr("stop-color","#fff"),D.append("stop").attr("offset","50%").attr("stop-color","#ffdd44"),D.append("stop").attr("offset","100%").attr("stop-color","#ff8800").attr("stop-opacity",0),l.append("circle").attr("cx",u).attr("cy",o).attr("r",18).attr("fill","url(#transitStarGlow)"),l.append("circle").attr("cx",u).attr("cy",o).attr("r",12).attr("fill","#ffdd44"),l.append("circle").attr("cx",h).attr("cy",S).attr("r",5).attr("fill","#00e5ff").attr("stroke","#fff").attr("stroke-width",1),l.append("line").attr("x1",u).attr("x2",u).attr("y1",o+n-5).attr("y2",o+n+5).attr("stroke","rgba(255, 255, 255, 0.5)").attr("stroke-width",1),l.append("text").attr("x",u).attr("y",y-2).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.5)").attr("font-size","9px").text("To Earth"),l.append("text").attr("x",y/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text(s("pages.planet.transit.visualizations.topView"))},[i,z,s]),c.useEffect(()=>{if(!z||!R.current||!E.current)return;const y=250,u=80,o=u/2,n=180,l=q(R.current);l.selectAll("*").remove(),l.attr("width",y).attr("height",u),l.append("rect").attr("width",y).attr("height",u).attr("fill","rgba(0, 0, 0, 0.3)"),l.append("line").attr("x1",35).attr("x2",35+n).attr("y1",o).attr("y2",o).attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",2);const d=l.append("defs").append("radialGradient").attr("id","transitStarGlowSide");d.append("stop").attr("offset","0%").attr("stop-color","#fff"),d.append("stop").attr("offset","50%").attr("stop-color","#ffdd44"),d.append("stop").attr("offset","100%").attr("stop-color","#ff8800").attr("stop-opacity",0),l.append("circle").attr("cx",y/2).attr("cy",o).attr("r",28).attr("fill","url(#transitStarGlowSide)"),l.append("circle").attr("cx",y/2).attr("cy",o).attr("r",22).attr("fill","#ffdd44");const h=i-.25,S=35+n/2+Math.cos(h*2*Math.PI)*70,P=e.pl_imppar||.3,M=o+P*10,j=Math.sin(h*2*Math.PI)>0;l.append("circle").attr("cx",S).attr("cy",M).attr("r",5).attr("fill",j?"#00e5ff":"#0088aa").attr("stroke","#fff").attr("stroke-width",1).attr("opacity",j?1:.5),l.append("text").attr("x",y/2).attr("y",15).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text(s("pages.planet.transit.visualizations.sideView"))},[i,z,e,s]),c.useEffect(()=>{if(!z||a.length===0||!m.current||!_.current)return;const y=[e,...a].filter(j=>j.is_transiting&&j.pl_trandep!==null&&j.pl_trandep>0).sort((j,C)=>(C.pl_trandep||0)-(j.pl_trandep||0));if(y.length<=1)return;const u=_.current.clientWidth,o=Math.max(400,Math.min(u-40,900)),n=Math.max(200,y.length*40),l={top:20,right:20,bottom:40,left:120},b=q(m.current);b.selectAll("*").remove(),b.attr("width",o).attr("height",n),b.append("rect").attr("width",o).attr("height",n).attr("fill","rgba(0, 0, 0, 0.2)");const d=dt(y,j=>j.pl_trandep||.01),h=St().domain([.001,d*1.2]).range([l.left,o-l.right]),S=zt().domain(y.map(j=>j.pl_name.split(" ").pop()||j.pl_name)).range([l.top,n-l.bottom]).padding(.2);b.selectAll(".transit-bar").data(y).join("rect").attr("class","transit-bar").attr("x",l.left).attr("y",j=>S(j.pl_name.split(" ").pop()||j.pl_name)).attr("width",j=>h(j.pl_trandep||.01)-l.left).attr("height",S.bandwidth()).attr("fill",j=>j.pl_name===e.pl_name?"#4caf50":"#00ccff").attr("opacity",j=>j.pl_name===e.pl_name?1:.6),h(.01)>=l.left&&h(.01)<=o-l.right&&(b.append("line").attr("x1",h(.01)).attr("x2",h(.01)).attr("y1",l.top).attr("y2",n-l.bottom).attr("stroke","#ff6b6b").attr("stroke-width",2).attr("stroke-dasharray","4,4"),b.append("text").attr("x",h(.01)+5).attr("y",l.top+15).attr("fill","#ff6b6b").attr("font-size","10px").text("0.01%"));const P=b.append("g").attr("transform",`translate(0,${n-l.bottom})`).call(it(h).ticks(5,"~s").tickFormat(j=>`${j}%`));P.selectAll("text").attr("fill","rgba(255, 255, 255, 0.7)"),P.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)");const M=b.append("g").attr("transform",`translate(${l.left},0)`).call(nt(S));M.selectAll("text").attr("fill",j=>{var D;return((D=y.find(g=>(g.pl_name.split(" ").pop()||g.pl_name)===j))==null?void 0:D.pl_name)===e.pl_name?"#4caf50":"rgba(255, 255, 255, 0.7)"}).attr("font-weight",j=>{var D;return((D=y.find(g=>(g.pl_name.split(" ").pop()||g.pl_name)===j))==null?void 0:D.pl_name)===e.pl_name?"bold":"normal"}),M.selectAll("line, path").attr("stroke","rgba(255, 255, 255, 0.3)")},[e,a,z]),!z)return t.jsxs("div",{className:"transit-no-data-container",children:[t.jsxs("div",{className:"transit-no-data-message",children:[t.jsx("h4",{className:"transit-no-data-title",children:s("pages.planet.transit.noData.title")}),t.jsx("p",{className:"transit-no-data-explanation",children:s("pages.planet.transit.noData.message",{method:e.discoverymethod||"unknown method"})})]}),A(),t.jsxs("div",{className:"transit-example",children:[t.jsx("p",{children:t.jsx("strong",{children:s("pages.planet.transit.noData.example")})}),t.jsxs("ul",{children:[t.jsx("li",{children:s("pages.planet.transit.noData.jupiterExample")}),t.jsx("li",{children:s("pages.planet.transit.noData.earthExample")}),t.jsx("li",{children:s("pages.planet.transit.noData.detectionLimit")})]})]})]});function A(){const y=[{key:"geometry",title:s("pages.planet.transit.explanation.geometryTitle"),content:s("pages.planet.transit.explanation.geometryContent")},{key:"depth",title:s("pages.planet.transit.explanation.depthTitle"),content:s("pages.planet.transit.explanation.depthContent")},{key:"timing",title:s("pages.planet.transit.explanation.timingTitle"),content:s("pages.planet.transit.explanation.timingContent")}];return t.jsx("div",{className:"transit-explanation-header",children:y.map(u=>t.jsxs("div",{className:"transit-explanation-section",children:[t.jsxs("button",{className:"transit-explanation-trigger",onClick:()=>p(r===u.key?null:u.key),children:[t.jsx("span",{children:u.title}),t.jsx("span",{className:`transit-explanation-icon ${r===u.key?"expanded":""}`,children:"‚Ä∫"})]}),r===u.key&&t.jsx("div",{className:"transit-explanation-content",children:u.content})]},u.key))})}function F(){return t.jsxs("div",{className:"transit-technical-details",children:[t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.depth")}),t.jsx("div",{className:"transit-detail-value",children:He(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.duration")}),t.jsx("div",{className:"transit-detail-value",children:Oe(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.period")}),t.jsx("div",{className:"transit-detail-value",children:Be(e)})]}),e.pl_ratror!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.radiusRatio")}),t.jsx("div",{className:"transit-detail-value",children:e.pl_ratror.toFixed(3)})]}),e.pl_ratdor!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.semiMajorRatio")}),t.jsx("div",{className:"transit-detail-value",children:Ue(e)})]}),e.pl_imppar!==null&&t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.impactParameter")}),t.jsx("div",{className:"transit-detail-value",children:We(e)})]}),t.jsxs("div",{className:"transit-detail-item",children:[t.jsx("div",{className:"transit-detail-label",children:s("pages.planet.transit.technical.planetRadius")}),t.jsx("div",{className:"transit-detail-value",children:Mt(e)})]})]})}return t.jsxs("div",{className:"transit-section",children:[t.jsx("p",{className:"transit-intro",children:s("pages.planet.transit.intro")}),A(),t.jsxs("div",{className:"transit-curve-container",children:[t.jsx("h4",{className:"transit-curve-title",children:s("pages.planet.transit.curveTitle")}),t.jsx("div",{ref:N,className:"transit-curve-chart",children:t.jsx("svg",{ref:x})})]}),t.jsxs("div",{className:"transit-data-display",children:[t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.currentFlux")}),t.jsx("div",{className:"transit-data-value",children:(()=>{const y=Rt(e),u=Math.floor(i*(y.length-1));return y[Math.min(u,y.length-1)].flux.toFixed(4)})()})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.transitDepth")}),t.jsxs("div",{className:"transit-data-value",children:[((e.pl_trandep||(e.pl_ratror?e.pl_ratror*e.pl_ratror*100:.01))*100).toFixed(2),"%"]})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.planetRadius")}),t.jsx("div",{className:"transit-data-value",children:Mt(e)})]}),t.jsxs("div",{className:"transit-data-item",children:[t.jsx("div",{className:"transit-data-label",children:s("pages.planet.transit.dataDisplay.phase")}),t.jsx("div",{className:"transit-data-value",children:i.toFixed(2)})]})]}),t.jsxs("div",{className:"transit-visualizations-grid",children:[t.jsxs("div",{className:"transit-orbital-card",children:[t.jsx("h4",{className:"transit-viz-subtitle",children:s("pages.planet.transit.visualizations.orbitalGeometry")}),t.jsxs("div",{className:"transit-orbital-views",children:[t.jsx("div",{className:"transit-orbital-diagram-container",children:t.jsx("div",{ref:k,className:"transit-orbital-diagram",children:t.jsx("svg",{ref:w})})}),t.jsx("div",{className:"transit-side-view-container",children:t.jsx("div",{ref:E,className:"transit-side-view",children:t.jsx("svg",{ref:R})})})]})]}),t.jsxs("div",{className:"transit-legend-card",children:[t.jsx("h4",{className:"transit-viz-subtitle",children:s("pages.planet.transit.visualizations.whatWeLearn")}),t.jsxs("div",{className:"transit-legend-section",children:[t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.duringTransit")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem2")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.duringTransitItem3")}),t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.outsideTransit")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.outsideTransitItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.outsideTransitItem2")}),t.jsx("div",{className:"transit-legend-title",children:s("pages.planet.transit.legend.whatWeLearn")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem1")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem2")}),t.jsx("div",{className:"transit-legend-item",children:s("pages.planet.transit.legend.whatWeLearnItem3")})]})]})]}),a.length>0&&t.jsxs("div",{className:"transit-comparison-container",children:[t.jsx("h4",{className:"transit-comparison-title",children:s("pages.planet.transit.comparisonTitle")}),t.jsx("p",{className:"transit-comparison-description",children:s("pages.planet.transit.comparisonDescription")}),t.jsx("div",{ref:_,className:"transit-comparison-chart",children:t.jsx("svg",{ref:m})}),t.jsxs("div",{className:"transit-comparison-legend",children:[t.jsxs("div",{className:"transit-comparison-legend-item",children:[t.jsx("div",{className:"transit-legend-dot current"}),t.jsx("span",{children:e.pl_name})]}),t.jsxs("div",{className:"transit-comparison-legend-item",children:[t.jsx("div",{className:"transit-legend-dot sibling"}),t.jsx("span",{children:"Sibling planets"})]}),t.jsxs("div",{className:"transit-comparison-legend-item",children:[t.jsx("div",{className:"transit-legend-dot threshold"}),t.jsx("span",{children:"Detection threshold"})]})]})]}),F()]})}function qe({isOpen:e,onClose:a}){const{t:s}=V();return e?t.jsx("div",{className:"viz-dialog-overlay",onClick:a,children:t.jsxs("div",{className:"viz-dialog",onClick:r=>r.stopPropagation(),children:[t.jsx("button",{className:"viz-dialog-close",onClick:a,children:"√ó"}),t.jsx("h3",{className:"viz-dialog-title",children:s("pages.planet.visualization.title")}),t.jsxs("div",{className:"viz-dialog-content",children:[t.jsx("p",{children:s("pages.planet.visualization.intro")}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.density.title")}),t.jsx("p",{children:s("pages.planet.visualization.density.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.insolation.title")}),t.jsx("p",{children:s("pages.planet.visualization.insolation.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.starTemp.title")}),t.jsx("p",{children:s("pages.planet.visualization.starTemp.description")})]}),t.jsxs("div",{className:"viz-method-section",children:[t.jsx("h4",{children:s("pages.planet.visualization.planetType.title")}),t.jsx("p",{children:s("pages.planet.visualization.planetType.description")})]}),t.jsx("p",{className:"viz-disclaimer",children:s("pages.planet.visualization.disclaimer")})]})]})}):null}function X({title:e,children:a,className:s=""}){return t.jsxs("section",{className:`planet-section ${s}`,children:[e&&t.jsx("h2",{className:"planet-section-title",children:e}),t.jsx("div",{className:"planet-section-content",children:a})]})}function aa(){const{t:e}=V(),{planetId:a}=Xt(),s=Zt(),{getPlanetBySlug:r,getPlanetsByHost:p,isLoading:i}=Jt(),[f,x]=c.useState(!1),N=c.useRef(null),m=a?r(a):void 0,_=c.useMemo(()=>m?p(m.hostname):[],[m,p]);c.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[a]);const w=()=>{if(N.current){const E=N.current.getBoundingClientRect().top+window.scrollY-120;window.scrollTo({top:E,behavior:"smooth"})}};return i?t.jsx("div",{className:"planet-page",children:t.jsxs("div",{className:"planet-loading",children:[t.jsx("div",{className:"spinner-orbit",children:t.jsx("div",{className:"spinner-planet"})}),t.jsx("p",{className:"spinner-text",children:e("pages.planet.loading")})]})}):m?t.jsxs("div",{className:"planet-page",children:[t.jsx("button",{className:"planet-back-button",onClick:()=>s(-1),children:e("pages.planet.back")}),t.jsxs("div",{className:"planet-hero",children:[t.jsx("div",{className:"planet-canvas-container",children:t.jsx(de,{planet:m})}),t.jsx("button",{className:"viz-info-button",onClick:()=>x(!0),title:e("pages.planet.visualization.title"),children:t.jsx("span",{className:"viz-info-icon",children:"i"})}),t.jsx(qe,{isOpen:f,onClose:()=>x(!1)}),t.jsxs("div",{className:"planet-hero-text",children:[t.jsx("h1",{className:"planet-hero-title",children:m.pl_name}),t.jsx("p",{className:"planet-hero-subtitle",children:m.planet_type||e("pages.planet.exoplanet")}),t.jsxs("div",{className:"planet-hero-links",children:[t.jsxs("button",{className:"planet-hero-link",onClick:w,children:[e("pages.planet.viewStats")," ‚Üì"]}),m.hostname&&t.jsx(gt,{to:`/stars/${vt(m.hostname)}`,className:"planet-hero-link",children:e("pages.planet.viewSystem",{hostname:m.hostname})})]})]})]}),t.jsxs("div",{className:"planet-content",ref:N,children:[t.jsx(X,{title:e("pages.planet.sections.earthComparison"),className:"section-comparison",children:t.jsx(Re,{planet:m})}),m.has_rv_data?t.jsx(X,{title:e("pages.planet.sections.radialVelocity"),className:"section-rv",children:t.jsx(Ke,{planet:m,siblings:_})}):m.is_transiting||m.pl_trandep!==null&&m.pl_orbper!==null?t.jsx(X,{title:e("pages.planet.sections.transitDetection"),className:"section-transit",children:t.jsx(Ge,{planet:m,siblings:_})}):null,t.jsxs("div",{className:"planet-section-row",children:[t.jsx(X,{title:e("pages.planet.sections.habitability"),className:"section-habitability",children:t.jsx(Te,{planet:m})}),t.jsx(X,{title:e("pages.planet.sections.temperature"),className:"section-temperature",children:t.jsx($e,{planet:m})})]}),t.jsx(X,{title:e("pages.planet.sections.orbitalPosition"),className:"section-orbital",children:t.jsx(Ee,{planet:m,siblings:_})}),m.distance_ly&&m.distance_ly>0&&t.jsx(X,{title:e("pages.planet.sections.travelTime"),className:"section-travel",children:t.jsx(ae,{distanceLy:m.distance_ly})}),t.jsx(X,{className:"section-details",children:t.jsx(ye,{planet:m})}),_.length>1&&t.jsx(X,{className:"section-siblings",children:t.jsx(Ce,{currentPlanet:m,siblings:_})})]})]}):t.jsx("div",{className:"planet-page",children:t.jsxs("div",{className:"planet-not-found",children:[t.jsx("h1",{children:e("pages.planet.notFound.title")}),t.jsx("p",{children:e("pages.planet.notFound.message",{planetId:a||""})}),t.jsx(gt,{to:"/planets",className:"planet-back-link",children:e("pages.planet.notFound.browseAll")})]})})}export{aa as default};
