import{r as n,Q as Oe,g as Y,f as Ge,C as z,V as Z,j as e,D as Le,A as ae,s as P,h as Ye,i as $e,k as Ke,l as Ve,m as We,o as qe,p as Ze,q as Xe,F as Je,t as Qe,b as Pe,v as Be,w as et,x as tt,y as Ce,M as st,u as F,z as at,d as rt,c as it,n as nt,L as Se}from"./index-voVAQxyZ.js";import{a as K,C as lt,u as ct}from"./react-three-fiber.esm-BrSCth1a.js";import{c as ot}from"./ringVisuals-B_4wmFjp.js";import{_ as mt,O as ut,t as dt,c as pt,i as ht,a as ee,l as ft,s as $,b as re,d as De,e as vt,f as ke,m as xt,g as fe,h as Fe,j as pe}from"./transform-B6V43gPb.js";import{g as gt,a as yt}from"./habitabilityAnalytics-CzP9HgSM.js";const Ne=n.forwardRef(function({children:a,follow:s=!0,lockX:i=!1,lockY:r=!1,lockZ:l=!1,...d},x){const c=n.useRef(null),h=n.useRef(null),o=new Oe;return K(({camera:u})=>{if(!s||!h.current)return;const m=c.current.rotation.clone();h.current.updateMatrix(),h.current.updateWorldMatrix(!1,!1),h.current.getWorldQuaternion(o),u.getWorldQuaternion(c.current.quaternion).premultiply(o.invert()),i&&(c.current.rotation.x=m.x),r&&(c.current.rotation.y=m.y),l&&(c.current.rotation.z=m.z)}),n.useImperativeHandle(x,()=>h.current,[]),n.createElement("group",mt({ref:h},d),n.createElement("group",{ref:c},a))}),q=4,ie=8;function St({starRadius:t,starColor:a,starSeed:s,activityLevel:i}){const r=n.useRef([]),l=n.useRef([]),d=n.useRef(new Array(q).fill(-1e3)),x=n.useRef(i);x.current=i;const c=n.useMemo(()=>{const p=[];for(let S=0;S<q;S++){const f=s+S*.1;p.push({angle:Y(`${f}-angle`)*Math.PI*2,elevation:(Y(`${f}-elev`)-.5)*Math.PI*.8,phase:Y(`${f}-phase`)*Math.PI*2,speed:.7+Y(`${f}-speed`)*.6,size:.8+Y(`${f}-size`)*.4})}return p},[s]),h=n.useMemo(()=>Ge(),[]),o=n.useMemo(()=>c.map(p=>({uStarColor:{value:new z(a)},uTime:{value:0},uFlarePhase:{value:0},uFlareLength:{value:t*.8*p.size},uFlareSeed:{value:p.phase}})),[a,t,c]),u=n.useCallback(p=>{const S=performance.now()/1e3;if(p!==void 0&&p>=0&&p<q)d.current[p]=S,console.log(`üî• Triggered flare ${p}`);else{const f=Math.floor(Math.random()*q);d.current[f]=S,console.log(`üî• Triggered random flare ${f}`)}},[]),m=n.useCallback(()=>{const p=performance.now()/1e3;for(let S=0;S<q;S++)d.current[S]=p+S*.2;console.log("üî•üî•üî• Triggered ALL flares!")},[]);n.useEffect(()=>(console.log("üåü SolarFlares component mounting..."),console.log(`   Star radius: ${t}, Activity: ${i}`),window.solarFlares={trigger:u,triggerAll:m,setActivity:p=>{console.log(`Activity level set to ${p} (only affects new cycles)`)},status:()=>{console.log("Solar Flares Status:"),console.log(`  - Number of flares: ${q}`),console.log(`  - Activity level: ${x.current}`),console.log(`  - Cycle duration: ${ie}s`),console.log(`  - Star radius: ${t}`),console.log("Commands:"),console.log("  solarFlares.trigger()      - Trigger random flare"),console.log("  solarFlares.trigger(0-3)   - Trigger specific flare"),console.log("  solarFlares.triggerAll()   - Trigger all flares")}},console.log("‚úÖ Solar flares ready! Type solarFlares.status() for commands"),()=>{console.log("üåü SolarFlares component unmounting..."),delete window.solarFlares}),[u,m,t,i]),K(p=>{const S=p.clock.elapsedTime,f=performance.now()/1e3;c.forEach((j,N)=>{const E=l.current[N];if(!E)return;const _=d.current[N],v=f-_,T=3;let b=0;if(v>=0&&v<T)b=v/T,b=Math.sin(b*Math.PI);else{const y=(S*j.speed+j.phase)%ie/ie,A=1-x.current*.6;b=y>A?(y-A)/(1-A):0}E.uniforms.uTime.value=S,E.uniforms.uFlarePhase.value=b})});const g=n.useMemo(()=>c.map(p=>{const S=Math.cos(p.elevation)*Math.cos(p.angle),f=Math.sin(p.elevation),j=Math.cos(p.elevation)*Math.sin(p.angle),N=new Z(S,f,j).multiplyScalar(t*1.05),E=N.clone().normalize(),_=new Oe;return _.setFromUnitVectors(new Z(0,1,0),E),{position:N,quaternion:_}}),[c,t]);return e.jsx("group",{children:c.map((p,S)=>e.jsxs("mesh",{ref:f=>r.current[S]=f,position:g[S].position,quaternion:g[S].quaternion,children:[e.jsx("planeGeometry",{args:[t*.3*p.size,t*1.5*p.size]}),e.jsx("shaderMaterial",{ref:f=>l.current[S]=f,vertexShader:P.get(h.vert),fragmentShader:P.get(h.frag),uniforms:o[S],transparent:!0,depthWrite:!1,blending:ae,side:Le})]},S))})}const _e=.15,je={CLOSE_THRESHOLD_MULTIPLIER:4,FAR_THRESHOLD_MULTIPLIER:20},C={RAY_STAR_RADIUS:.125,GLOW_SIZE_MULTIPLIER:1.8,RAYS_SIZE_MULTIPLIER:4,CORONA_SCALE_MULTIPLIER:1.5,PRIMARY_LIGHT_INTENSITY:2,COMPANION_LIGHT_INTENSITY:1.5,PRIMARY_LIGHT_DISTANCE:50,COMPANION_LIGHT_DISTANCE:40},Q={INNER_RADIUS_MULTIPLIER:.6,OUTER_RADIUS_MULTIPLIER:1.3,BASE_ROTATION_X:Math.PI/2},he={MAX_ECCENTRICITY:.99};function Nt(t,a,s,i){const r=a*.3-.15;return{base:ot(t,a),density:s,insolation:i,variation:r}}function _t(t){return t?Math.min(t/300,1):.5}function jt(t){return t?Math.min(t/2,1):.5}function Et(t,a){const s=a*je.CLOSE_THRESHOLD_MULTIPLIER,i=a*je.FAR_THRESHOLD_MULTIPLIER;return 1-Math.min(1,Math.max(0,(t-s)/(i-s)))}function Rt({body:t,isHovered:a,onHover:s,onClick:i,onPositionUpdate:r}){const l=n.useRef(null),d=n.useRef(null),x=n.useRef(null),c=n.useRef(null),h=n.useRef(Math.random()*Math.PI*2),o=n.useContext(ve),u=n.useMemo(()=>Y(t.id??t.name),[t.id,t.name]),m=n.useMemo(()=>Ye(t.spectralType),[t.spectralType]),g=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??5778},uSeed:{value:u},uActivityLevel:{value:m}}),[t.color,t.temperature,u,m]),p=n.useRef(null),S=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uIntensity:{value:t.emissiveIntensity??1},uSeed:{value:u},uActivityLevel:{value:m}}),[t.color,t.emissiveIntensity,u,m]),f=n.useRef(null),j=n.useMemo(()=>({uStarColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??5778},uSeed:{value:u},uActivityLevel:{value:m},uStarRadius:{value:C.RAY_STAR_RADIUS}}),[t.color,t.temperature,u,m]),N=n.useMemo(()=>t.planetData?{...$e({planet:t.planetData,detailLevel:"detailed",starTemp:t.planetData.st_teff??void 0,showTerminator:!1}),uZoomLevel:{value:0},uBodyDiameter:{value:t.diameter}}:{uBaseColor:{value:new z(t.color)},uTime:{value:0},uTemperature:{value:t.temperature??300},uHasAtmosphere:{value:t.hasAtmosphere??.5},uSeed:{value:Math.random()},uDensity:{value:.5},uInsolation:{value:.5},uStarTemp:{value:5778},uDetailLevel:{value:1},uEnableTerminator:{value:0},uColorTempFactor:{value:.5},uColorCompositionFactor:{value:.5},uColorIrradiationFactor:{value:.5},uColorMetallicityFactor:{value:.5},uZoomLevel:{value:0},uBodyDiameter:{value:t.diameter}},[t.planetData,t.color,t.temperature,t.hasAtmosphere,t.diameter]),E=n.useMemo(()=>t.planetData?Ke(t.planetData):"rocky",[t.planetData]),_=n.useMemo(()=>Ve(E),[E]),v=n.useMemo(()=>We("v2"),[]),T=n.useMemo(()=>qe("v2"),[]),b=n.useMemo(()=>Ze(),[]),w=n.useMemo(()=>Xe(),[]),y=n.useRef(null),A=n.useMemo(()=>{var W,xe,ge,ye;const R=t.id?Y(t.id):Math.random(),O=_t((W=t.planetData)==null?void 0:W.pl_bmasse),L=jt((xe=t.planetData)==null?void 0:xe.pl_insol),M=((ge=t.planetData)==null?void 0:ge.pl_eqt)??((ye=t.planetData)!=null&&ye.pl_insol?Math.sqrt(t.planetData.pl_insol)*255:150),U=Nt(M,R,O,L).base,H=t.diameter*Q.INNER_RADIUS_MULTIPLIER,J=t.diameter*Q.OUTER_RADIUS_MULTIPLIER;return{uBaseColor:{value:U},uRingColor:{value:U},uTime:{value:0},uSeed:{value:R},uDensity:{value:O},uInsolation:{value:L},uInnerRadius:{value:H},uOuterRadius:{value:J}}},[t.id,t.planetData,t.diameter]);K((R,O)=>{if(t.type==="planet"&&l.current&&t.orbitPeriod>0&&(h.current+=Math.PI*2*O*_e/(t.orbitPeriod/60)),t.type==="star"&&t.orbitRadius>0&&l.current&&t.orbitPeriod>0&&(h.current+=Math.PI*2*O*_e*2/(t.orbitPeriod/60)),t.type==="planet"&&l.current){const M=Math.min(Math.max(t.orbitEccentricity||0,0),he.MAX_ECCENTRICITY),I=t.orbitRadius,U=I*Math.sqrt(1-M*M),H=I*M,J=I*Math.cos(h.current)-H,W=U*Math.sin(h.current);l.current.position.x=J,l.current.position.z=W}if(t.type==="star"&&t.orbitRadius>0&&l.current){const M=Math.min(Math.max(t.orbitEccentricity||0,0),he.MAX_ECCENTRICITY),I=t.orbitRadius,U=I*Math.sqrt(1-M*M),H=t.isCompanionStar?Math.PI:0,J=I*Math.cos(h.current+H),W=U*Math.sin(h.current+H);l.current.position.x=J,l.current.position.z=W}l.current&&r&&r(t.id,l.current.position),d.current&&(d.current.rotation.x=t.axialTilt,t.isTidallyLocked&&t.type==="planet"?d.current.rotation.y=-h.current+Math.PI:d.current.rotation.y+=O*t.rotationSpeed);const L=R.clock.elapsedTime;if(t.type==="star")x.current&&(x.current.uniforms.uTime.value=L),p.current&&(p.current.uniforms.uTime.value=L),f.current&&(f.current.uniforms.uTime.value=L);else if(t.type==="planet"){if(c.current&&(c.current.uniforms.uTime.value=L,o&&l.current)){const M=o.cameraDistance.current,I=l.current.position,U=Math.sqrt(Math.pow(I.x,2)+Math.pow(I.y-M*.4,2)+Math.pow(I.z-M,2)),H=Et(U,t.diameter);c.current.uniforms.uZoomLevel.value=H}y.current&&(y.current.uniforms.uTime.value=L)}});const V=a?1.3:1;if(t.type==="star"){const R=t.diameter/2,O=e.jsxs(e.Fragment,{children:[e.jsx("pointLight",{position:[0,0,0],color:t.color,intensity:t.isCompanionStar?C.COMPANION_LIGHT_INTENSITY:C.PRIMARY_LIGHT_INTENSITY,distance:t.isCompanionStar?C.COMPANION_LIGHT_DISTANCE:C.PRIMARY_LIGHT_DISTANCE}),e.jsx(Ne,{children:e.jsxs("mesh",{children:[e.jsx("planeGeometry",{args:[t.diameter*C.GLOW_SIZE_MULTIPLIER,t.diameter*C.GLOW_SIZE_MULTIPLIER]}),e.jsx("shaderMaterial",{transparent:!0,depthWrite:!1,blending:ae,uniforms:{uColor:{value:new z(t.color)},uIntensity:{value:t.emissiveIntensity??1}},vertexShader:`
                varying vec2 vUv;
                void main() {
                  vUv = uv;
                  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
              `,fragmentShader:`
                uniform vec3 uColor;
                uniform float uIntensity;
                varying vec2 vUv;
                void main() {
                  vec2 center = vUv - 0.5;
                  float dist = length(center) * 2.0;
                  // Start glow from edge of star (around 0.55 radius in UV space)
                  float glow = 1.0 - smoothstep(0.55, 1.0, dist);
                  // Clamp intensity: min 0.7, max 1.8 to prevent huge glows
                  float clampedIntensity = clamp(uIntensity, 0.7, 1.8);
                  glow = pow(glow, 2.5) * clampedIntensity * 0.35;
                  gl_FragColor = vec4(uColor, glow);
                }
              `})]})}),e.jsxs("mesh",{ref:d,children:[e.jsx("sphereGeometry",{args:[t.diameter/2,64,64]}),e.jsx("shaderMaterial",{ref:x,vertexShader:P.get(v.vert),fragmentShader:P.get(v.frag),uniforms:g})]}),e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[R*C.CORONA_SCALE_MULTIPLIER,64,64]}),e.jsx("shaderMaterial",{ref:p,vertexShader:P.get(T.vert),fragmentShader:P.get(T.frag),uniforms:S,transparent:!0,depthWrite:!1,blending:ae,side:Je})]}),e.jsx(St,{starRadius:R,starColor:t.color,starSeed:u,activityLevel:m}),e.jsx(Ne,{children:e.jsxs("mesh",{children:[e.jsx("planeGeometry",{args:[t.diameter*C.RAYS_SIZE_MULTIPLIER,t.diameter*C.RAYS_SIZE_MULTIPLIER]}),e.jsx("shaderMaterial",{ref:f,vertexShader:P.get(b.vert),fragmentShader:P.get(b.frag),uniforms:j,transparent:!0,depthWrite:!1,blending:ae})]})})]});return t.orbitRadius>0?e.jsx("group",{ref:l,children:O}):e.jsx("group",{ref:l,children:O})}return e.jsxs("group",{ref:l,children:[e.jsxs("mesh",{ref:d,scale:[V,V,V],onPointerOver:R=>{var M,I;R.stopPropagation(),document.body.style.cursor="pointer";const O=R.clientX??((M=R.nativeEvent)==null?void 0:M.clientX),L=R.clientY??((I=R.nativeEvent)==null?void 0:I.clientY);s(t,O&&L?{x:O,y:L}:void 0)},onPointerMove:R=>{var O,L;if(a){const M=R.clientX??((O=R.nativeEvent)==null?void 0:O.clientX),I=R.clientY??((L=R.nativeEvent)==null?void 0:L.clientY);M&&I&&s(t,{x:M,y:I})}},onPointerOut:R=>{R.stopPropagation(),document.body.style.cursor="grab",s(null)},onClick:R=>{R.stopPropagation(),i==null||i(t)},children:[e.jsx("sphereGeometry",{args:[t.diameter/2,48,48]}),e.jsx("shaderMaterial",{ref:c,vertexShader:P.get(Qe("v2")),fragmentShader:P.get(_),uniforms:N})]}),t.hasRings&&e.jsxs("mesh",{rotation:[Q.BASE_ROTATION_X+t.axialTilt,0,0],children:[e.jsx("ringGeometry",{args:[t.diameter*Q.INNER_RADIUS_MULTIPLIER,t.diameter*Q.OUTER_RADIUS_MULTIPLIER,64]}),e.jsx("shaderMaterial",{ref:y,vertexShader:P.get(w.vert),fragmentShader:P.get(w.frag),uniforms:A,transparent:!0,depthWrite:!1,side:Le})]}),a&&e.jsxs("mesh",{scale:[1.4,1.4,1.4],children:[e.jsx("sphereGeometry",{args:[t.diameter/2,24,24]}),e.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.15,side:Pe})]})]})}const Ee={FADE_DURATION:2.2,FADE_EASING_POWER:3},ne={SEGMENTS:128,FULL_CIRCLE:Math.PI*2,ECCENTRICITY_THRESHOLD:.1},te={highlighted:{color:"#ffffff",opacity:.8},binaryOrbit:{color:"#ffaa44",opacity:.5},eccentricPlanet:{color:"#aaaaff",opacity:.45},circularPlanet:{color:"#888888",opacity:.3}};function Tt(t,a,s){return t?te.highlighted:a?te.binaryOrbit:s?te.eccentricPlanet:te.circularPlanet}function Re({radius:t,eccentricity:a=0,isHighlighted:s,isBinaryOrbit:i=!1}){const r=n.useRef(null),l=n.useRef(null),[d,x]=n.useState(!1),c=Math.min(Math.max(a,0),he.MAX_ECCENTRICITY),h=t,o=h*Math.sqrt(1-c*c),u=i?0:h*c,m=c>ne.ECCENTRICITY_THRESHOLD,g=n.useMemo(()=>{const p=ne.SEGMENTS,S=[];for(let N=0;N<=p;N++){const E=N/p*ne.FULL_CIRCLE,_=h*Math.cos(E)-u,v=o*Math.sin(E);S.push(new Z(_,0,v))}const f=new Be().setFromPoints(S),j=new et({transparent:!0,depthWrite:!1});return new tt(f,j)},[h,o,u]);return K(p=>{if(!r.current)return;const S=r.current.material;l.current===null&&(l.current=p.clock.elapsedTime);let f=1;if(!d){const N=p.clock.elapsedTime-l.current,E=Math.min(N/Ee.FADE_DURATION,1);f=1-Math.pow(1-E,Ee.FADE_EASING_POWER),E>=1&&x(!0)}const j=Tt(s,i,m);S.color.set(j.color),S.opacity=j.opacity*f}),e.jsx("primitive",{ref:r,object:g})}const Te={FADE_DURATION:2.5,FADE_EASING_POWER:3},be={WIDTH_SEGMENTS:64,HEIGHT_SEGMENTS:32},bt={THEME_COUNT:6},Mt={bluePurple:{primary:{hue:.7,saturation:.6,lightness:.5,hueVariation:.1},secondary:{hue:.8,saturation:.5,lightness:.4,hueVariation:.05}},redOrange:{primary:{hue:0,saturation:.7,lightness:.5,hueVariation:.05},secondary:{hue:.05,saturation:.6,lightness:.4,hueVariation:.05}},tealCyan:{primary:{hue:.5,saturation:.5,lightness:.5,hueVariation:.05},secondary:{hue:.55,saturation:.4,lightness:.4,hueVariation:.05}},greenYellow:{primary:{hue:.25,saturation:.5,lightness:.45,hueVariation:.1},secondary:{hue:.15,saturation:.4,lightness:.4,hueVariation:.1}},pinkMagenta:{primary:{hue:.9,saturation:.6,lightness:.55,hueVariation:.05},secondary:{hue:.85,saturation:.5,lightness:.45,hueVariation:.05}},blueViolet:{primary:{hue:.65,saturation:.4,lightness:.35,hueVariation:.1},secondary:{hue:.7,saturation:.3,lightness:.3,hueVariation:.1}}};function It(t){const a=Math.floor(t*bt.THEME_COUNT),s=Object.values(Mt),i=s[Math.min(a,s.length-1)];return{primary:new z().setHSL(i.primary.hue+t*i.primary.hueVariation,i.primary.saturation,i.primary.lightness),secondary:new z().setHSL(i.secondary.hue+t*i.secondary.hueVariation,i.secondary.saturation,i.secondary.lightness)}}function At(t){let a=0;for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);a=(a<<5)-a+i,a=a&a}return Math.abs(a%1e4)/1e4}function wt({systemName:t,density:a=.3,radius:s=400}){const i=n.useRef(null),r=n.useMemo(()=>At(t),[t]),l=n.useMemo(()=>It(r),[r]),d=n.useRef(null),[x,c]=n.useState(!1),h=n.useMemo(()=>({uTime:{value:0},uSeed:{value:r},uDensity:{value:a},uOpacity:{value:0},uPrimaryColor:{value:l.primary},uSecondaryColor:{value:l.secondary}}),[r,a,l]);return K(o=>{if(i.current&&(i.current.uniforms.uTime.value=o.clock.elapsedTime,d.current===null&&(d.current=o.clock.elapsedTime),!x)){const u=o.clock.elapsedTime-d.current,m=Math.min(u/Te.FADE_DURATION,1),g=1-Math.pow(1-m,Te.FADE_EASING_POWER);i.current.uniforms.uOpacity.value=g,m>=1&&c(!0)}}),a<=0?null:e.jsxs("mesh",{children:[e.jsx("sphereGeometry",{args:[s,be.WIDTH_SEGMENTS,be.HEIGHT_SEGMENTS]}),e.jsx("shaderMaterial",{ref:i,vertexShader:P.get("v2NebulaVert"),fragmentShader:P.get("v2NebulaFrag"),uniforms:h,transparent:!0,side:Pe,depthWrite:!1})]})}const k={COUNT:3e3,SPHERE_RADIUS:500,POINT_SIZE:1.5,COLOR:16777215,INITIAL_OPACITY:0,TARGET_OPACITY:.6,FADE_DURATION:2,FADE_EASING_POWER:3},se={AMBIENT_INTENSITY:.6,HEMISPHERE_SKY_COLOR:"#ffffff",HEMISPHERE_GROUND_COLOR:"#444444",HEMISPHERE_INTENSITY:.5},X={ASPECT_RATIO:1.5,FOV:50,MIN_DISTANCE:2,INITIAL_Y_MULTIPLIER:.5},le={MULTIPLIER_DELTA_THRESHOLD:.01,ADJUSTMENT_STOP_THRESHOLD:.001,RESPONSIVE_LERP:.1},G={PROGRESS_RAMP_UP:3,OFFSET_DISTANCE_MULTIPLIER:4,Y_OFFSET_MULTIPLIER:.4,BASE_LERP:.06,FOLLOW_LERP:.12,TARGET_LERP_MULTIPLIER:1.5},B={PROGRESS_RAMP_DOWN:2,CAMERA_RETURN_LERP:.03,TARGET_RETURN_LERP:.03,RESIZE_ADJUST_LERP:.02,RESIZE_TARGET_LERP:.02},Ot={SPEED:.1},ce={STAR_SIZE_MULTIPLIER:4,ORBITS_MULTIPLIER:2.5,MAX_DISTANCE_MULTIPLIER:3},Me={DENSITY:.7,RADIUS:480},Lt={BACKGROUND_COLOR:"black"},Ue=n.createContext(null),ve=n.createContext(null);function Pt({count:t=k.COUNT}){const a=n.useRef(null),s=n.useRef(null),[i,r]=n.useState(!1),l=n.useMemo(()=>{const d=new Float32Array(t*3);for(let x=0;x<t;x++){const c=Math.random()*Math.PI*2,h=Math.acos(2*Math.random()-1),o=k.SPHERE_RADIUS;d[x*3]=o*Math.sin(h)*Math.cos(c),d[x*3+1]=o*Math.sin(h)*Math.sin(c),d[x*3+2]=o*Math.cos(h)}return d},[t]);return K(d=>{if(a.current&&(s.current===null&&(s.current=d.clock.elapsedTime),!i)){const x=d.clock.elapsedTime-s.current,c=Math.min(x/k.FADE_DURATION,1),h=(1-Math.pow(1-c,k.FADE_EASING_POWER))*k.TARGET_OPACITY;a.current.opacity=h,c>=1&&r(!0)}}),e.jsxs("points",{children:[e.jsx("bufferGeometry",{children:e.jsx("bufferAttribute",{attach:"attributes-position",count:t,array:l,itemSize:3})}),e.jsx("pointsMaterial",{ref:a,size:k.POINT_SIZE,color:k.COLOR,transparent:!0,opacity:k.INITIAL_OPACITY,sizeAttenuation:!1})]})}function He(t){return X.ASPECT_RATIO/t}function Ct({shouldAutoRotate:t,maxDistance:a,focusedBody:s,baseCameraDistance:i}){const r=n.useRef(null),{camera:l,viewport:d}=ct(),x=n.useContext(Ue),c=n.useContext(ve),h=n.useRef(new Z(0,0,0)),o=n.useRef(!1),u=n.useRef(0),m=n.useRef(1),g=n.useRef(!1);return K((p,S)=>{if(!r.current)return;c&&(c.cameraDistance.current=l.position.length());const f=d.width/d.height,j=He(f),N=Math.abs(j-m.current);N>le.MULTIPLIER_DELTA_THRESHOLD&&(g.current=!0);const E=i*j,_=new Z(0,E*X.INITIAL_Y_MULTIPLIER,E);if(m.current=st.lerp(m.current,j,le.RESPONSIVE_LERP),N<le.ADJUSTMENT_STOP_THRESHOLD&&(g.current=!1),s&&x){const v=x.positions.current.get(s.id);if(v){o.current=!0,u.current=Math.min(u.current+S*G.PROGRESS_RAMP_UP,1);const T=s.diameter*G.OFFSET_DISTANCE_MULTIPLIER,b=new Z(v.x,v.y+T*G.Y_OFFSET_MULTIPLIER,v.z+T),w=G.BASE_LERP+u.current*(G.FOLLOW_LERP-G.BASE_LERP);l.position.lerp(b,w),r.current.target.lerp(v,w*G.TARGET_LERP_MULTIPLIER),r.current.update()}}else o.current||u.current>0?(u.current=Math.max(u.current-S*B.PROGRESS_RAMP_DOWN,0),l.position.lerp(_,B.CAMERA_RETURN_LERP),r.current.target.lerp(h.current,B.TARGET_RETURN_LERP),r.current.update(),u.current<=0&&(o.current=!1)):g.current?(l.position.lerp(_,B.RESIZE_ADJUST_LERP),r.current.target.lerp(h.current,B.RESIZE_TARGET_LERP),r.current.update()):t&&(r.current.setAzimuthalAngle(r.current.getAzimuthalAngle()+S*Ot.SPEED),r.current.update())}),e.jsx(ut,{ref:r,enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:X.MIN_DISTANCE,maxDistance:a,autoRotate:!1})}function Dt({star:t,planets:a,hoveredBody:s,focusedBody:i,onBodyHover:r,onBodyClick:l,onBackgroundClick:d}){const x=n.useRef(new Map),c=n.useRef(100),h=n.useMemo(()=>({positions:x,registerPosition:(f,j)=>{x.current.set(f,j.clone())}}),[]),o=n.useMemo(()=>({cameraDistance:c}),[]),u=n.useMemo(()=>Ce(t,a),[t,a]),m=n.useMemo(()=>{const f=Math.max(...u.map(v=>v.orbitRadius),10),j=u.find(v=>v.type==="star"),E=((j==null?void 0:j.diameter)??3)*ce.STAR_SIZE_MULTIPLIER,_=f*ce.ORBITS_MULTIPLIER;return Math.max(E,_)},[u]),g=n.useMemo(()=>{const f=typeof window<"u"?window.innerWidth/window.innerHeight:X.ASPECT_RATIO,j=He(f);return m*j},[m]),p=n.useCallback((f,j)=>{r==null||r(f,j)},[r]),S=n.useCallback(f=>{l==null||l(f)},[l]);return e.jsx("div",{className:"starsystem-container",children:e.jsx(lt,{camera:{position:[0,g*X.INITIAL_Y_MULTIPLIER,g],fov:X.FOV},style:{background:Lt.BACKGROUND_COLOR},onPointerMissed:()=>d==null?void 0:d(),children:e.jsx(ve.Provider,{value:o,children:e.jsx(Ue.Provider,{value:h,children:e.jsxs(n.Suspense,{fallback:null,children:[e.jsx("ambientLight",{intensity:se.AMBIENT_INTENSITY}),e.jsx("hemisphereLight",{args:[se.HEMISPHERE_SKY_COLOR,se.HEMISPHERE_GROUND_COLOR,se.HEMISPHERE_INTENSITY]}),e.jsx(Pt,{count:k.COUNT}),e.jsx(wt,{systemName:t.hostname,density:Me.DENSITY,radius:Me.RADIUS}),u.map(f=>e.jsx(Rt,{body:f,isHovered:(s==null?void 0:s.id)===f.id,onHover:p,onClick:S,onPositionUpdate:h.registerPosition},f.id)),u.filter(f=>f.type==="planet").map(f=>e.jsx(Re,{radius:f.orbitRadius,eccentricity:f.orbitEccentricity,isHighlighted:(s==null?void 0:s.id)===f.id},`orbit-${f.id}`)),u.filter(f=>f.type==="star"&&f.orbitRadius>0).map(f=>e.jsx(Re,{radius:f.orbitRadius,eccentricity:f.orbitEccentricity,isHighlighted:(s==null?void 0:s.id)===f.id,isBinaryOrbit:!0},`orbit-${f.id}`)),e.jsx(Ct,{shouldAutoRotate:!s&&!i,maxDistance:m*ce.MAX_DISTANCE_MULTIPLIER,focusedBody:i,baseCameraDistance:m})]})})})})})}function kt({bodies:t,hoveredBody:a,focusedBody:s,onBodyHover:i,onBodyClick:r,isBinarySystem:l=!1}){const{t:d}=F(),x=t.filter(m=>m.type==="star"),c=x.find(m=>m.isPrimaryStar||!m.isCompanionStar),h=x.filter(m=>m.isCompanionStar),o=t.filter(m=>m.type==="planet"),u=m=>{const g=["planet-item"];return(a==null?void 0:a.id)===m.id&&g.push("hovered"),(s==null?void 0:s.id)===m.id&&g.push("focused"),g.join(" ")};return e.jsxs("div",{className:"starsystem-planets-panel",children:[e.jsx("h2",{className:"planets-panel-title",children:d("pages.starSystem.info.planetaryBodies")}),e.jsxs("ul",{className:"planets-list",children:[c&&e.jsxs("li",{className:u(c),onMouseEnter:()=>i(c),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(c),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:c.color}}),e.jsx("span",{className:"planet-name",children:c.name}),e.jsx("span",{className:"planet-type",children:d(l?"pages.starSystem.info.primaryStar":"pages.starSystem.info.star")}),(s==null?void 0:s.id)===c.id&&e.jsx("span",{className:"focus-indicator",children:"‚óè"})]}),h.map(m=>e.jsxs("li",{className:u(m),onMouseEnter:()=>i(m),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(m),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:m.color}}),e.jsx("span",{className:"planet-name",children:m.name}),e.jsx("span",{className:"planet-type",children:d("pages.starSystem.info.companionStar")}),(s==null?void 0:s.id)===m.id&&e.jsx("span",{className:"focus-indicator",children:"‚óè"})]},m.id)),o.map(m=>{var g;return e.jsxs("li",{className:u(m),onMouseEnter:()=>i(m),onMouseLeave:()=>i(null),onClick:()=>r==null?void 0:r(m),children:[e.jsx("span",{className:"planet-color-dot",style:{backgroundColor:m.color}}),e.jsx("span",{className:"planet-name",children:m.name}),e.jsx("span",{className:"planet-type",children:((g=m.planetData)==null?void 0:g.planet_type)||d("pages.starSystem.info.planet")}),(s==null?void 0:s.id)===m.id&&e.jsx("span",{className:"focus-indicator",children:"‚óè"})]},m.id)})]})]})}function oe(t,a){let s,i;if(a===void 0)for(const r of t)r!=null&&(s===void 0?r>=r&&(s=i=r):(s>r&&(s=r),i<r&&(i=r)));else{let r=-1;for(let l of t)(l=a(l,++r,t))!=null&&(s===void 0?l>=l&&(s=i=l):(s>l&&(s=l),i<l&&(i=l)))}return[s,i]}function Ie(t){return function(a){return a<0?-Math.pow(-a,t):Math.pow(a,t)}}function Ft(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ut(t){return t<0?-t*t:t*t}function Ht(t){var a=t(ee,ee),s=1;function i(){return s===1?t(ee,ee):s===.5?t(Ft,Ut):t(Ie(s),Ie(1/s))}return a.exponent=function(r){return arguments.length?(s=+r,i()):s},ft(a)}function ze(){var t=Ht(dt());return t.copy=function(){return pt(t,ze()).exponent(t.exponent())},ht.apply(t,arguments),t}function zt(){return ze.apply(null,arguments).exponent(.5)}function Gt({star:t,planets:a,isOpen:s,onClose:i}){var d,x,c,h,o;const{t:r}=F(),l=n.useMemo(()=>{const u=a.filter(N=>N.is_habitable_zone).length,m=a.filter(N=>N.is_earth_like).length,g=a.length>0?a.reduce((N,E)=>N+(E.habitability_score||0),0)/a.length:0,p=a.map(N=>N.disc_year).filter(N=>N!=null).sort((N,E)=>N-E),S=p[0],f=p[p.length-1],j=[...new Set(a.map(N=>N.discoverymethod))];return{habitableCount:u,earthLikeCount:m,avgHabitability:g,firstDiscovery:S,latestDiscovery:f,discoveryMethods:j}},[a]);return n.useEffect(()=>{const u=m=>{m.key==="Escape"&&i()};return s&&(document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",u),document.body.style.overflow=""}},[s,i]),s?e.jsx("div",{className:"system-overview-overlay",onClick:i,children:e.jsxs("div",{className:"system-overview-modal",onClick:u=>u.stopPropagation(),children:[e.jsx("button",{className:"system-overview-close",onClick:i,children:"‚úï"}),e.jsxs("div",{className:"system-overview-content",children:[e.jsxs("header",{className:"system-overview-header",children:[e.jsx("h1",{className:"system-overview-title",children:t.hostname}),e.jsxs("div",{className:"system-overview-badges",children:[t.st_spectype&&e.jsx("span",{className:"overview-badge spectral",children:t.st_spectype}),t.sy_snum>1&&e.jsxs("span",{className:"overview-badge binary",children:["‚òÖ‚òÖ ",r("pages.starSystem.info.binarySystem")]}),t.cb_flag&&e.jsx("span",{className:"overview-badge circumbinary",children:r("pages.starSystem.info.circumbinary")})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.starComparison")}),e.jsx(Yt,{star:t})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.systemStats")}),e.jsxs("div",{className:"overview-stats-grid",children:[e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:t.sy_pnum}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.info.planets")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:l.habitableCount}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.systemOverview.habitableCandidates")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:((d=t.distance_ly)==null?void 0:d.toFixed(1))||"‚Äî"}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.systemOverview.lightYears")})]}),e.jsxs("div",{className:"overview-stat",children:[e.jsx("span",{className:"stat-value",children:t.st_age?`${t.st_age.toFixed(1)} Gyr`:"‚Äî"}),e.jsx("span",{className:"stat-label",children:r("pages.starSystem.info.age")})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.starFeatures.title")}),e.jsx(Bt,{star:t,planets:a})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.habitability.title")}),e.jsx(es,{planets:a})]}),t.distance_ly&&t.distance_ly>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.travelTime.title")}),e.jsx(Xt,{distanceLy:t.distance_ly})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.planetaryData")}),e.jsxs("div",{className:"overview-charts-grid",children:[e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.planetSizes")}),e.jsx($t,{planets:a})]}),e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.orbitalDistances")}),e.jsx(Kt,{planets:a})]})]})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.orbitalView.title")}),e.jsxs("div",{className:"overview-charts-grid",children:[e.jsx(rs,{star:t,planets:a}),e.jsxs("div",{className:"overview-chart-card",children:[e.jsx("h3",{children:r("pages.starSystem.systemOverview.tempSizeChart.title")}),e.jsx(is,{planets:a})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.skyPosition")}),e.jsxs("div",{className:"overview-position-grid",children:[e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.rightAscension")}),e.jsx("span",{className:"position-value",children:t.rastr||`${(x=t.ra)==null?void 0:x.toFixed(4)}¬∞`})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.declination")}),e.jsx("span",{className:"position-value",children:t.decstr||`${(c=t.dec)==null?void 0:c.toFixed(4)}¬∞`})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.galacticLat")}),e.jsxs("span",{className:"position-value",children:[(h=t.glat)==null?void 0:h.toFixed(2),"¬∞"]})]}),e.jsxs("div",{className:"position-item",children:[e.jsx("span",{className:"position-label",children:r("pages.starSystem.systemOverview.galacticLon")}),e.jsxs("span",{className:"position-value",children:[(o=t.glon)==null?void 0:o.toFixed(2),"¬∞"]})]})]})]}),a.length>0&&e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.discoveryInfo")}),e.jsxs("div",{className:"overview-discovery-grid",children:[l.firstDiscovery&&e.jsxs("div",{className:"discovery-item",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.firstDiscovery")}),e.jsx("span",{className:"discovery-value",children:l.firstDiscovery})]}),l.latestDiscovery&&l.latestDiscovery!==l.firstDiscovery&&e.jsxs("div",{className:"discovery-item",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.latestDiscovery")}),e.jsx("span",{className:"discovery-value",children:l.latestDiscovery})]}),l.discoveryMethods.length>0&&e.jsxs("div",{className:"discovery-item full-width",children:[e.jsx("span",{className:"discovery-label",children:r("pages.starSystem.systemOverview.methods")}),e.jsx("div",{className:"discovery-methods",children:l.discoveryMethods.map(u=>e.jsx("span",{className:"method-badge",children:u},u))})]})]})]}),e.jsxs("section",{className:"overview-section",children:[e.jsx("h2",{className:"overview-section-title",children:r("pages.starSystem.systemOverview.stellarProperties")}),e.jsxs("div",{className:"overview-properties-table",children:[t.st_teff&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.info.temperature")}),e.jsxs("span",{className:"property-value",children:[t.st_teff.toFixed(0)," K"]})]}),t.st_rad&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.info.radius")}),e.jsxs("span",{className:"property-value",children:[t.st_rad.toFixed(2)," R‚òâ"]})]}),t.st_mass&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.info.mass")}),e.jsxs("span",{className:"property-value",children:[t.st_mass.toFixed(2)," M‚òâ"]})]}),t.st_lum&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.systemOverview.luminosity")}),e.jsxs("span",{className:"property-value",children:[t.st_lum.toFixed(3)," L‚òâ"]})]}),t.st_logg&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.systemOverview.surfaceGravity")}),e.jsxs("span",{className:"property-value",children:[t.st_logg.toFixed(2)," log g"]})]}),t.st_met&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.systemOverview.metallicity")}),e.jsxs("span",{className:"property-value",children:[t.st_met.toFixed(2)," [Fe/H]"]})]}),t.st_rotp&&e.jsxs("div",{className:"property-row",children:[e.jsx("span",{className:"property-label",children:r("pages.starSystem.systemOverview.rotationPeriod")}),e.jsxs("span",{className:"property-value",children:[t.st_rotp.toFixed(1)," days"]})]})]})]})]})]})}):null}function Yt({star:t}){const{t:a}=F(),s=5778,i=t.st_rad||1,r=t.st_teff||5778,l=100,d=i>=1?l/i:l,x=i>=1?l:l*i,c=h=>h>3e4?"#9bb0ff":h>1e4?"#aabfff":h>7500?"#cad7ff":h>6e3?"#f8f7ff":h>5200?"#fff4e8":h>3700?"#ffd2a1":h>2400?"#ffb56c":"#ff6b35";return e.jsxs("div",{className:"star-comparison-container",children:[e.jsxs("div",{className:"star-comparison-visual",children:[e.jsxs("div",{className:"comparison-body",children:[e.jsx("div",{className:"comparison-sphere sun",style:{width:d,height:d,background:`radial-gradient(circle at 30% 30%, #fff4e8, ${c(s)})`}}),e.jsx("span",{className:"comparison-label",children:a("pages.starSystem.systemOverview.sun")}),e.jsx("span",{className:"comparison-stats",children:"1.0 R‚òâ ‚Ä¢ 5,778 K"})]}),e.jsx("div",{className:"comparison-vs",children:"vs"}),e.jsxs("div",{className:"comparison-body",children:[e.jsx("div",{className:"comparison-sphere star",style:{width:x,height:x,background:`radial-gradient(circle at 30% 30%, #fff, ${c(r)})`}}),e.jsx("span",{className:"comparison-label",children:t.hostname}),e.jsxs("span",{className:"comparison-stats",children:[i.toFixed(2)," R‚òâ ‚Ä¢ ",r.toFixed(0)," K"]})]})]}),e.jsx("div",{className:"comparison-summary",children:i>1?e.jsx("p",{children:a("pages.starSystem.systemOverview.largerThanSun",{times:i.toFixed(1)})}):i<1?e.jsx("p",{children:a("pages.starSystem.systemOverview.smallerThanSun",{pct:((1-i)*100).toFixed(0)})}):e.jsx("p",{children:a("pages.starSystem.systemOverview.similarToSun")})})]})}function $t({planets:t}){const a=n.useRef(null),s=n.useRef(null);n.useEffect(()=>{if(!a.current||!s.current)return;const r=s.current.clientWidth,l=200,d={top:20,right:20,bottom:60,left:50},x=r-d.left-d.right,c=l-d.top-d.bottom,h=$(a.current);h.selectAll("*").remove(),h.attr("width",r).attr("height",l);const o=h.append("g").attr("transform",`translate(${d.left},${d.top})`),u=t.filter(p=>p.pl_rade).map(p=>({name:p.pl_name.replace(i.hostname,"").trim()||p.pl_name,radius:p.pl_rade})).sort((p,S)=>S.radius-p.radius).slice(0,10);if(u.length===0)return;const m=De().domain(u.map(p=>p.name)).range([0,x]).padding(.3),g=ke().domain([0,xt(u,p=>p.radius)||1]).nice().range([c,0]);o.selectAll(".bar").data(u).join("rect").attr("x",p=>m(p.name)||0).attr("y",p=>g(p.radius)).attr("width",m.bandwidth()).attr("height",p=>c-g(p.radius)).attr("fill","#00ccff").attr("rx",3),o.append("g").attr("transform",`translate(0,${c})`).call(fe(m)).selectAll("text").attr("fill","#888").attr("font-size","10px").attr("transform","rotate(-45)").attr("text-anchor","end"),o.selectAll(".domain, .tick line").attr("stroke","#444"),o.append("g").call(Fe(g).ticks(5)).selectAll("text").attr("fill","#888").attr("font-size","10px"),o.append("text").attr("transform","rotate(-90)").attr("y",-35).attr("x",-c/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text("Radius (R‚äï)"),o.append("line").attr("x1",0).attr("x2",x).attr("y1",g(1)).attr("y2",g(1)).attr("stroke","#00ff88").attr("stroke-dasharray","4,4").attr("opacity",.6),o.append("text").attr("x",x-5).attr("y",g(1)-5).attr("text-anchor","end").attr("fill","#00ff88").attr("font-size","10px").text("Earth")},[t]);const i=t[0];return e.jsx("div",{ref:s,className:"chart-container",children:e.jsx("svg",{ref:a})})}function Kt({planets:t}){const a=n.useRef(null),s=n.useRef(null);return n.useEffect(()=>{if(!a.current||!s.current)return;const i=s.current.clientWidth,r=200,l={top:30,right:20,bottom:40,left:50},d=i-l.left-l.right,x=r-l.top-l.bottom,c=$(a.current);c.selectAll("*").remove(),c.attr("width",i).attr("height",r);const h=c.append("g").attr("transform",`translate(${l.left},${l.top})`),o=t.filter(g=>g.pl_orbsmax).map(g=>({name:g.pl_name,distance:g.pl_orbsmax,habitable:g.is_habitable_zone||!1})).sort((g,p)=>g.distance-p.distance);if(o.length===0)return;const u=Math.max(...o.map(g=>g.distance),1),m=re().domain([Math.min(...o.map(g=>g.distance),.01),u*1.2]).range([0,d]);h.append("rect").attr("x",m(.95)).attr("y",0).attr("width",Math.max(0,m(1.67)-m(.95))).attr("height",x).attr("fill","rgba(0, 255, 136, 0.1)"),h.append("line").attr("x1",0).attr("x2",d).attr("y1",x/2).attr("y2",x/2).attr("stroke","#333"),h.selectAll(".planet-dot").data(o).join("circle").attr("cx",g=>m(g.distance)).attr("cy",x/2).attr("r",8).attr("fill",g=>g.habitable?"#00ff88":"#00ccff").attr("stroke","#fff").attr("stroke-width",1),h.selectAll(".planet-label").data(o).join("text").attr("x",g=>m(g.distance)).attr("y",x/2-15).attr("text-anchor","middle").attr("fill","#888").attr("font-size","9px").text(g=>g.name.split(" ").pop()||g.name),h.append("g").attr("transform",`translate(0,${x})`).call(fe(m).tickValues([.01,.1,1,10,100]).tickFormat(pe(".2"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),h.selectAll(".domain, .tick line").attr("stroke","#444"),h.append("text").attr("x",d/2).attr("y",x+35).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text("Semi-major Axis (AU)"),h.append("text").attr("x",d).attr("y",-10).attr("text-anchor","end").attr("fill","rgba(0, 255, 136, 0.6)").attr("font-size","10px").text("Habitable Zone")},[t]),e.jsx("div",{ref:s,className:"chart-container",children:e.jsx("svg",{ref:a})})}const D={WALKING_KMS:.0014,CAR_KMS:.03,JET_KMS:.25,VOYAGER_KMS:17,NEW_HORIZONS_KMS:16.26,PARKER_PROBE_KMS:192,LIGHT_1PCT_KMS:2998,LIGHT_10PCT_KMS:29979,LIGHT_SPEED_KMS:299792},Vt=9461e9,Ae=80,Wt=31557600,we=2e3,qt=[{key:"walking",speedKms:D.WALKING_KMS,icon:"üö∂",category:"human",color:"#888888"},{key:"car",speedKms:D.CAR_KMS,icon:"üöó",category:"human",color:"#aaaaaa"},{key:"jet",speedKms:D.JET_KMS,icon:"‚úàÔ∏è",category:"human",color:"#cccccc"},{key:"voyager",speedKms:D.VOYAGER_KMS,icon:"üõ∞Ô∏è",category:"spacecraft",color:"#ff6b6b"},{key:"newHorizons",speedKms:D.NEW_HORIZONS_KMS,icon:"üöÄ",category:"spacecraft",color:"#ffa06b"},{key:"parkerProbe",speedKms:D.PARKER_PROBE_KMS,icon:"‚òÄÔ∏è",category:"spacecraft",color:"#ffcc00"},{key:"onePercentC",speedKms:D.LIGHT_1PCT_KMS,icon:"‚ö°",category:"light",color:"#00ccff"},{key:"tenPercentC",speedKms:D.LIGHT_10PCT_KMS,icon:"üí´",category:"light",color:"#00ffcc"},{key:"lightSpeed",speedKms:D.LIGHT_SPEED_KMS,icon:"üåü",category:"light",color:"#00ff88"}];function Zt(t,a){return t*Vt/a/Wt}function me(t){return t<1?`${(t*365.25).toFixed(1)} days`:t<1e3?`${t.toFixed(0)} years`:t<1e6?`${(t/1e3).toFixed(1)}k years`:t<1e9?`${(t/1e6).toFixed(1)}M years`:t<1e12?`${(t/1e9).toFixed(1)}B years`:`${(t/1e12).toFixed(1)}T years`}function Xt({distanceLy:t}){const{t:a}=F(),s=n.useRef(null),i=n.useRef(null),[r,l]=n.useState(null),[d,x]=n.useState(!1),c=n.useMemo(()=>qt.map(u=>{const m=Zt(t,u.speedKms),g=m<=Ae;return{...u,years:m,withinLifetime:g}}),[t]),h=n.useMemo(()=>{var u;return((u=c.find(m=>m.withinLifetime))==null?void 0:u.key)||null},[c]);n.useEffect(()=>{if(!s.current||!i.current||!t)return;const u=i.current.clientWidth,m=400,g={top:20,right:120,bottom:30,left:140},p=u-g.left-g.right,S=m-g.top-g.bottom,f=$(s.current);f.selectAll("*").remove(),f.attr("width",u).attr("height",m);const j=f.append("g").attr("transform",`translate(${g.left},${g.top})`),N=Math.max(...c.map(y=>y.speedKms)),E=Math.min(...c.map(y=>y.speedKms)),_=re().domain([E*.5,N*2]).range([0,p]),v=De().domain(c.map(y=>y.key)).range([0,S]).padding(.3);j.selectAll(".bar-track").data(c).join("rect").attr("class","bar-track").attr("x",0).attr("y",y=>v(y.key)||0).attr("width",p).attr("height",v.bandwidth()).attr("fill","rgba(255, 255, 255, 0.03)").attr("rx",4);const T=j.selectAll(".speed-bar").data(c).join("rect").attr("class","speed-bar").attr("x",0).attr("y",y=>v(y.key)||0).attr("height",v.bandwidth()).attr("fill",y=>y.color).attr("rx",4).attr("opacity",.8).attr("cursor","pointer").attr("width",0);d?T.attr("width",y=>_(y.speedKms)):T.transition().duration(we).delay((y,A)=>A*100).ease(vt).attr("width",y=>_(y.speedKms)).on("end",()=>x(!0)),T.on("mouseenter",function(y,A){$(this).attr("opacity",1),l(A.key)}).on("mouseleave",function(){$(this).attr("opacity",.8),l(null)}),j.selectAll(".speed-icon").data(c).join("text").attr("class","speed-icon").attr("x",-35).attr("y",y=>(v(y.key)||0)+v.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size","20px").text(y=>y.icon),j.selectAll(".speed-label").data(c).join("text").attr("class","speed-label").attr("x",-45).attr("y",y=>(v(y.key)||0)+v.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","end").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","11px").text(y=>a(`pages.starSystem.systemOverview.travelTime.${y.key}`));const b=j.selectAll(".time-label").data(c).join("text").attr("class","time-label").attr("y",y=>(v(y.key)||0)+v.bandwidth()/2).attr("dy","0.35em").attr("fill","rgba(255, 255, 255, 0.9)").attr("font-size","11px").attr("font-family","monospace").attr("opacity",0);d?b.attr("x",y=>_(y.speedKms)+8).attr("opacity",1).text(y=>me(y.years)):b.transition().duration(300).delay((y,A)=>we+A*100).attr("x",y=>_(y.speedKms)+8).attr("opacity",1).text(y=>me(y.years));const w=c.filter(y=>y.withinLifetime);if(w.length>0){const y=w[w.length-1];j.append("line").attr("x1",_(y.speedKms)).attr("x2",_(y.speedKms)).attr("y1",-10).attr("y2",S+10).attr("stroke","#00ff88").attr("stroke-width",2).attr("stroke-dasharray","4,4").attr("opacity",.6),j.append("text").attr("x",_(y.speedKms)).attr("y",-15).attr("text-anchor","middle").attr("fill","#00ff88").attr("font-size","10px").text("‚Üê Reachable in your lifetime")}},[t,c,a,d]);const o=r?c.find(u=>u.key===r):null;return!t||t<=0?e.jsx("div",{className:"speed-race-section",children:e.jsx("p",{className:"travel-unreachable",children:a("pages.starSystem.systemOverview.travelTime.unreachable")})}):e.jsxs("div",{className:"speed-race-section",children:[e.jsxs("div",{className:"speed-race-header",children:[e.jsxs("div",{className:"speed-race-distance",children:[e.jsx("span",{className:"distance-value",children:t.toFixed(1)}),e.jsx("span",{className:"distance-label",children:"light-years away"})]}),h&&e.jsxs("div",{className:"speed-race-reachable",children:[e.jsx("span",{className:"reachable-icon",children:"‚úì"}),e.jsxs("span",{children:["Reachable at ",a(`pages.starSystem.systemOverview.travelTime.${h}`)," or faster"]})]})]}),e.jsx("div",{ref:i,className:"speed-race-chart",children:e.jsx("svg",{ref:s})}),o&&e.jsxs("div",{className:"speed-race-details",children:[e.jsx("div",{className:"detail-icon",children:o.icon}),e.jsxs("div",{className:"detail-info",children:[e.jsx("span",{className:"detail-name",children:a(`pages.starSystem.systemOverview.travelTime.${o.key}`)}),e.jsx("span",{className:"detail-time",children:me(o.years)})]}),e.jsx("div",{className:"detail-stats",children:e.jsx("span",{className:`detail-badge ${o.withinLifetime?"reachable":""}`,children:o.withinLifetime?"‚úì Within your lifetime":`${Math.ceil(o.years/Ae)} lifetimes`})})]}),e.jsx("button",{className:"speed-race-replay",onClick:()=>x(!1),children:"üîÑ Replay Race"})]})}const Jt=[{key:"solarAnalog",icon:"‚òÄÔ∏è",className:"solar"},{key:"sunLike",icon:"‚≠ê",className:"solar"},{key:"redDwarf",icon:"üî¥",className:"red-dwarf"},{key:"youngSystem",icon:"üå±",className:"age"},{key:"matureSystem",icon:"üå≥",className:"age"},{key:"ancientSystem",icon:"üèõÔ∏è",className:"age"},{key:"metalRich",icon:"‚öôÔ∏è",className:"metallicity"},{key:"metalPoor",icon:"üí®",className:"metallicity"},{key:"binarySystem",icon:"‚òÖ‚òÖ",className:"binary"},{key:"circumbinary",icon:"üåÄ",className:"binary"}];function Qt(t,a){const s=[],i=a[0];return i&&(i.is_solar_analog?s.push("solarAnalog"):i.is_sun_like_star&&s.push("sunLike"),i.is_red_dwarf_host&&s.push("redDwarf"),i.is_young_system?s.push("youngSystem"):i.is_ancient_system?s.push("ancientSystem"):i.is_mature_system&&s.push("matureSystem"),i.is_metal_rich_star?s.push("metalRich"):i.is_metal_poor_star&&s.push("metalPoor"),t.sy_snum>1&&s.push("binarySystem"),t.cb_flag&&s.push("circumbinary")),s}function Bt({star:t,planets:a}){const{t:s}=F(),i=n.useMemo(()=>Qt(t,a),[t,a]);return i.length===0?e.jsx("div",{className:"star-features-empty",children:s("pages.starSystem.systemOverview.starFeatures.title")}):e.jsx("div",{className:"star-features-grid",children:i.map(r=>{const l=Jt.find(d=>d.key===r);return l?e.jsxs("div",{className:`star-feature-card ${l.className}`,children:[e.jsxs("div",{className:"star-feature-header",children:[e.jsx("span",{className:"star-feature-icon",children:l.icon}),e.jsx("span",{className:"star-feature-name",children:s(`pages.starSystem.systemOverview.starFeatures.${r}`)})]}),e.jsx("p",{className:"star-feature-description",children:s(`pages.starSystem.systemOverview.starFeatures.${r}Desc`)})]},r):null})})}function es({planets:t}){const{t:a}=F(),s=n.useMemo(()=>{if(t.length===0)return null;const d=gt(t),x=yt(t);return{stats:d,breakdown:x}},[t]);if(!s||t.length===0)return e.jsx("div",{className:"habitability-no-data",children:a("pages.starSystem.systemOverview.habitability.noData")});const{stats:i,breakdown:r}=s,l=r.filter(d=>d.count>0);return e.jsxs("div",{className:"habitability-overview-container",children:[e.jsxs("div",{className:"habitability-score-display",children:[e.jsxs("div",{className:"habitability-avg-score",children:[e.jsx("span",{className:"habitability-score-value",children:i.avgScore.toFixed(0)}),e.jsx("span",{className:"habitability-score-label",children:a("pages.starSystem.systemOverview.habitability.avgScore")})]}),i.topScorerName&&e.jsxs("div",{className:"habitability-best-candidate",children:[e.jsx("span",{className:"habitability-candidate-name",children:i.topScorerName.split(" ").pop()}),e.jsxs("span",{className:"habitability-candidate-score",children:[a("pages.starSystem.systemOverview.habitability.score"),": ",i.topScore.toFixed(0)]})]})]}),l.length>0&&e.jsxs("div",{className:"habitability-breakdown-container",children:[e.jsx("span",{className:"habitability-breakdown-title",children:a("pages.starSystem.systemOverview.habitability.breakdown")}),e.jsx("div",{className:"habitability-breakdown-bars",children:l.map(d=>{const x=Math.max(...l.map(o=>o.pct)),c=x>0?d.pct/x*100:0,h=d.category.toLowerCase().replace(/[\s-]/g,"-");return e.jsxs("div",{className:"habitability-bar-row",children:[e.jsx("span",{className:"habitability-bar-label",children:d.category}),e.jsx("div",{className:"habitability-bar-track",children:e.jsx("div",{className:`habitability-bar-fill ${h}`,style:{width:`${c}%`,backgroundColor:d.color}})}),e.jsx("span",{className:"habitability-bar-count",children:d.count})]},d.category)})})]}),e.jsxs("div",{className:"habitability-quick-stats",children:[e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.habitableZone}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.systemOverview.habitability.habitableZone")})]}),e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.earthLike}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.systemOverview.habitability.earthLike")})]}),e.jsxs("div",{className:"habitability-quick-stat",children:[e.jsx("span",{className:"habitability-quick-stat-value",children:i.total}),e.jsx("span",{className:"habitability-quick-stat-label",children:a("pages.starSystem.info.planets")})]})]})]})}const ts=.95,ss=1.67;function as(t){const a=t?Math.pow(10,t):1,s=Math.sqrt(Math.max(a,.001));return{inner:ts*s,outer:ss*s}}function rs({star:t,planets:a}){const{t:s}=F(),i=n.useRef(null),r=n.useRef(null);return n.useEffect(()=>{if(!i.current||!r.current)return;const l=r.current.clientWidth,d=Math.min(l,400),x=40,c=(d-x*2)/2,h=d/2,o=d/2,u=$(i.current);u.selectAll("*").remove(),u.attr("width",d).attr("height",d);const m=a.filter(_=>_.pl_orbsmax&&_.pl_orbsmax>0).map(_=>({name:_.pl_name.split(" ").pop()||_.pl_name,semiMajorAxis:_.pl_orbsmax,eccentricity:_.pl_orbeccen||0,habitable:_.is_habitable_zone||!1})).sort((_,v)=>_.semiMajorAxis-v.semiMajorAxis);if(m.length===0)return;const g=Math.max(...m.map(_=>_.semiMajorAxis)),p=as(t.st_lum),S=Math.max(g*1.2,p.outer*1.1),f=c/S;u.append("circle").attr("cx",h).attr("cy",o).attr("r",c+x/2).attr("fill","rgba(0, 0, 0, 0.3)");const j=p.inner*f,N=p.outer*f;N>0&&N<=c&&(u.append("circle").attr("cx",h).attr("cy",o).attr("r",N).attr("fill","rgba(0, 255, 136, 0.1)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1),j>0&&u.append("circle").attr("cx",h).attr("cy",o).attr("r",j).attr("fill","rgba(0, 0, 0, 0.3)").attr("stroke","rgba(0, 255, 136, 0.3)").attr("stroke-width",1).attr("stroke-dasharray","4,4")),[.1,.5,1,2,5,10,20,50].filter(_=>_*f<c&&_<S).forEach(_=>{u.append("circle").attr("cx",h).attr("cy",o).attr("r",_*f).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.1)").attr("stroke-width",.5),u.append("text").attr("x",h+_*f+3).attr("y",o-3).attr("fill","rgba(255, 255, 255, 0.3)").attr("font-size","8px").text(`${_} AU`)}),u.append("circle").attr("cx",h).attr("cy",o).attr("r",8).attr("fill","#ffcc00").attr("filter","drop-shadow(0 0 10px rgba(255, 200, 0, 0.5))"),m.forEach((_,v)=>{const T=_.semiMajorAxis*f,b=v/m.length*Math.PI*2-Math.PI/2,w=h+Math.cos(b)*T,y=o+Math.sin(b)*T;u.append("circle").attr("cx",h).attr("cy",o).attr("r",T).attr("fill","none").attr("stroke",_.habitable?"rgba(0, 255, 136, 0.4)":"rgba(0, 204, 255, 0.3)").attr("stroke-width",1),u.append("circle").attr("cx",w).attr("cy",y).attr("r",6).attr("fill",_.habitable?"#00ff88":"#00ccff").attr("stroke","#fff").attr("stroke-width",1),u.append("text").attr("x",w).attr("y",y-10).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","9px").text(_.name)})},[t,a]),e.jsxs("div",{className:"orbital-topdown-container",children:[e.jsx("div",{ref:r,className:"orbital-topdown-chart",children:e.jsx("svg",{ref:i})}),e.jsxs("div",{className:"orbital-legend",children:[e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot hz"}),e.jsx("span",{children:s("pages.starSystem.systemOverview.orbitalView.habitableZone")})]}),e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot planet"}),e.jsx("span",{children:s("pages.starSystem.info.planet")})]}),e.jsxs("div",{className:"orbital-legend-item",children:[e.jsx("div",{className:"orbital-legend-dot habitable"}),e.jsx("span",{children:s("pages.starSystem.systemOverview.habitability.habitableZone")})]})]})]})}const ue=320,de=200;function is({planets:t}){const{t:a}=F(),s=n.useRef(null),i=n.useRef(null);return n.useEffect(()=>{if(!s.current||!i.current)return;const r=i.current.clientWidth,l=280,d={top:30,right:30,bottom:50,left:60},x=r-d.left-d.right,c=l-d.top-d.bottom,h=$(s.current);h.selectAll("*").remove(),h.attr("width",r).attr("height",l);const o=t.filter(v=>v.pl_eqt&&v.pl_eqt>0&&v.pl_rade&&v.pl_rade>0).map(v=>({name:v.pl_name.split(" ").pop()||v.pl_name,temp:v.pl_eqt,radius:v.pl_rade,mass:v.pl_bmasse||1,score:v.habitability_score,habitable:v.is_habitable_zone||!1}));if(o.length===0)return;const u=h.append("g").attr("transform",`translate(${d.left},${d.top})`),m=oe(o,v=>v.temp),g=oe(o,v=>v.radius),p=re().domain([Math.min(m[0]*.8,100),Math.max(m[1]*1.2,3e3)]).range([0,x]),S=re().domain([Math.min(g[0]*.8,.3),Math.max(g[1]*1.2,20)]).range([c,0]);u.append("rect").attr("x",p(ue)).attr("y",0).attr("width",x-p(ue)).attr("height",c).attr("fill","rgba(255, 100, 100, 0.1)"),u.append("rect").attr("x",p(de)).attr("y",0).attr("width",p(ue)-p(de)).attr("height",c).attr("fill","rgba(0, 255, 136, 0.1)"),u.append("rect").attr("x",0).attr("y",0).attr("width",p(de)).attr("height",c).attr("fill","rgba(100, 150, 255, 0.1)");const f=ke().domain([0,50,100]).range(["#ff4444","#ffaa00","#00ff88"]),j=oe(o,v=>v.mass),N=zt().domain([Math.min(j[0],.1),Math.max(j[1],100)]).range([4,15]);u.selectAll(".planet-bubble").data(o).join("circle").attr("cx",v=>p(v.temp)).attr("cy",v=>S(v.radius)).attr("r",v=>N(v.mass)).attr("fill",v=>f(v.score)).attr("stroke","#fff").attr("stroke-width",1).attr("opacity",.8),o.length<=8&&u.selectAll(".planet-label").data(o).join("text").attr("x",v=>p(v.temp)).attr("y",v=>S(v.radius)-N(v.mass)-4).attr("text-anchor","middle").attr("fill","rgba(255, 255, 255, 0.7)").attr("font-size","9px").text(v=>v.name);const E=255,_=1;p(E)>0&&p(E)<x&&S(_)>0&&S(_)<c&&(u.append("circle").attr("cx",p(E)).attr("cy",S(_)).attr("r",4).attr("fill","none").attr("stroke","#fff").attr("stroke-width",2).attr("stroke-dasharray","2,2"),u.append("text").attr("x",p(E)+8).attr("y",S(_)+3).attr("fill","rgba(255, 255, 255, 0.5)").attr("font-size","9px").text("üåç")),u.append("g").attr("transform",`translate(0,${c})`).call(fe(p).tickValues([100,200,300,500,1e3,2e3]).tickFormat(pe("d"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),u.selectAll(".domain, .tick line").attr("stroke","#444"),u.append("text").attr("x",x/2).attr("y",c+40).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text(a("pages.starSystem.systemOverview.tempSizeChart.xAxis")),u.append("g").call(Fe(S).tickValues([.5,1,2,5,10,20]).tickFormat(pe(".1f"))).selectAll("text").attr("fill","#888").attr("font-size","10px"),u.append("text").attr("transform","rotate(-90)").attr("y",-45).attr("x",-c/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text(a("pages.starSystem.systemOverview.tempSizeChart.yAxis"))},[t,a]),e.jsxs("div",{className:"temp-size-container",children:[e.jsx("div",{ref:i,className:"temp-size-chart",children:e.jsx("svg",{ref:s})}),e.jsxs("div",{className:"temp-size-legend",children:[e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator hot"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.tooHot")})]}),e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator habitable"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.habitable")})]}),e.jsxs("div",{className:"temp-size-legend-item",children:[e.jsx("div",{className:"temp-zone-indicator cold"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.tooCold")})]}),e.jsxs("div",{className:"temp-size-legend-item temp-size-earth-marker",children:[e.jsx("div",{className:"temp-size-earth-dot"}),e.jsx("span",{children:a("pages.starSystem.systemOverview.tempSizeChart.earth")})]})]})]})}function us(){const{t}=F(),{starId:a}=at(),s=rt(),{getStarBySlug:i,getPlanetsByHost:r,isLoading:l}=it(),[d,x]=n.useState(!1),[c,h]=n.useState(!1),[o,u]=n.useState(null),[m,g]=n.useState(null),[p,S]=n.useState(!1),[f,j]=n.useState(null),N=a?i(a):void 0,E=N?r(N.hostname):[],_=n.useMemo(()=>N?Ce(N,E):[],[N,E]);n.useEffect(()=>{const y=window.matchMedia("(min-width: 769px)");S(y.matches);const A=V=>{S(V.matches)};return y.addEventListener("change",A),()=>y.removeEventListener("change",A)},[]);const v=n.useCallback((y,A)=>{u(y),g(A??null)},[]),T=n.useCallback(y=>{(f==null?void 0:f.id)===y.id?y.type==="planet"?s(`/planets/${nt(y.id)}`):y.type==="star"&&x(!0):j(y)},[f,s]),b=n.useCallback(()=>{j(null)},[]),w=N?N.sy_snum>1:!1;return l?e.jsx("div",{className:"spinner-container",children:e.jsxs("div",{className:"spinner-content",children:[e.jsx("div",{className:"spinner-orbit",children:e.jsx("div",{className:"spinner-planet"})}),e.jsx("div",{className:"spinner-text",children:t("pages.star.loading")})]})}):N?e.jsx("div",{className:"starsystem-page",children:e.jsxs("section",{className:"starsystem-hero-section",children:[e.jsxs("div",{className:"starsystem-hero-header",children:[e.jsx("h1",{className:"starsystem-title",children:N.hostname}),e.jsxs("p",{className:"starsystem-subtitle",children:[N.st_spectype||N.star_class||t("pages.starSystem.info.unknown"),N.distance_ly&&` ‚Ä¢ ${N.distance_ly.toFixed(2)} ly`,E.length>0&&` ‚Ä¢ ${E.length} ${E.length===1?t("pages.starSystem.info.planet"):t("pages.starSystem.info.planets")}`]}),e.jsx("button",{className:"system-overview-btn",onClick:()=>x(!0),children:t("pages.starSystem.systemOverview.button")})]}),e.jsx(Se,{to:"/",className:"starsystem-back-button",children:t("pages.star.backToStarfield")}),e.jsx(Dt,{star:N,planets:E,hoveredBody:o,focusedBody:f,onBodyHover:v,onBodyClick:T,onBackgroundClick:b}),(p||c)&&e.jsx(kt,{bodies:_,hoveredBody:o,focusedBody:f,onBodyHover:y=>v(y),onBodyClick:T,isBinarySystem:w}),!p&&e.jsx("button",{className:"bodies-toggle-btn",onClick:()=>h(!c),title:t(c?"pages.starSystem.hideBodies":"pages.starSystem.showBodies"),children:c?"‚úï":"‚ò∞"}),o&&o.type==="planet"&&m&&o.planetData&&e.jsxs("div",{className:"starsystem-cursor-tooltip",style:{left:m.x+20,top:m.y-10},children:[e.jsxs("div",{className:"cursor-tooltip-header",children:[e.jsx("div",{className:"cursor-tooltip-name",children:o.planetData.pl_name}),e.jsx("div",{className:"cursor-tooltip-type",children:o.planetData.planet_type})]}),e.jsxs("div",{className:"cursor-tooltip-details",children:[o.planetData.pl_rade&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Radius"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[o.planetData.pl_rade.toFixed(2)," R‚äï"]})]}),o.planetData.pl_bmasse&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Mass"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[o.planetData.pl_bmasse.toFixed(2)," M‚äï"]})]}),o.planetData.pl_orbper&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Orbital Period"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[o.planetData.pl_orbper.toFixed(2)," days"]})]}),o.planetData.pl_orbsmax&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Semi-major Axis"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[o.planetData.pl_orbsmax.toFixed(3)," AU"]})]}),o.planetData.pl_eqt&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Eq. Temperature"}),e.jsxs("span",{className:"cursor-tooltip-value",children:[o.planetData.pl_eqt.toFixed(0)," K"]})]}),o.planetData.disc_year&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Discovered"}),e.jsx("span",{className:"cursor-tooltip-value",children:o.planetData.disc_year})]}),o.planetData.discoverymethod&&e.jsxs("div",{className:"cursor-tooltip-detail",children:[e.jsx("span",{className:"cursor-tooltip-label",children:"Method"}),e.jsx("span",{className:"cursor-tooltip-value",children:o.planetData.discoverymethod})]})]}),e.jsx("div",{className:"cursor-tooltip-hint",children:"Click to view details"})]}),e.jsx(Gt,{star:N,planets:E,isOpen:d,onClose:()=>x(!1)})]})}):e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h1",{className:"error-title",children:t("pages.star.notFound.title")}),e.jsx("p",{className:"error-message",children:t("pages.star.notFound.message",{starId:a||""})}),e.jsx(Se,{to:"/",className:"starsystem-back-link",children:t("pages.star.notFound.returnToStarfield")})]})})}export{us as default};
