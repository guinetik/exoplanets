const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TourHeroBackground-Zuw3jZwe.js","assets/index-qmOb9_Km.js","assets/index-CM0usqQ7.css","assets/react-three-fiber.esm-f2gG1xD8.js"])))=>i.map(i=>d[i]);
import{r as p,j as s,u as j,c as N,E as v,aE as S}from"./index-qmOb9_Km.js";import{P as h}from"./PlanetCard-C_c8PQEJ.js";import{S as P}from"./StarCard-C5hArl5k.js";function f(e={}){const{threshold:r=.1,rootMargin:t="0px",triggerOnce:a=!0}=e,i=p.useRef(null),[c,l]=p.useState(!1);return p.useEffect(()=>{const n=i.current;if(!n)return;const u=new IntersectionObserver(([g])=>{g.isIntersecting?(l(!0),a&&u.unobserve(n)):a||l(!1)},{threshold:r,rootMargin:t});return u.observe(n),()=>u.disconnect()},[r,t,a]),{ref:i,isVisible:c}}function m({id:e,chapter:r,title:t,intro:a,children:i}){const{ref:c,isVisible:l}=f({threshold:.2}),{ref:n,isVisible:u}=f({threshold:.1});return s.jsxs("section",{id:e,className:"tour-section",children:[s.jsxs("div",{ref:c,className:`tour-section-header tour-animate ${l?"visible":""}`,children:[s.jsx("span",{className:"tour-chapter-number",children:r}),s.jsx("h2",{className:"tour-section-title",children:t}),s.jsx("p",{className:"tour-section-intro",children:a})]}),s.jsx("div",{ref:n,className:`tour-showcase ${u?"visible":""}`,children:i})]})}function E({sections:e}){const[r,t]=p.useState("");p.useEffect(()=>{const i=new IntersectionObserver(c=>{c.forEach(l=>{l.isIntersecting&&t(l.target.id)})},{rootMargin:"-45% 0px -45% 0px",threshold:0});return e.forEach(({id:c})=>{const l=document.getElementById(c);l&&i.observe(l)}),()=>i.disconnect()},[e]);const a=i=>{const c=document.getElementById(i);c&&c.scrollIntoView({behavior:"smooth"})};return s.jsx("nav",{className:"tour-navigation","aria-label":"Tour sections",children:e.map(({id:i,label:c})=>s.jsx("button",{className:`tour-nav-dot ${r===i?"active":""}`,onClick:()=>a(i),title:c,"aria-label":`Jump to ${c}`},i))})}const T=["Proxima Cen b","TRAPPIST-1 e","Kepler-452 b","51 Peg b","Kepler-16 b","Kepler-186 f"],D={"Proxima Cen b":"proximaCenB","TRAPPIST-1 e":"trappist1e","Kepler-452 b":"kepler452b","51 Peg b":"fiftyOnePegB","Kepler-16 b":"kepler16b","Kepler-186 f":"kepler186f"};function I(e,r){const t=new Map(e.map(i=>[i.pl_name,i])),a=[];return T.forEach(i=>{const c=t.get(i),l=D[i];c&&l&&a.push({...c,tourCategory:"famous",tourDescription:r(`pages.tour.descriptions.famous.${l}`)})}),a}const K=["Proxima Cen","Barnard's star","Wolf 1069","TRAPPIST-1","51 Peg","iot Dra","Kepler-186","KOI-351","Kepler-16"],C={"Proxima Cen":"proximaCen","Barnard's star":"barnardsStar","Wolf 1069":"wolf1069","TRAPPIST-1":"trappist1","51 Peg":"fiftyOnePeg","iot Dra":"iotDra","Kepler-186":"kepler186","KOI-351":"kepler90","Kepler-16":"kepler16"};function F(e,r){const t=new Map(e.map(i=>[i.hostname,i])),a=[];return K.forEach(i=>{const c=t.get(i),l=C[i];if(c&&l){const n={...c};n.hostname==="KOI-351"&&(n.hostname="Kepler-90"),a.push({...n,tourCategory:"famousStar",tourDescription:r(`pages.tour.descriptions.stars.${l}`)})}}),a}function A(e,r){var i;const t=((i=e.distance_ly)==null?void 0:i.toFixed(1))??"unknown",a=e.planet_type??r("pages.tour.descriptions.common.world");return e.is_habitable_zone?r("pages.tour.descriptions.nearby.habitableZone",{distance:t,type:a}):e.sy_pnum>1?r("pages.tour.descriptions.nearby.multiPlanet",{distance:t,count:e.sy_pnum}):r("pages.tour.descriptions.nearby.default",{distance:t,type:a})}function k(e,r){return e.filter(t=>t.distance_ly!==null&&t.distance_ly>0&&t.distance_ly<50).sort((t,a)=>(t.distance_ly??1/0)-(a.distance_ly??1/0)).slice(0,6).map(t=>({...t,tourCategory:"nearby",tourDescription:A(t,r)}))}function R(e,r){const t=e.habitability_score.toFixed(0),a=[];return e.is_earth_like?a.push(r("pages.tour.descriptions.habitable.traits.earthSized")):e.planet_type&&a.push(e.planet_type),e.is_habitable_zone&&a.push(r("pages.tour.descriptions.habitable.traits.habitableZone")),e.is_sun_like_star?a.push(r("pages.tour.descriptions.habitable.traits.sunLikeStar")):e.is_red_dwarf_host&&a.push(r("pages.tour.descriptions.habitable.traits.redDwarf")),(a.length>0?r("pages.tour.descriptions.habitable.intro",{traits:a.join(", ")}):"")+r("pages.tour.descriptions.habitable.score",{score:t})}function V(e,r){return e.filter(t=>t.is_top_habitable_candidate||t.habitability_score>60).sort((t,a)=>a.habitability_score-t.habitability_score).slice(0,6).map(t=>({...t,tourCategory:"habitable",tourDescription:R(t,r)}))}function $(e,r,t){var a,i,c,l;switch(e){case"ultra_hot":{const n=((a=r.pl_eqt)==null?void 0:a.toFixed(0))??"2000+";return t("pages.tour.descriptions.extreme.ultraHot",{temp:n})}case"puffy":{const n=((i=r.pl_dens)==null?void 0:i.toFixed(2))??t("pages.tour.descriptions.common.veryLow");return t("pages.tour.descriptions.extreme.puffy",{density:n})}case"circumbinary":return t("pages.tour.descriptions.extreme.circumbinary");case"ultra_dense":{const n=((c=r.pl_dens)==null?void 0:c.toFixed(1))??"8+";return t("pages.tour.descriptions.extreme.ultraDense",{density:n})}case"eccentric":{const n=((l=r.pl_orbeccen)==null?void 0:l.toFixed(2))??"0.3+";return t("pages.tour.descriptions.extreme.eccentric",{ecc:n})}default:return""}}function M(e,r){const t=[{flag:"is_ultra_hot",type:"ultra_hot",labelKey:"pages.tour.descriptions.extreme.labels.ultraHot"},{flag:"is_puffy",type:"puffy",labelKey:"pages.tour.descriptions.extreme.labels.puffy"},{flag:"is_circumbinary",type:"circumbinary",labelKey:"pages.tour.descriptions.extreme.labels.circumbinary"},{flag:"is_ultra_dense",type:"ultra_dense",labelKey:"pages.tour.descriptions.extreme.labels.ultraDense"},{flag:"is_eccentric_orbit",type:"eccentric",labelKey:"pages.tour.descriptions.extreme.labels.eccentric"}],a=[];return t.forEach(({flag:i,type:c,labelKey:l})=>{if(a.length>=6)return;e.filter(u=>u[i]===!0).slice(0,a.length<4?2:1).forEach(u=>{a.length<6&&a.push({...u,extremeType:c,extremeLabel:r(l),tourCategory:"extreme",tourDescription:$(c,u,r)})})}),a}function O(e,r){var g,b,x,_,y;const t=[],a=e.filter(o=>o.pl_eqt!==null&&o.pl_eqt>0).sort((o,d)=>(d.pl_eqt??0)-(o.pl_eqt??0))[0];if(a){const o=(g=a.pl_eqt)==null?void 0:g.toFixed(0);t.push({...a,record:r("pages.tour.descriptions.records.labels.hottest"),recordValue:`${o}K`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.hottest",{temp:o})})}const i=e.filter(o=>o.pl_eqt!==null&&o.pl_eqt>0).sort((o,d)=>(o.pl_eqt??1/0)-(d.pl_eqt??1/0))[0];if(i){const o=(b=i.pl_eqt)==null?void 0:b.toFixed(0),d=((i.pl_eqt??0)-273).toFixed(0);t.push({...i,record:r("pages.tour.descriptions.records.labels.coldest"),recordValue:`${o}K`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.coldest",{temp:o,tempC:d})})}const c=e.filter(o=>o.pl_orbper!==null&&o.pl_orbper>0).sort((o,d)=>(o.pl_orbper??1/0)-(d.pl_orbper??1/0))[0];if(c){const o=c.pl_orbper,d=o<1?r("pages.tour.descriptions.common.hours",{value:(o*24).toFixed(1)}):r("pages.tour.descriptions.common.days",{value:o.toFixed(2)});t.push({...c,record:r("pages.tour.descriptions.records.labels.fastest"),recordValue:d,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.fastest",{period:d})})}const l=e.filter(o=>o.pl_radj!==null&&o.pl_radj>0).sort((o,d)=>(d.pl_radj??0)-(o.pl_radj??0))[0];if(l){const o=(x=l.pl_radj)==null?void 0:x.toFixed(1);t.push({...l,record:r("pages.tour.descriptions.records.labels.largest"),recordValue:`${o} R♃`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.largest",{radius:o})})}const n=e.filter(o=>o.pl_rade!==null&&o.pl_rade>0).sort((o,d)=>(o.pl_rade??1/0)-(d.pl_rade??1/0))[0];if(n){const o=(_=n.pl_rade)==null?void 0:_.toFixed(2);t.push({...n,record:r("pages.tour.descriptions.records.labels.smallest"),recordValue:`${o} R⊕`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.smallest",{radius:o})})}const u=e.filter(o=>o.st_age!==null&&o.st_age>0).sort((o,d)=>(d.st_age??0)-(o.st_age??0))[0];if(u){const o=(y=u.st_age)==null?void 0:y.toFixed(1);t.push({...u,record:r("pages.tour.descriptions.records.labels.oldest"),recordValue:`${o} Gyr`,tourCategory:"record",tourDescription:r("pages.tour.descriptions.records.oldest",{age:o})})}return t.slice(0,6)}function w(e,r,t){return{famous:I(e,t),famousStars:F(r,t),nearest:k(e,t),habitable:V(e,t),extreme:M(e,t),records:O(e,t)}}const q=p.lazy(()=>S(()=>import("./TourHeroBackground-Zuw3jZwe.js"),__vite__mapDeps([0,1,2,3]))),B=[{id:"stars",label:"Famous Stars"},{id:"famous",label:"Famous Worlds"},{id:"nearest",label:"Nearest Neighbors"},{id:"habitable",label:"Most Habitable"},{id:"extreme",label:"Extreme Worlds"},{id:"records",label:"Record Breakers"}];function W(){const{t:e}=j(),{getAllPlanets:r,getAllStars:t,isLoading:a}=N(),i=p.useMemo(()=>{if(a)return null;const n=r(),u=t();return w(n,u,e)},[a,r,t,e]),{ref:c,isVisible:l}=f({threshold:.3});return a||!i?s.jsx("div",{className:"tour-page",children:s.jsx("div",{className:"tour-hero",children:s.jsx("div",{className:"spinner"})})}):s.jsxs("div",{className:"tour-page",children:[s.jsxs("header",{ref:c,className:`tour-hero ${l?"visible":""}`,children:[s.jsx(p.Suspense,{fallback:null,children:s.jsx(q,{})}),s.jsxs("div",{className:"tour-hero-content",children:[s.jsx("h1",{className:"tour-hero-title",children:e("pages.tour.title")}),s.jsx("p",{className:"tour-hero-subtitle",children:e("pages.tour.subtitle")})]}),s.jsxs("div",{className:"tour-hero-scroll",children:[s.jsx("span",{className:"tour-hero-scroll-hint",children:e("pages.tour.scrollHint")}),s.jsx("div",{className:"tour-hero-scroll-arrow",children:"↓"})]})]}),s.jsx(E,{sections:B}),s.jsx(m,{id:"stars",chapter:e("pages.tour.sections.stars.chapter"),title:e("pages.tour.sections.stars.title"),intro:e("pages.tour.sections.stars.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.famousStars.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(P,{star:n})},n.hostname))})}),s.jsx(m,{id:"famous",chapter:e("pages.tour.sections.famous.chapter"),title:e("pages.tour.sections.famous.title"),intro:e("pages.tour.sections.famous.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.famous.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:n})},n.pl_name))})}),s.jsx(m,{id:"nearest",chapter:e("pages.tour.sections.nearest.chapter"),title:e("pages.tour.sections.nearest.title"),intro:e("pages.tour.sections.nearest.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.nearest.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:n})},n.pl_name))})}),s.jsx(m,{id:"habitable",chapter:e("pages.tour.sections.habitable.chapter"),title:e("pages.tour.sections.habitable.title"),intro:e("pages.tour.sections.habitable.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.habitable.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:n})},n.pl_name))})}),s.jsx(m,{id:"extreme",chapter:e("pages.tour.sections.extreme.chapter"),title:e("pages.tour.sections.extreme.title"),intro:e("pages.tour.sections.extreme.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.extreme.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:n})},`${n.pl_name}-${n.extremeType}`))})}),s.jsx(m,{id:"records",chapter:e("pages.tour.sections.records.chapter"),title:e("pages.tour.sections.records.title"),intro:e("pages.tour.sections.records.intro"),children:s.jsx("div",{className:"tour-planets-grid",children:i.records.map(n=>s.jsx("div",{className:"planets-grid-item",children:s.jsx(h,{planet:n})},`${n.pl_name}-${n.record}`))})}),s.jsxs("footer",{className:"tour-footer",children:[s.jsx("h2",{className:"tour-footer-title",children:e("pages.tour.footer.title")}),s.jsx(v,{to:"/planets",className:"tour-footer-cta",children:e("pages.tour.footer.cta")})]})]})}export{W as default};
